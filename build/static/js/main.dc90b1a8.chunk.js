/*! For license information please see main.dc90b1a8.chunk.js.LICENSE.txt */
(this["webpackJsonprakonto-ui"]=this["webpackJsonprakonto-ui"]||[]).push([[0],{357:function(e,t,n){var r;self,r=function(e,t){return function(){var n={"./node_modules/@babel/runtime/helpers/assertThisInitialized.js":function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},"./node_modules/@babel/runtime/helpers/asyncToGenerator.js":function(e){function t(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,a){var o=e.apply(n,r);function s(e){t(o,i,a,s,c,"next",e)}function c(e){t(o,i,a,s,c,"throw",e)}s(void 0)}))}}},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},"./node_modules/@babel/runtime/helpers/createClass.js":function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}},"./node_modules/@babel/runtime/helpers/get.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/helpers/superPropBase.js");function i(t,n,a){return"undefined"!==typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}},i(t,n,a||t)}e.exports=i},"./node_modules/@babel/runtime/helpers/getPrototypeOf.js":function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t},"./node_modules/@babel/runtime/helpers/inherits.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/helpers/setPrototypeOf.js");e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/helpers/typeof.js"),i=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js");e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?i(e):t}},"./node_modules/@babel/runtime/helpers/setPrototypeOf.js":function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t},"./node_modules/@babel/runtime/helpers/superPropBase.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js");e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},"./node_modules/@babel/runtime/helpers/typeof.js":function(e){function t(n){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t},"./node_modules/@babel/runtime/regenerator/index.js":function(e,t,n){e.exports=n("./node_modules/regenerator-runtime/runtime.js")},"./node_modules/add-zero/index.js":function(e,t,n){var r;!function(t){"use strict";function i(e,t){t=t||2;var n,r=Number(e)<0,i=e.toString();return r&&(i=i.slice(1)),n=t-i.length+1,(r?"-":"")+(i=new Array(n).join("0").concat(i))}void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}(this)},"./src/js/controls/animation-display.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(n("./node_modules/@babel/runtime/helpers/createClass.js")),o=r(n("./node_modules/@babel/runtime/helpers/get.js")),s=r(n("./node_modules/@babel/runtime/helpers/inherits.js")),c=r(n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(n("video.js"));function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var p=u.default.getComponent("Component"),h=function(e){(0,s.default)(n,e);var t=d(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,a.default)(n,[{key:"createEl",value:function(){var e=u.default.dom.createEl("img"),t=(0,o.default)((0,l.default)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-animation-display",dir:"ltr"});return t.appendChild(e),t}}]),n}(p);p.registerComponent("AnimationDisplay",h);var f=h;t.default=f,e.exports=t.default},"./src/js/controls/camera-button.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(n("./node_modules/@babel/runtime/helpers/createClass.js")),o=r(n("./node_modules/@babel/runtime/helpers/get.js")),s=r(n("./node_modules/@babel/runtime/helpers/inherits.js")),c=r(n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(n("video.js")),d=r(n("./src/js/event.js"));function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var h=u.default.getComponent("Button"),f=u.default.getComponent("Component"),b=function(e){(0,s.default)(n,e);var t=p(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,a.default)(n,[{key:"buildCSSClass",value:function(){return"vjs-camera-button vjs-control vjs-button vjs-icon-photo-camera"}},{key:"enable",value:function(){(0,o.default)((0,l.default)(n.prototype),"enable",this).call(this),this.on(this.player_,d.default.START_RECORD,this.onStart),this.on(this.player_,d.default.STOP_RECORD,this.onStop)}},{key:"disable",value:function(){(0,o.default)((0,l.default)(n.prototype),"disable",this).call(this),this.off(this.player_,d.default.START_RECORD,this.onStart),this.off(this.player_,d.default.STOP_RECORD,this.onStop)}},{key:"show",value:function(){this.layoutExclude&&!0===this.layoutExclude||(0,o.default)((0,l.default)(n.prototype),"show",this).call(this)}},{key:"handleClick",value:function(e){var t=this.player_.record();t.isProcessing()?(t.retrySnapshot(),this.onStop(),this.player_.trigger(d.default.RETRY)):t.start()}},{key:"onStart",value:function(e){this.removeClass("vjs-icon-photo-camera"),this.addClass("vjs-icon-replay"),this.controlText("Retry")}},{key:"onStop",value:function(e){this.removeClass("vjs-icon-replay"),this.addClass("vjs-icon-photo-camera"),this.controlText("Image")}}]),n}(h);b.prototype.controlText_="Image",f.registerComponent("CameraButton",b);var j=b;t.default=j,e.exports=t.default},"./src/js/controls/device-button.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(n("./node_modules/@babel/runtime/helpers/createClass.js")),o=r(n("./node_modules/@babel/runtime/helpers/get.js")),s=r(n("./node_modules/@babel/runtime/helpers/inherits.js")),c=r(n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(n("video.js"));function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var p=u.default.getComponent("Button"),h=u.default.getComponent("Component"),f=function(e){(0,s.default)(n,e);var t=d(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,a.default)(n,[{key:"handleClick",value:function(e){this.player_.record().getDevice()}},{key:"show",value:function(){this.layoutExclude&&!0===this.layoutExclude||(0,o.default)((0,l.default)(n.prototype),"show",this).call(this)}}]),n}(p);f.prototype.controlText_="Device",h.registerComponent("DeviceButton",f);var b=f;t.default=b,e.exports=t.default},"./src/js/controls/picture-in-picture-toggle.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("./node_modules/@babel/runtime/regenerator/index.js")),a=r(n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),o=r(n("./node_modules/@babel/runtime/helpers/classCallCheck.js")),s=r(n("./node_modules/@babel/runtime/helpers/createClass.js")),c=r(n("./node_modules/@babel/runtime/helpers/get.js")),l=r(n("./node_modules/@babel/runtime/helpers/inherits.js")),u=r(n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=r(n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=r(n("video.js")),h=r(n("./src/js/event.js"));function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var b=p.default.getComponent("Button"),j=p.default.getComponent("Component"),m=function(e){(0,l.default)(n,e);var t=f(n);function n(e,r){var i;return(0,o.default)(this,n),(i=t.call(this,e,r)).on(i.player_,h.default.ENTER_PIP,i.onStart),i.on(i.player_,h.default.LEAVE_PIP,i.onStop),i}return(0,s.default)(n,[{key:"buildCSSClass",value:function(){return"vjs-pip-button vjs-control vjs-button vjs-icon-picture-in-picture-start"}},{key:"show",value:function(){this.layoutExclude&&!0===this.layoutExclude||(0,c.default)((0,d.default)(n.prototype),"show",this).call(this)}},{key:"handleClick",value:function(){var e=(0,a.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.player_.record(),this.disable(),e.prev=2,n.mediaElement===document.pictureInPictureElement){e.next=8;break}return e.next=6,n.mediaElement.requestPictureInPicture();case 6:e.next=10;break;case 8:return e.next=10,document.exitPictureInPicture();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),this.player_.trigger(h.default.ERROR,e.t0);case 15:return e.prev=15,this.enable(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onStart",value:function(e){this.removeClass("vjs-icon-picture-in-picture-start"),this.addClass("vjs-icon-picture-in-picture-stop")}},{key:"onStop",value:function(e){this.removeClass("vjs-icon-picture-in-picture-stop"),this.addClass("vjs-icon-picture-in-picture-start")}}]),n}(b);m.prototype.controlText_="Picture in Picture",j.registerComponent("PictureInPictureToggle",m);var v=m;t.default=v,e.exports=t.default},"./src/js/controls/record-canvas.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(n("./node_modules/@babel/runtime/helpers/createClass.js")),o=r(n("./node_modules/@babel/runtime/helpers/get.js")),s=r(n("./node_modules/@babel/runtime/helpers/inherits.js")),c=r(n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(n("video.js"));function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var p=u.default.getComponent("Component"),h=function(e){(0,s.default)(n,e);var t=d(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,a.default)(n,[{key:"createEl",value:function(){var e=u.default.dom.createEl("canvas"),t=(0,o.default)((0,l.default)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-record-canvas",dir:"ltr"});return t.appendChild(e),t}}]),n}(p);p.registerComponent("RecordCanvas",h);var f=h;t.default=f,e.exports=t.default},"./src/js/controls/record-indicator.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(n("./node_modules/@babel/runtime/helpers/createClass.js")),o=r(n("./node_modules/@babel/runtime/helpers/get.js")),s=r(n("./node_modules/@babel/runtime/helpers/inherits.js")),c=r(n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(n("video.js")),d=r(n("./src/js/event.js"));function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var h=u.default.getComponent("Component"),f=function(e){(0,s.default)(n,e);var t=p(n);function n(e,r){var a;return(0,i.default)(this,n),(a=t.call(this,e,r)).enable(),a}return(0,a.default)(n,[{key:"createEl",value:function(){var e={"data-label":this.localize("REC")};return(0,o.default)((0,l.default)(n.prototype),"createEl",this).call(this,"div",{className:"vjs-record-indicator vjs-control",dir:"ltr"},e)}},{key:"enable",value:function(){this.on(this.player_,d.default.START_RECORD,this.show),this.on(this.player_,d.default.STOP_RECORD,this.hide)}},{key:"disable",value:function(){this.off(this.player_,d.default.START_RECORD,this.show),this.off(this.player_,d.default.STOP_RECORD,this.hide)}},{key:"show",value:function(){this.layoutExclude&&!0===this.layoutExclude||(0,o.default)((0,l.default)(n.prototype),"show",this).call(this)}}]),n}(h);h.registerComponent("RecordIndicator",f);var b=f;t.default=b,e.exports=t.default},"./src/js/controls/record-toggle.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(n("./node_modules/@babel/runtime/helpers/createClass.js")),o=r(n("./node_modules/@babel/runtime/helpers/get.js")),s=r(n("./node_modules/@babel/runtime/helpers/inherits.js")),c=r(n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(n("video.js")),d=r(n("./src/js/event.js"));function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var h=u.default.getComponent("Button"),f=u.default.getComponent("Component"),b=function(e){(0,s.default)(n,e);var t=p(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,a.default)(n,[{key:"buildCSSClass",value:function(){return"vjs-record-button vjs-control vjs-button vjs-icon-record-start"}},{key:"enable",value:function(){(0,o.default)((0,l.default)(n.prototype),"enable",this).call(this),this.on(this.player_,d.default.START_RECORD,this.onStart),this.on(this.player_,d.default.STOP_RECORD,this.onStop)}},{key:"disable",value:function(){(0,o.default)((0,l.default)(n.prototype),"disable",this).call(this),this.off(this.player_,d.default.START_RECORD,this.onStart),this.off(this.player_,d.default.STOP_RECORD,this.onStop)}},{key:"show",value:function(){this.layoutExclude&&!0===this.layoutExclude||(0,o.default)((0,l.default)(n.prototype),"show",this).call(this)}},{key:"handleClick",value:function(e){var t=this.player_.record();t.isRecording()?t.stop():t.start()}},{key:"onStart",value:function(e){this.removeClass("vjs-icon-record-start"),this.addClass("vjs-icon-record-stop"),this.controlText("Stop")}},{key:"onStop",value:function(e){this.removeClass("vjs-icon-record-stop"),this.addClass("vjs-icon-record-start"),this.controlText("Record")}}]),n}(h);b.prototype.controlText_="Record",f.registerComponent("RecordToggle",b);var j=b;t.default=j,e.exports=t.default},"./src/js/defaults.js":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={image:!1,audio:!1,video:!1,animation:!1,screen:!1,maxLength:10,maxFileSize:0,displayMilliseconds:!1,formatTime:void 0,frameWidth:320,frameHeight:240,debug:!1,pip:!1,autoMuteDevice:!1,videoBitRate:1200,videoEngine:"recordrtc",videoFrameRate:30,videoMimeType:"video/webm",videoRecorderType:"auto",videoWorkerURL:"",videoWebAssemblyURL:"",audioEngine:"recordrtc",audioRecorderType:"auto",audioMimeType:"auto",audioBufferSize:4096,audioSampleRate:44100,audioBitRate:128,audioChannels:2,audioWorkerURL:"",audioWebAssemblyURL:"",audioBufferUpdate:!1,animationFrameRate:200,animationQuality:10,imageOutputType:"dataURL",imageOutputFormat:"image/png",imageOutputQuality:.92,timeSlice:0,convertEngine:"",convertWorkerURL:"",convertOptions:[],convertAuto:!0,hotKeys:!1,pluginLibraryOptions:{}};t.default=n,e.exports=t.default},"./src/js/engine/convert-engine.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.FFMPEGWASM=t.FFMPEGJS=t.TSEBML=t.CONVERT_PLUGINS=t.ConvertEngine=void 0;var i=r(n("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(n("./node_modules/@babel/runtime/helpers/createClass.js")),o=r(n("./node_modules/@babel/runtime/helpers/inherits.js")),s=r(n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=r(n("video.js")),u=n("./src/js/utils/file-util.js");function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var p=l.default.getComponent("Component"),h="ts-ebml";t.TSEBML=h;var f="ffmpeg.js";t.FFMPEGJS=f;var b="ffmpeg.wasm";t.FFMPEGWASM=b;var j=[h,f,b];t.CONVERT_PLUGINS=j;var m=function(e){(0,o.default)(n,e);var t=d(n);function n(e,r){return(0,i.default)(this,n),r.evented=!0,t.call(this,e,r)}return(0,a.default)(n,[{key:"setup",value:function(e,t){this.mediaType=e,this.debug=t}},{key:"loadBlob",value:function(e){return(0,u.blobToArrayBuffer)(e)}},{key:"addFileInfo",value:function(e,t){(0,u.addFileInfo)(e,t)}},{key:"saveAs",value:function(e){var t=e[Object.keys(e)[0]];(0,u.downloadBlob)(t,this.player().convertedData)}}]),n}(p);t.ConvertEngine=m,l.default.ConvertEngine=m,p.registerComponent("ConvertEngine",m)},"./src/js/engine/engine-loader.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.getConvertEngine=t.getVideoEngine=t.isAudioPluginActive=t.getAudioEngine=void 0;var i=r(n("video.js")),a=r(n("./src/js/engine/record-rtc.js")),o=n("./src/js/engine/convert-engine.js"),s=n("./src/js/engine/record-engine.js");t.getAudioEngine=function(e){var t;switch(e){case s.RECORDRTC:t=a.default;break;case s.LIBVORBISJS:t=i.default.LibVorbisEngine;break;case s.RECORDERJS:t=i.default.RecorderjsEngine;break;case s.LAMEJS:t=i.default.LamejsEngine;break;case s.OPUSRECORDER:t=i.default.OpusRecorderEngine;break;case s.OPUSMEDIARECORDER:t=i.default.OpusMediaRecorderEngine;break;case s.VMSG:t=i.default.VmsgEngine;break;default:throw new Error("Unknown audioEngine: "+e)}return t},t.getVideoEngine=function(e){var t;switch(e){case s.RECORDRTC:t=a.default;break;case s.WEBMWASM:t=i.default.WebmWasmEngine;break;default:throw new Error("Unknown videoEngine: "+e)}return t},t.isAudioPluginActive=function(e){return s.AUDIO_PLUGINS.indexOf(e)>-1},t.getConvertEngine=function(e){var t;switch(e){case"":break;case o.TSEBML:t=i.default.TsEBMLEngine;break;case o.FFMPEGJS:t=i.default.FFmpegjsEngine;break;case o.FFMPEGWASM:t=i.default.FFmpegWasmEngine;break;default:throw new Error("Unknown convertEngine: "+e)}return t}},"./src/js/engine/record-engine.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.WEBMWASM=t.VMSG=t.OPUSMEDIARECORDER=t.OPUSRECORDER=t.LAMEJS=t.RECORDERJS=t.LIBVORBISJS=t.RECORDRTC=t.VIDEO_PLUGINS=t.AUDIO_PLUGINS=t.RECORD_PLUGINS=t.RecordEngine=void 0;var i=r(n("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(n("./node_modules/@babel/runtime/helpers/createClass.js")),o=r(n("./node_modules/@babel/runtime/helpers/inherits.js")),s=r(n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=r(n("video.js")),u=r(n("./src/js/event.js")),d=n("./src/js/utils/file-util.js");function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var h=l.default.getComponent("Component");t.RECORDRTC="recordrtc";var f="libvorbis.js";t.LIBVORBISJS=f;var b="recorder.js";t.RECORDERJS=b;var j="lamejs";t.LAMEJS=j;var m="opus-recorder";t.OPUSRECORDER=m;var v="opus-media-recorder";t.OPUSMEDIARECORDER=v;var g="vmsg";t.VMSG=g;var O="webm-wasm";t.WEBMWASM=O;var x=[f,b,j,m,v,g];t.AUDIO_PLUGINS=x;var y=[O];t.VIDEO_PLUGINS=y;var A=x.concat(y);t.RECORD_PLUGINS=A;var w=function(e){(0,o.default)(n,e);var t=p(n);function n(e,r){return(0,i.default)(this,n),r.evented=!0,t.call(this,e,r)}return(0,a.default)(n,[{key:"dispose",value:function(){void 0!==this.recordedData&&URL.revokeObjectURL(this.recordedData)}},{key:"destroy",value:function(){}},{key:"addFileInfo",value:function(e){(0,d.addFileInfo)(e)}},{key:"onStopRecording",value:function(e){this.recordedData=e,this.addFileInfo(this.recordedData),this.dispose(),this.trigger(u.default.RECORD_COMPLETE)}},{key:"saveAs",value:function(e){var t=e[Object.keys(e)[0]];(0,d.downloadBlob)(t,this.recordedData)}}]),n}(h);t.RecordEngine=w,l.default.RecordEngine=w,h.registerComponent("RecordEngine",w)},"./src/js/engine/record-mode.js":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AUDIO_SCREEN=t.SCREEN_ONLY=t.ANIMATION=t.AUDIO_VIDEO=t.VIDEO_ONLY=t.AUDIO_ONLY=t.IMAGE_ONLY=t.getRecorderMode=void 0;var n="image_only";t.IMAGE_ONLY=n;var r="audio_only";t.AUDIO_ONLY=r;var i="video_only";t.VIDEO_ONLY=i;var a="audio_video";t.AUDIO_VIDEO=a;var o="audio_screen";t.AUDIO_SCREEN=o;var s="animation";t.ANIMATION=s;var c="screen_only";t.SCREEN_ONLY=c,t.getRecorderMode=function(e,t,u,d,p){return l(e)?n:l(d)?s:l(t)&&l(u)?a:l(t)&&l(p)?o:!l(t)&&l(p)?c:l(t)&&!l(u)?r:!l(t)&&l(u)?i:void 0};var l=function(e){return e===Object(e)||!0===e}},"./src/js/engine/record-rtc.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(n("./node_modules/@babel/runtime/helpers/createClass.js")),o=r(n("./node_modules/@babel/runtime/helpers/get.js")),s=r(n("./node_modules/@babel/runtime/helpers/inherits.js")),c=r(n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(n("video.js")),d=r(n("recordrtc")),p=r(n("./src/js/event.js")),h=n("./src/js/engine/record-engine.js"),f=(n("./src/js/utils/detect-browser.js"),n("./src/js/engine/record-mode.js"));function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var j=u.default.getComponent("Component"),m=function(e){(0,s.default)(n,e);var t=b(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,a.default)(n,[{key:"setup",value:function(e,t,n){this.inputStream=e,this.mediaType=t,this.debug=n,"screen"in this.mediaType&&(this.mediaType.video=!0),void 0!==this.recorderType&&(this.mediaType.video=this.recorderType),this.engine=new d.default.MRecordRTC,this.engine.mediaType=this.mediaType,this.engine.disableLogs=!this.debug,this.engine.mimeType=this.mimeType,this.engine.bufferSize=this.bufferSize,this.engine.sampleRate=this.sampleRate,this.engine.numberOfAudioChannels=this.audioChannels,this.engine.video=this.video,this.engine.canvas=this.canvas,this.engine.bitrate=this.bitRate,this.engine.quality=this.quality,this.engine.frameRate=this.frameRate,void 0!==this.timeSlice&&(this.engine.timeSlice=this.timeSlice,this.engine.onTimeStamp=this.onTimeStamp.bind(this)),this.engine.workerPath=this.workerPath,this.engine.webAssemblyPath=this.videoWebAssemblyURL,this.engine.addStream(this.inputStream)}},{key:"dispose",value:function(){(0,o.default)((0,l.default)(n.prototype),"dispose",this).call(this),this.destroy()}},{key:"destroy",value:function(){this.engine&&"function"===typeof this.engine.destroy&&this.engine.destroy()}},{key:"start",value:function(){this.engine.startRecording()}},{key:"stop",value:function(){this.engine.stopRecording(this.onStopRecording.bind(this))}},{key:"pause",value:function(){this.engine.pauseRecording()}},{key:"resume",value:function(){this.engine.resumeRecording()}},{key:"saveAs",value:function(e){this.engine&&void 0!==e&&this.engine.save(e)}},{key:"onStopRecording",value:function(e,t){var n=this;URL.revokeObjectURL(e);var r=this.player().record().getRecordType();this.engine.getBlob((function(e){switch(r){case f.AUDIO_ONLY:void 0!==e.audio&&(n.recordedData=e.audio);break;case f.VIDEO_ONLY:case f.AUDIO_VIDEO:case f.AUDIO_SCREEN:case f.SCREEN_ONLY:void 0!==e.video&&(n.recordedData=e.video);break;case f.ANIMATION:void 0!==e.gif&&(n.recordedData=e.gif)}n.addFileInfo(n.recordedData),n.trigger(p.default.RECORD_COMPLETE)}))}},{key:"onTimeStamp",value:function(e,t){var n;switch(this.player().currentTimestamp=e,this.player().allTimestamps=t,this.player().record().getRecordType()){case f.AUDIO_ONLY:n=this.engine.audioRecorder;break;case f.ANIMATION:n=this.engine.gifRecorder;break;default:n=this.engine.videoRecorder}var r=!1;n&&(n=n.getInternalRecorder()),n instanceof d.default.MediaStreamRecorder===!0&&(this.player().recordedData=n.getArrayOfBlobs(),this.addFileInfo(this.player().recordedData[this.player_.recordedData.length-1]),this.maxFileSize>0&&new Blob(this.player().recordedData).size>=this.maxFileSize&&(r=!0)),this.player().trigger(p.default.TIMESTAMP),r&&this.player().record().stop()}}]),n}(h.RecordEngine);u.default.RecordRTCEngine=m,j.registerComponent("RecordRTCEngine",m);var v=m;t.default=v,e.exports=t.default},"./src/js/event.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=function e(){(0,i.default)(this,e)};a.READY="ready",a.ERROR="error",a.PLAYING="playing",a.LOADEDMETADATA="loadedmetadata",a.LOADSTART="loadstart",a.USERINACTIVE="userinactive",a.TIMEUPDATE="timeupdate",a.DURATIONCHANGE="durationchange",a.ENDED="ended",a.PAUSE="pause",a.PLAY="play",a.DEVICE_READY="deviceReady",a.DEVICE_ERROR="deviceError",a.START_RECORD="startRecord",a.STOP_RECORD="stopRecord",a.FINISH_RECORD="finishRecord",a.RECORD_COMPLETE="recordComplete",a.PROGRESS_RECORD="progressRecord",a.TIMESTAMP="timestamp",a.ENUMERATE_READY="enumerateReady",a.ENUMERATE_ERROR="enumerateError",a.AUDIO_BUFFER_UPDATE="audioBufferUpdate",a.AUDIO_OUTPUT_READY="audioOutputReady",a.START_CONVERT="startConvert",a.FINISH_CONVERT="finishConvert",a.ENTER_PIP="enterPIP",a.LEAVE_PIP="leavePIP",a.RETRY="retry",a.ENTERPICTUREINPICTURE="enterpictureinpicture",a.LEAVEPICTUREINPICTURE="leavepictureinpicture",Object.freeze(a);var o=a;t.default=o,e.exports=t.default},"./src/js/hot-keys.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("./src/js/engine/record-mode.js"),i=function(e){switch(e.which){case 88:switch(this.player_.record().getRecordType()){case r.IMAGE_ONLY:this.player_.cameraButton.trigger("click");break;default:this.player_.recordToggle.trigger("click")}break;case 80:!0===this.player_.record().pictureInPicture&&this.player_.pipToggle.trigger("click");break;case 67:this.player_.controlBar.playToggle&&this.player_.controlBar.playToggle.contentEl()&&player.controlBar.playToggle.trigger("click")}};t.default=i,e.exports=t.default},"./src/js/utils/browser-shim.js":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e};t.default=n,e.exports=t.default},"./src/js/utils/compare-version.js":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if("string"!==typeof e)return!1;if("string"!==typeof t)return!1;e=e.split("."),t=t.split(".");for(var n=Math.min(e.length,t.length),r=0;r<n;++r){if(e[r]=parseInt(e[r],10),t[r]=parseInt(t[r],10),e[r]>t[r])return 1;if(e[r]<t[r])return-1}return e.length===t.length?0:e.length<t.length?-1:1};t.default=n,e.exports=t.default},"./src/js/utils/detect-browser.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.isFirefox=t.isSafari=t.isChrome=t.isOpera=t.isEdge=t.detectBrowser=void 0;var i=r(n("./node_modules/global/window.js")),a=function(){var e={browser:null,version:null,minVersion:null};if("undefined"===typeof i.default||!i.default.navigator)return e.browser="Not a supported browser.",e;if(navigator.mozGetUserMedia)e.browser="firefox",e.version=o(navigator.userAgent,/Firefox\/(\d+)\./,1),e.minVersion=31;else if(navigator.webkitGetUserMedia)e.browser="chrome",e.version=o(navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2),e.minVersion=38;else if(navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))e.browser="edge",e.version=o(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),e.minVersion=10547;else{if(!i.default.RTCPeerConnection||!navigator.userAgent.match(/AppleWebKit\/(\d+)\./))return e.browser="Not a supported browser.",e;e.browser="safari",e.version=o(navigator.userAgent,/AppleWebKit\/(\d+)\./,1)}return e};t.detectBrowser=a;var o=function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)};t.isEdge=function(){return"edge"===a().browser},t.isSafari=function(){return"safari"===a().browser},t.isOpera=function(){return!!i.default.opera||-1!==navigator.userAgent.indexOf("OPR/")},t.isChrome=function(){return"chrome"===a().browser},t.isFirefox=function(){return"firefox"===a().browser}},"./src/js/utils/file-util.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.addFileInfo=t.blobToArrayBuffer=t.downloadBlob=void 0;var i=r(n("./src/js/utils/mime.js"));t.downloadBlob=function(e,t){if("undefined"!==typeof navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(t,e);if("undefined"!==typeof navigator.msSaveBlob)return navigator.msSaveBlob(t,e);var n=document.createElement("a");n.href=URL.createObjectURL(t),n.download=e,n.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(n),"function"===typeof n.click?n.click():(n.target="_blank",n.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),URL.revokeObjectURL(n.href)},t.blobToArrayBuffer=function(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){t(r.result)},r.onerror=function(e){n(e.error)},r.readAsArrayBuffer(e)}))},t.addFileInfo=function(e,t,n){if(e instanceof Blob||e instanceof File){void 0===t&&(t=new Date);try{e.lastModified=t.getTime(),e.lastModifiedDate=t}catch(r){if(!(r instanceof TypeError))throw r}void 0===n&&(n="."+(0,i.default)(e.type));try{e.name=t.getTime()+n}catch(r){if(!(r instanceof TypeError))throw r}}}},"./src/js/utils/format-time.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("./node_modules/parse-ms/index.js")),a=r(n("./node_modules/add-zero/index.js")),o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=e<0?0:e,(isNaN(e)||e===1/0)&&(e=0);var r=(0,i.default)(1e3*e),o=r;void 0!==t&&(o=(0,i.default)(1e3*t));var s=(0,a.default)(r.hours),c=(0,a.default)(r.minutes),l=(0,a.default)(r.seconds),u=(0,a.default)(r.milliseconds,3);if(r.days>0||o.days>0){var d=(0,a.default)(r.days);return"".concat(d,":").concat(s,":").concat(c,":").concat(l)}return r.hours>0||o.hours>0?"".concat(s,":").concat(c,":").concat(l):n?"".concat(c,":").concat(l,":").concat(u):"".concat(c,":").concat(l)};t.default=o,e.exports=t.default},"./src/js/utils/mime.js":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=/^\s*([^;\s]*)(?:;|\s|$)/,r={"video/ogg":"ogv","video/mp4":"mp4","video/x-matroska":"mkv","video/webm":"webm","audio/mp4":"m4a","audio/mpeg":"mp3","audio/aac":"aac","audio/flac":"flac","audio/ogg":"oga","audio/wav":"wav","audio/webm":"webm","application/x-mpegURL":"m3u8","image/jpeg":"jpg","image/gif":"gif","image/png":"png","image/svg+xml":"svg","image/webp":"webp"},i=function(e){var t=n.exec(e),i=t&&t[1].toLowerCase();return r[i]};t.default=i,e.exports=t.default},"./node_modules/global/window.js":function(e,t,n){var r;r="undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},e.exports=r},"./node_modules/regenerator-runtime/runtime.js":function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(e,t,n){var r=u;return function(i,a){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===u)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?h:d,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(err){return{type:"throw",arg:err}}}e.wrap=c;var u="suspendedStart",d="suspendedYield",p="executing",h="completed",f={};function b(){}function j(){}function m(){}var v={};v[a]=function(){return this};var g=Object.getPrototypeOf,O=g&&g(g(I([])));O&&O!==n&&r.call(O,a)&&(v=O);var x=m.prototype=b.prototype=Object.create(v);function y(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function A(e,t){function n(i,a,o,s){var c=l(e[i],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"===typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,w(e,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,f;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function I(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:S}}function S(){return{value:t,done:!0}}return j.prototype=x.constructor=m,m.constructor=j,m[s]=j.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===j||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},y(A.prototype),A.prototype[o]=function(){return this},e.AsyncIterator=A,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new A(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(x),x[s]="Generator",x[a]=function(){return this},x.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}},recordrtc:function(t){"use strict";t.exports=e},"video.js":function(e){"use strict";e.exports=t},"./node_modules/parse-ms/index.js":function(e,t,n){"use strict";function r(e){if("number"!==typeof e)throw new TypeError("Expected a number");var t=e>0?Math.floor:Math.ceil;return{days:t(e/864e5),hours:t(e/36e5)%24,minutes:t(e/6e4)%60,seconds:t(e/1e3)%60,milliseconds:t(e)%1e3,microseconds:t(1e3*e)%1e3,nanoseconds:t(1e6*e)%1e3}}n.r(t),n.d(t,{default:function(){return r}})}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={exports:{}};return n[e].call(a.exports,a,a.exports,i),a.exports}i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return function(){"use strict";var e=a,t=i("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(e,"__esModule",{value:!0}),e.register=function(e){var t=e||p.default||window.videojs;t.Record=B,void 0===t.getPlugin("record")&&t.registerPlugin("record",B)},e.Record=void 0;var n=t(i("./node_modules/@babel/runtime/helpers/typeof.js")),r=t(i("./node_modules/@babel/runtime/helpers/classCallCheck.js")),o=t(i("./node_modules/@babel/runtime/helpers/createClass.js")),s=t(i("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=t(i("./node_modules/@babel/runtime/helpers/get.js")),l=t(i("./node_modules/@babel/runtime/helpers/inherits.js")),u=t(i("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=t(i("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=t(i("video.js")),h=t(i("./src/js/controls/animation-display.js")),f=t(i("./src/js/controls/record-canvas.js")),b=t(i("./src/js/controls/device-button.js")),j=t(i("./src/js/controls/camera-button.js")),m=t(i("./src/js/controls/record-toggle.js")),v=t(i("./src/js/controls/record-indicator.js")),g=t(i("./src/js/controls/picture-in-picture-toggle.js")),O=t(i("./src/js/event.js")),x=t(i("./src/js/hot-keys.js")),y=t(i("./src/js/defaults.js")),A=t(i("./src/js/utils/format-time.js")),w=t(i("./src/js/utils/browser-shim.js")),E=t(i("./src/js/utils/compare-version.js")),C=i("./src/js/utils/detect-browser.js"),k=i("./src/js/engine/engine-loader.js"),I=i("./src/js/engine/record-mode.js");function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var R=p.default.getPlugin("plugin"),T=p.default.getComponent("Player"),D="auto",B=function(e){(0,l.default)(i,e);var t=S(i);function i(e,n){var a;(0,r.default)(this,i),a=t.call(this,e,n),T.prototype.play=function(){var e=this.techGet_("play");return void 0!==e&&"function"===typeof e.then&&e.then(null,(function(e){})),e},e.addClass("vjs-record"),a.loadOptions(),a.resetState(),n.formatTime&&"function"===typeof n.formatTime?a.setFormatTime(n.formatTime):a.setFormatTime((function(e,t){return(0,A.default)(e,t,a.displayMilliseconds)}));var o="av-perm";switch(a.getRecordType()){case I.IMAGE_ONLY:case I.VIDEO_ONLY:case I.ANIMATION:o="video-perm";break;case I.AUDIO_ONLY:o="audio-perm";break;case I.SCREEN_ONLY:o="screen-perm";break;case I.AUDIO_SCREEN:o="sv-perm"}b.default.prototype.buildCSSClass=function(){return"vjs-record vjs-device-button vjs-control vjs-icon-"+o},e.deviceButton=new b.default(e,n),e.addChild(e.deviceButton),e.recordIndicator=new v.default(e,n),e.recordIndicator.hide(),e.addChild(e.recordIndicator),e.recordCanvas=new f.default(e,n),e.recordCanvas.hide(),e.addChild(e.recordCanvas),e.animationDisplay=new h.default(e,n),e.animationDisplay.hide(),e.addChild(e.animationDisplay),e.cameraButton=new j.default(e,n),e.cameraButton.hide(),e.recordToggle=new m.default(e,n),e.recordToggle.hide();var c=void 0===p.default.VERSION||-1===(0,E.default)(p.default.VERSION,"7.6.0");if("pictureInPictureEnabled"in document||(a.pictureInPicture=!1),!0===a.pictureInPicture&&(c&&(e.pipToggle=new g.default(e,n),e.pipToggle.hide()),a.onEnterPiPHandler=a.onEnterPiP.bind((0,s.default)(a)),a.onLeavePiPHandler=a.onLeavePiP.bind((0,s.default)(a))),a.player.options_.controlBar){var l=["deviceButton","recordIndicator","cameraButton","recordToggle"];e.pipToggle&&l.push("pipToggle"),l.forEach((function(e){void 0!==a.player.options_.controlBar[e]&&(a.player[e].layoutExclude=!0,a.player[e].hide())}))}return a.player.one(O.default.READY,a.setupUI.bind((0,s.default)(a))),a}return(0,o.default)(i,[{key:"loadOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=p.default.mergeOptions(y.default,this.player.options_.plugins.record,e);this.recordImage=t.image,this.recordAudio=t.audio,this.recordVideo=t.video,this.recordAnimation=t.animation,this.recordScreen=t.screen,this.maxLength=t.maxLength,this.maxFileSize=t.maxFileSize,this.displayMilliseconds=t.displayMilliseconds,this.debug=t.debug,this.pictureInPicture=t.pip,this.recordTimeSlice=t.timeSlice,this.autoMuteDevice=t.autoMuteDevice,this.pluginLibraryOptions=t.pluginLibraryOptions,this.videoFrameWidth=t.frameWidth,this.videoFrameHeight=t.frameHeight,this.videoFrameRate=t.videoFrameRate,this.videoBitRate=t.videoBitRate,this.videoEngine=t.videoEngine,this.videoRecorderType=t.videoRecorderType,this.videoMimeType=t.videoMimeType,this.videoWorkerURL=t.videoWorkerURL,this.videoWebAssemblyURL=t.videoWebAssemblyURL,this.convertEngine=t.convertEngine,this.convertAuto=t.convertAuto,this.convertWorkerURL=t.convertWorkerURL,this.convertOptions=t.convertOptions,this.audioEngine=t.audioEngine,this.audioRecorderType=t.audioRecorderType,this.audioWorkerURL=t.audioWorkerURL,this.audioWebAssemblyURL=t.audioWebAssemblyURL,this.audioBufferSize=t.audioBufferSize,this.audioSampleRate=t.audioSampleRate,this.audioBitRate=t.audioBitRate,this.audioChannels=t.audioChannels,this.audioMimeType=t.audioMimeType,this.audioBufferUpdate=t.audioBufferUpdate,this.imageOutputType=t.imageOutputType,this.imageOutputFormat=t.imageOutputFormat,this.imageOutputQuality=t.imageOutputQuality,this.animationFrameRate=t.animationFrameRate,this.animationQuality=t.animationQuality}},{key:"setupUI",value:function(){var e=this;switch(this.player.controlBar.addChild(this.player.cameraButton),this.player.controlBar.el().insertBefore(this.player.cameraButton.el(),this.player.controlBar.el().firstChild),this.player.controlBar.el().insertBefore(this.player.recordToggle.el(),this.player.controlBar.el().firstChild),!0===this.pictureInPicture?void 0===this.player.controlBar.pictureInPictureToggle&&void 0!==this.player.pipToggle?this.player.controlBar.addChild(this.player.pipToggle):void 0!==this.player.controlBar.pictureInPictureToggle&&(this.player.pipToggle=this.player.controlBar.pictureInPictureToggle,this.player.pipToggle.hide()):!1===this.pictureInPicture&&void 0!==this.player.controlBar.pictureInPictureToggle&&this.player.controlBar.pictureInPictureToggle.hide(),void 0!==this.player.controlBar.remainingTimeDisplay&&(this.player.controlBar.remainingTimeDisplay.el().style.display="none"),void 0!==this.player.controlBar.liveDisplay&&(this.player.controlBar.liveDisplay.el().style.display="none"),this.player.loop(!1),this.getRecordType()){case I.AUDIO_ONLY:this.surfer=this.player.wavesurfer(),this.surfer.setFormatTime(this._formatTime);break;case I.IMAGE_ONLY:case I.VIDEO_ONLY:case I.AUDIO_VIDEO:case I.ANIMATION:case I.SCREEN_ONLY:case I.AUDIO_SCREEN:void 0!==this.player.bigPlayButton&&this.player.bigPlayButton.hide(),this.player.one(O.default.LOADEDMETADATA,(function(){e.setDuration(e.maxLength)})),this.player.one(O.default.LOADSTART,(function(){e.setDuration(e.maxLength)})),!0===this.player.usingNativeControls_&&void 0!==this.player.tech_.el_&&(this.player.tech_.el_.controls=!1),this.player.removeTechControlsListeners_(),this.player.options_.controls&&(void 0!==this.player.controlBar.progressControl&&this.player.controlBar.progressControl.hide(),this.player.on(O.default.USERINACTIVE,(function(t){e.player.userActive(!0)})),this.player.controlBar.show(),this.player.controlBar.el().style.display="flex")}if(this.player.off(O.default.TIMEUPDATE),this.player.off(O.default.DURATIONCHANGE),this.player.off(O.default.LOADEDMETADATA),this.player.off(O.default.LOADSTART),this.player.off(O.default.ENDED),this.setDuration(this.maxLength),this.player.options_.plugins.record&&this.player.options_.plugins.record.hotKeys&&!1!==this.player.options_.plugins.record.hotKeys){var t=this.player.options_.plugins.record.hotKeys;!0===t&&(t=x.default),this.player.options_.userActions={hotkeys:t}}void 0!==this.player.controlBar.playToggle&&this.player.controlBar.playToggle.hide()}},{key:"isRecording",value:function(){return this._recording}},{key:"isProcessing",value:function(){return this._processing}},{key:"isDestroyed",value:function(){var e=null===this.player;return!1===e&&(e=null===this.player.children()),e}},{key:"getDevice",value:function(){var e=this;if(void 0===this.deviceReadyCallback&&(this.deviceReadyCallback=this.onDeviceReady.bind(this)),void 0===this.deviceErrorCallback&&(this.deviceErrorCallback=this.onDeviceError.bind(this)),void 0===this.engineStopCallback&&(this.engineStopCallback=this.onRecordComplete.bind(this)),void 0===this.streamVisibleCallback&&(this.streamVisibleCallback=this.onStreamVisible.bind(this)),this.getRecordType()===I.SCREEN_ONLY||this.getRecordType()===I.AUDIO_SCREEN){if(void 0===navigator.mediaDevices||void 0===navigator.mediaDevices.getDisplayMedia)return void this.player.trigger(O.default.ERROR,"This browser does not support navigator.mediaDevices.getDisplayMedia")}else if(void 0===navigator.mediaDevices||void 0===navigator.mediaDevices.getUserMedia)return void this.player.trigger(O.default.ERROR,"This browser does not support navigator.mediaDevices.getUserMedia");switch(this.getRecordType()){case I.AUDIO_ONLY:this.mediaType={audio:this.audioRecorderType===D||this.audioRecorderType,video:!1},this.surfer.surfer.microphone.un(O.default.DEVICE_READY,this.deviceReadyCallback),this.surfer.surfer.microphone.un(O.default.DEVICE_ERROR,this.deviceErrorCallback),this.surfer.surfer.microphone.on(O.default.DEVICE_READY,this.deviceReadyCallback),this.surfer.surfer.microphone.on(O.default.DEVICE_ERROR,this.deviceErrorCallback),this.surfer.setupPlaybackEvents(!1),this.surfer.liveMode=!0,this.surfer.surfer.microphone.paused=!1,"suspended"===this.surfer.surfer.backend.ac.state&&this.surfer.surfer.backend.ac.resume(),!0===this.audioBufferUpdate&&(this.surfer.surfer.microphone.reloadBufferFunction=function(t){e.surfer.surfer.microphone.paused||(e.surfer.surfer.empty(),e.surfer.surfer.loadDecodedBuffer(t.inputBuffer),e.player.recordedData=t.inputBuffer,e.player.trigger(O.default.AUDIO_BUFFER_UPDATE))}),this.surfer.surfer.microphone.start();break;case I.IMAGE_ONLY:case I.VIDEO_ONLY:this.getRecordType()===I.IMAGE_ONLY&&this.player.el().firstChild.addEventListener(O.default.PLAYING,this.streamVisibleCallback),this.mediaType={audio:!1,video:this.videoRecorderType===D||this.videoRecorderType},navigator.mediaDevices.getUserMedia({audio:!1,video:this.getRecordType()===I.IMAGE_ONLY?this.recordImage:this.recordVideo}).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this));break;case I.AUDIO_SCREEN:this.mediaType={audio:this.audioRecorderType===D||this.audioRecorderType,video:this.videoRecorderType===D||this.videoRecorderType};var t={};!0===this.recordScreen?t={video:!0}:"object"===(0,n.default)(this.recordScreen)&&this.recordScreen.constructor===Object&&(t=this.recordScreen),navigator.mediaDevices.getDisplayMedia(t).then((function(t){navigator.mediaDevices.getUserMedia({audio:e.recordAudio}).then((function(n){t.addTrack(n.getTracks()[0]),e.onDeviceReady.bind(e)(t)})).catch((function(n){t.active&&t.stop(),e.onDeviceError(n)}))})).catch(this.onDeviceError.bind(this));break;case I.AUDIO_VIDEO:this.mediaType={audio:this.audioRecorderType===D||this.audioRecorderType,video:this.videoRecorderType===D||this.videoRecorderType},navigator.mediaDevices.getUserMedia({audio:this.recordAudio,video:this.recordVideo}).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this));break;case I.ANIMATION:this.mediaType={audio:!1,video:!1,gif:!0},navigator.mediaDevices.getUserMedia({audio:!1,video:this.recordAnimation}).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this));break;case I.SCREEN_ONLY:this.mediaType={audio:!1,video:!1,screen:!0,gif:!1};var r={};!0===this.recordScreen?r={video:!0}:"object"===(0,n.default)(this.recordScreen)&&this.recordScreen.constructor===Object&&(r=this.recordScreen),navigator.mediaDevices.getDisplayMedia(r).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this))}}},{key:"onDeviceReady",value:function(e){var t=this;if(this._deviceActive=!0,void 0!==this.stream&&this.stream.active&&this.stream.stop(),this.stream=e,this.player.deviceButton.hide(),this.setDuration(this.maxLength),this.setCurrentTime(0),void 0!==this.player.controlBar.playToggle&&this.player.controlBar.playToggle.hide(),this.off(this.player,O.default.TIMEUPDATE,this.playbackTimeUpdate),this.off(this.player,O.default.ENDED,this.playbackTimeUpdate),this.getRecordType()!==I.IMAGE_ONLY){if(this.getRecordType()!==I.AUDIO_ONLY&&(0,k.isAudioPluginActive)(this.audioEngine))throw new Error("Currently "+this.audioEngine+" is only supported in audio-only mode.");var n,r;switch(this.getRecordType()){case I.AUDIO_ONLY:n=(0,k.getAudioEngine)(this.audioEngine),r=this.audioEngine;break;default:n=(0,k.getVideoEngine)(this.videoEngine),r=this.videoEngine}try{this.engine=new n(this.player,this.player.options_)}catch(err){throw new Error("Could not load "+r+" plugin")}if(this.engine.on(O.default.RECORD_COMPLETE,this.engineStopCallback),this.engine.bufferSize=this.audioBufferSize,this.engine.sampleRate=this.audioSampleRate,this.engine.bitRate=this.audioBitRate,this.engine.audioChannels=this.audioChannels,this.engine.audioWorkerURL=this.audioWorkerURL,this.engine.audioWebAssemblyURL=this.audioWebAssemblyURL,this.engine.mimeType={video:this.videoMimeType,gif:"image/gif"},null!==this.audioMimeType&&this.audioMimeType!==D&&(this.engine.mimeType.audio=this.audioMimeType),this.engine.videoWorkerURL=this.videoWorkerURL,this.engine.videoWebAssemblyURL=this.videoWebAssemblyURL,this.engine.videoBitRate=this.videoBitRate,this.engine.videoFrameRate=this.videoFrameRate,this.engine.video={width:this.videoFrameWidth,height:this.videoFrameHeight},this.engine.canvas={width:this.videoFrameWidth,height:this.videoFrameHeight},this.engine.quality=this.animationQuality,this.engine.frameRate=this.animationFrameRate,this.recordTimeSlice&&this.recordTimeSlice>0&&(this.engine.timeSlice=this.recordTimeSlice,this.engine.maxFileSize=this.maxFileSize),this.engine.pluginLibraryOptions=this.pluginLibraryOptions,this.engine.setup(this.stream,this.mediaType,this.debug),""!==this.convertEngine){var i=(0,k.getConvertEngine)(this.convertEngine);try{this.converter=new i(this.player,this.player.options_)}catch(err){throw new Error("Could not load "+this.convertEngine+" plugin")}this.converter.convertAuto=this.convertAuto,this.converter.convertWorkerURL=this.convertWorkerURL,this.converter.convertOptions=this.convertOptions,this.converter.pluginLibraryOptions=this.pluginLibraryOptions,this.converter.setup(this.mediaType,this.debug)}["currentTimeDisplay","timeDivider","durationDisplay"].forEach((function(e){void 0!==(e=t.player.controlBar[e])&&(e.el().style.display="block",e.show())})),this.player.recordToggle.show()}else this.player.recordIndicator.disable(),this.retrySnapshot();this.getRecordType()!==I.AUDIO_ONLY?(this.mediaElement=this.player.el().firstChild,this.mediaElement.controls=!1,this.mediaElement.muted=!0,this.displayVolumeControl(!1),!0===this.pictureInPicture&&(this.player.pipToggle.show(),this.mediaElement.removeEventListener(O.default.ENTERPICTUREINPICTURE,this.onEnterPiPHandler),this.mediaElement.removeEventListener(O.default.LEAVEPICTUREINPICTURE,this.onLeavePiPHandler),this.mediaElement.addEventListener(O.default.ENTERPICTUREINPICTURE,this.onEnterPiPHandler),this.mediaElement.addEventListener(O.default.LEAVEPICTUREINPICTURE,this.onLeavePiPHandler)),this.load(this.stream),this.player.one(O.default.LOADEDMETADATA,(function(){t.mediaElement.play(),t.player.trigger(O.default.DEVICE_READY)}))):this.player.trigger(O.default.DEVICE_READY)}},{key:"onDeviceError",value:function(e){this._deviceActive=!1,this.isDestroyed()||(this.player.deviceErrorCode=e,this.player.trigger(O.default.DEVICE_ERROR))}},{key:"start",value:function(){var e=this;if(!this.isProcessing()){if(this.stream&&!1===this.stream.active)return void this.getDevice();switch(this._recording=!0,void 0!==this.player.controlBar.playToggle&&this.player.controlBar.playToggle.hide(),this.off(this.player,O.default.TIMEUPDATE,this.playbackTimeUpdate),this.off(this.player,O.default.ENDED,this.playbackTimeUpdate),this.getRecordType()){case I.AUDIO_ONLY:this.surfer.setupPlaybackEvents(!1),this.surfer.surfer.microphone.paused=!1,this.surfer.liveMode=!0,this.surfer.surfer.microphone.play();break;case I.VIDEO_ONLY:case I.AUDIO_VIDEO:case I.AUDIO_SCREEN:case I.SCREEN_ONLY:this.startVideoPreview();break;case I.ANIMATION:this.player.recordCanvas.hide(),this.player.animationDisplay.hide(),this.mediaElement.style.display="block",this.captureFrame().then((function(t){e.startVideoPreview()}))}switch(this.autoMuteDevice&&this.muteTracks(!1),this.getRecordType()){case I.IMAGE_ONLY:this.createSnapshot(),this.player.trigger(O.default.START_RECORD);break;case I.VIDEO_ONLY:case I.AUDIO_VIDEO:case I.AUDIO_SCREEN:case I.ANIMATION:case I.SCREEN_ONLY:this.player.one(O.default.LOADEDMETADATA,(function(){e.startRecording()}));break;default:this.startRecording()}}}},{key:"startRecording",value:function(){this.paused=!1,this.pauseTime=this.pausedTime=0,this.startTime=performance.now(),this.countDown=this.player.setInterval(this.onCountDown.bind(this),100),void 0!==this.engine&&this.engine.dispose(),this.engine.start(),this.player.trigger(O.default.START_RECORD)}},{key:"stop",value:function(){this.isProcessing()||(this._recording=!1,this._processing=!0,this.getRecordType()!==I.IMAGE_ONLY?(this.player.trigger(O.default.STOP_RECORD),this.player.clearInterval(this.countDown),this.engine&&this.engine.stop(),this.autoMuteDevice&&this.muteTracks(!0)):this.player.recordedData&&this.player.trigger(O.default.FINISH_RECORD))}},{key:"stopDevice",value:function(){this.isRecording()?(this.player.one(O.default.FINISH_RECORD,this.stopStream.bind(this)),this.stop()):this.stopStream()}},{key:"stopStream",value:function(){if(this.stream){if(this._deviceActive=!1,this.getRecordType()===I.AUDIO_ONLY)return void this.surfer.surfer.microphone.stopDevice();this.stream.getTracks().forEach((function(e){e.stop()}))}}},{key:"pause",value:function(){this.paused||(this.pauseTime=performance.now(),this.paused=!0,this.engine.pause())}},{key:"resume",value:function(){this.paused&&(this.pausedTime+=performance.now()-this.pauseTime,this.engine.resume(),this.paused=!1)}},{key:"onRecordComplete",value:function(){var e=this;if(this.player.recordedData=this.engine.recordedData,void 0!==this.player.controlBar.playToggle&&(this.player.controlBar.playToggle.removeClass("vjs-ended"),this.player.controlBar.playToggle.show()),!0===this.convertAuto&&this.convert(),this.player.trigger(O.default.FINISH_RECORD),!this.isDestroyed())switch(this.getRecordType()){case I.AUDIO_ONLY:this.surfer.pause(),this.surfer.setupPlaybackEvents(!0),this.player.loadingSpinner.show(),this.surfer.surfer.once(O.default.READY,(function(){e._processing=!1})),this.load(this.player.recordedData);break;case I.VIDEO_ONLY:case I.AUDIO_VIDEO:case I.AUDIO_SCREEN:case I.SCREEN_ONLY:this.player.one(O.default.PAUSE,(function(){e._processing=!1,e.player.loadingSpinner.hide(),e.setDuration(e.streamDuration),e.on(e.player,O.default.TIMEUPDATE,e.playbackTimeUpdate),e.on(e.player,O.default.ENDED,e.playbackTimeUpdate),e.getRecordType()!==I.AUDIO_VIDEO&&e.getRecordType()!==I.AUDIO_SCREEN||(e.mediaElement.muted=!1,e.displayVolumeControl(!0)),e.load(e.player.recordedData)})),this.player.pause();break;case I.ANIMATION:this._processing=!1,this.player.loadingSpinner.hide(),this.setDuration(this.streamDuration),this.mediaElement.style.display="none",this.player.recordCanvas.show(),this.player.pause(),this.on(this.player,O.default.PLAY,this.showAnimation),this.on(this.player,O.default.PAUSE,this.hideAnimation)}}},{key:"onCountDown",value:function(){if(!this.paused){var e=performance.now(),t=this.maxLength,n=(e-(this.startTime+this.pausedTime))/1e3;this.streamDuration=n,n>=t&&(n=t,this.stop()),this.setDuration(t),this.setCurrentTime(n,t),this.player.trigger(O.default.PROGRESS_RECORD)}}},{key:"getCurrentTime",value:function(){var e=isNaN(this.streamCurrentTime)?0:this.streamCurrentTime;return this.getRecordType()===I.AUDIO_ONLY&&(e=this.surfer.getCurrentTime()),e}},{key:"setCurrentTime",value:function(e,t){switch(e=isNaN(e)?0:e,t=isNaN(t)?0:t,this.getRecordType()){case I.AUDIO_ONLY:this.surfer.setCurrentTime(e,t);break;case I.VIDEO_ONLY:case I.AUDIO_VIDEO:case I.AUDIO_SCREEN:case I.ANIMATION:case I.SCREEN_ONLY:this.player.controlBar.currentTimeDisplay&&this.player.controlBar.currentTimeDisplay.contentEl()&&this.player.controlBar.currentTimeDisplay.contentEl().lastChild&&(this.streamCurrentTime=Math.min(e,t),this.player.controlBar.currentTimeDisplay.formattedTime_=this.player.controlBar.currentTimeDisplay.contentEl().lastChild.textContent=this._formatTime(this.streamCurrentTime,t,this.displayMilliseconds))}}},{key:"getDuration",value:function(){return isNaN(this.streamDuration)?0:this.streamDuration}},{key:"setDuration",value:function(e){switch(e=isNaN(e)?0:e,this.getRecordType()){case I.AUDIO_ONLY:this.surfer.setDuration(e);break;case I.VIDEO_ONLY:case I.AUDIO_VIDEO:case I.AUDIO_SCREEN:case I.ANIMATION:case I.SCREEN_ONLY:this.player.controlBar.durationDisplay&&this.player.controlBar.durationDisplay.contentEl()&&this.player.controlBar.durationDisplay.contentEl().lastChild&&(this.player.controlBar.durationDisplay.formattedTime_=this.player.controlBar.durationDisplay.contentEl().lastChild.textContent=this._formatTime(e,e,this.displayMilliseconds))}}},{key:"load",value:function(e){switch(this.getRecordType()){case I.AUDIO_ONLY:this.surfer.load(e);break;case I.IMAGE_ONLY:case I.VIDEO_ONLY:case I.AUDIO_VIDEO:case I.AUDIO_SCREEN:case I.ANIMATION:case I.SCREEN_ONLY:e instanceof Blob||e instanceof File?(this.mediaElement.srcObject=null,this.mediaElement.src=URL.createObjectURL(e)):(0,w.default)(e,this.mediaElement)}}},{key:"saveAs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"record";"record"===t?this.engine&&void 0!==e&&this.engine.saveAs(e):"convert"===t&&this.converter&&void 0!==e&&this.converter.saveAs(e)}},{key:"dispose",value:function(){this.player.off(O.default.READY),this.player.off(O.default.USERINACTIVE),this.player.off(O.default.LOADEDMETADATA),this.engine&&(this.engine.dispose(),this.engine.destroy(),this.engine.off(O.default.RECORD_COMPLETE,this.engineStopCallback)),this.stop(),this.stopDevice(),this.removeRecording(),this.player.clearInterval(this.countDown),this.getRecordType()===I.AUDIO_ONLY?this.surfer&&this.surfer.destroy():this.getRecordType()===I.IMAGE_ONLY&&this.mediaElement&&this.streamVisibleCallback&&this.mediaElement.removeEventListener(O.default.PLAYING,this.streamVisibleCallback),this.resetState(),(0,c.default)((0,d.default)(i.prototype),"dispose",this).call(this)}},{key:"destroy",value:function(){this.player.dispose()}},{key:"reset",value:function(){var e=this;switch(this.engine&&(this.engine.dispose(),this.engine.off(O.default.RECORD_COMPLETE,this.engineStopCallback)),this.stop(),this.stopDevice(),this.player.clearInterval(this.countDown),this.removeRecording(),this.loadOptions(),this.resetState(),this.setDuration(this.maxLength),this.setCurrentTime(0),this.player.reset(),this.getRecordType()){case I.AUDIO_ONLY:this.surfer&&this.surfer.surfer&&this.surfer.surfer.empty();break;case I.IMAGE_ONLY:case I.ANIMATION:this.player.recordCanvas.hide(),this.player.cameraButton.hide()}void 0!==this.player.controlBar.playToggle&&this.player.controlBar.playToggle.hide(),this.player.deviceButton.show(),this.player.recordToggle.hide(),this.player.one(O.default.LOADEDMETADATA,(function(){e.setDuration(e.maxLength)}))}},{key:"resetState",value:function(){this._recording=!1,this._processing=!1,this._deviceActive=!1,this.devices=[]}},{key:"removeRecording",value:function(){this.mediaElement&&this.mediaElement.src&&!0===this.mediaElement.src.startsWith("blob:")&&(URL.revokeObjectURL(this.mediaElement.src),this.mediaElement.src="")}},{key:"exportImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.getRecordType()===I.AUDIO_ONLY)return this.surfer.surfer.exportImage(e,t,"blob");var n=this.player.recordCanvas.el().firstChild;return this.drawCanvas(n,this.mediaElement),new Promise((function(r){n.toBlob(r,e,t)}))}},{key:"muteTracks",value:function(e){(this.getRecordType()===I.AUDIO_ONLY||this.getRecordType()===I.AUDIO_SCREEN||this.getRecordType()===I.AUDIO_VIDEO)&&this.stream.getAudioTracks().length>0&&(this.stream.getAudioTracks()[0].enabled=!e),this.getRecordType()!==I.AUDIO_ONLY&&this.stream.getVideoTracks().length>0&&(this.stream.getVideoTracks()[0].enabled=!e)}},{key:"getRecordType",value:function(){return(0,I.getRecorderMode)(this.recordImage,this.recordAudio,this.recordVideo,this.recordAnimation,this.recordScreen)}},{key:"convert",value:function(){void 0!==this.converter&&this.converter.convert(this.player.recordedData)}},{key:"createSnapshot",value:function(){var e=this;this.captureFrame().then((function(t){"blob"===e.imageOutputType?t.toBlob((function(t){e.player.recordedData=t,e.displaySnapshot()})):"dataURL"===e.imageOutputType&&(e.player.recordedData=t.toDataURL(e.imageOutputFormat,e.imageOutputQuality),e.displaySnapshot())}),this.imageOutputFormat,this.imageOutputQuality)}},{key:"displaySnapshot",value:function(){this.mediaElement.style.display="none",this.player.recordCanvas.show(),this.stop()}},{key:"retrySnapshot",value:function(){this._processing=!1,this.player.recordCanvas.hide(),this.player.el().firstChild.style.display="block"}},{key:"captureFrame",value:function(){var e=this,t=(0,C.detectBrowser)(),r=this.player.recordCanvas.el().firstChild,i=this.stream.getVideoTracks()[0],a=i.getSettings();return r.width=a.width,r.height=a.height,new Promise((function(o,s){var c=a.width/a.height,l=e.player.width()/e.player.height(),u=0,d=0,p=0,h=0;if(c>=l?(u=a.height*(e.player.width()/a.width),d=e.player.width(),h=e.player.height()/2-u/2):(u=e.player.height(),d=a.width*(e.player.height()/a.height),p=e.player.width()/2-d/2),"chrome"===t.browser&&t.version>=60&&("undefined"===typeof ImageCapture?"undefined":(0,n.default)(ImageCapture))===("undefined"===typeof Function?"undefined":(0,n.default)(Function)))try{new ImageCapture(i).grabFrame().then((function(t){e.drawCanvas(r,t,d,u,p,h),o(r)})).catch((function(e){}))}catch(err){}e.drawCanvas(r,e.mediaElement,d,u,p,h),o(r)}))}},{key:"drawCanvas",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;void 0===n&&(n=e.width),void 0===r&&(r=e.height),e.getContext("2d").drawImage(t,i,a,n,r)}},{key:"startVideoPreview",value:function(){this.off(O.default.TIMEUPDATE),this.off(O.default.DURATIONCHANGE),this.off(O.default.LOADEDMETADATA),this.off(O.default.PLAY),this.mediaElement.muted=!0,this.displayVolumeControl(!1),this.removeRecording(),this.load(this.stream),this.mediaElement.play()}},{key:"showAnimation",value:function(){var e=this.player.animationDisplay.el().firstChild;e.width=this.player.width(),e.height=this.player.height(),this.player.recordCanvas.hide(),(0,w.default)(this.player.recordedData,e),this.player.animationDisplay.show()}},{key:"hideAnimation",value:function(){this.player.recordCanvas.show(),this.player.animationDisplay.hide()}},{key:"playbackTimeUpdate",value:function(){this.setCurrentTime(this.player.currentTime(),this.streamDuration)}},{key:"enumerateDevices",value:function(){var e=this;if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return this.player.enumerateErrorCode="enumerateDevices() not supported.",void this.player.trigger(O.default.ENUMERATE_ERROR);navigator.mediaDevices.enumerateDevices(this).then((function(t){e.devices=[],t.forEach((function(t){e.devices.push(t)})),e.player.trigger(O.default.ENUMERATE_READY)})).catch((function(t){e.player.enumerateErrorCode=t,e.player.trigger(O.default.ENUMERATE_ERROR)}))}},{key:"setVideoInput",value:function(e){this.recordVideo===Object(this.recordVideo)?this.recordVideo.deviceId={exact:e}:!0===this.recordVideo&&(this.recordVideo={deviceId:{exact:e}}),this.stopDevice(),this.getDevice()}},{key:"setAudioInput",value:function(e){switch(this.recordAudio===Object(this.recordAudio)?this.recordAudio.deviceId={exact:e}:!0===this.recordAudio&&(this.recordAudio={deviceId:{exact:e}}),this.getRecordType()){case I.AUDIO_ONLY:this.surfer.surfer.microphone.constraints={video:!1,audio:this.recordAudio}}this.stopDevice(),this.getDevice()}},{key:"setAudioOutput",value:function(e){var t,n=this;switch(this.getRecordType()){case I.AUDIO_ONLY:this.surfer.surfer.setSinkId(e).then((function(e){n.player.trigger(O.default.AUDIO_OUTPUT_READY)})).catch((function(e){t=e}));break;default:var r=player.tech_.el_;e?"undefined"!==typeof r.sinkId?r.setSinkId(e).then((function(e){n.player.trigger(O.default.AUDIO_OUTPUT_READY)})).catch((function(e){t=e})):t="Browser does not support audio output device selection.":t="Invalid deviceId: ".concat(e)}this.player.trigger(O.default.ERROR,t)}},{key:"setFormatTime",value:function(e){this._formatTime=e,p.default.setFormatTime(this._formatTime),this.surfer&&this.surfer.setFormatTime(this._formatTime)}},{key:"displayVolumeControl",value:function(e){void 0!==this.player.controlBar.volumePanel&&(e=!0===e?"flex":"none",this.player.controlBar.volumePanel.el().style.display=e)}},{key:"onStreamVisible",value:function(e){this.mediaElement.removeEventListener(O.default.PLAYING,this.streamVisibleCallback),this.player.cameraButton.onStop(),this.player.cameraButton.show()}},{key:"onEnterPiP",value:function(e){this.player.trigger(O.default.ENTER_PIP,e)}},{key:"onLeavePiP",value:function(e){this.player.trigger(O.default.LEAVE_PIP)}}]),i}(R);e.Record=B,B.VERSION="4.5.0",p.default.Record=B,void 0===p.default.getPlugin("record")&&p.default.registerPlugin("record",B)}(),a}()},e.exports=r(n(251),n(62))},503:function(e,t,n){},526:function(e,t,n){e.exports={mention:"MentionsStyles_mention__249_h",mentionSuggestions:"MentionsStyles_mentionSuggestions__3S9aW",mentionSuggestionsEntryContainer:"MentionsStyles_mentionSuggestionsEntryContainer__Y9gv8",mentionSuggestionsEntryContainerLeft:"MentionsStyles_mentionSuggestionsEntryContainerLeft__3rMj5",mentionSuggestionsEntryContainerRight:"MentionsStyles_mentionSuggestionsEntryContainerRight__MmoN9",mentionSuggestionsEntry:"MentionsStyles_mentionSuggestionsEntry__1z7fY",mentionSuggestionsEntryFocused:"MentionsStyles_mentionSuggestionsEntryFocused__1YE7y MentionsStyles_mentionSuggestionsEntry__1z7fY",mentionSuggestionsEntryText:"MentionsStyles_mentionSuggestionsEntryText__2oxB1",mentionSuggestionsEntryTitle:"MentionsStyles_mentionSuggestionsEntryTitle__3Tgfe",mentionSuggestionsEntryAvatar:"MentionsStyles_mentionSuggestionsEntryAvatar__181OM"}},534:function(e,t,n){var r;self,r=function(e,t){return function(){var n={"./node_modules/add-zero/index.js":function(e,t,n){var r;!function(t){"use strict";function i(e,t){t=t||2;var n,r=Number(e)<0,i=e.toString();return r&&(i=i.slice(1)),n=t-i.length+1,(r?"-":"")+(i=new Array(n).join("0").concat(i))}void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}(this)},"./src/js/defaults.js":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={debug:!1,displayMilliseconds:!0};t.default=n,e.exports=t.default},"./src/js/event.js":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};n.READY="ready",n.ERROR="error",n.VOLUMECHANGE="volumechange",n.FULLSCREENCHANGE="fullscreenchange",n.TIMEUPDATE="timeupdate",n.ENDED="ended",n.PAUSE="pause",n.FINISH="finish",n.SEEK="seek",n.REDRAW="redraw",n.AUDIOPROCESS="audioprocess",n.DEVICE_READY="deviceReady",n.DEVICE_ERROR="deviceError",n.AUDIO_OUTPUT_READY="audioOutputReady",n.WAVE_READY="waveReady",n.PLAYBACK_FINISH="playbackFinish",n.ABORT="abort",n.RESIZE="resize",Object.freeze(n);var r=n;t.default=r,e.exports=t.default},"./src/js/middleware.js":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={setSource:function(e,t){if(this.player.usingPlugin("wavesurfer")){var n=this.player.wavesurfer().surfer.params.backend,r=e.src,i=e.peaks;switch(n){case"WebAudio":this.player.wavesurfer().load(r);break;default:t(null,e);var a=this.player.tech_.el();void 0===i?this.player.wavesurfer().load(a):this.player.wavesurfer().load(a,i)}}else t(null,e)}};t.default=n,e.exports=t.default},"./src/js/utils/format-time.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("./node_modules/add-zero/index.js")),i=a(n("./node_modules/parse-ms/index.js"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=e<0?0:e,(isNaN(e)||e===1/0)&&(e=0);var a=(0,i.default)(1e3*e),o=a;void 0!==t&&(o=(0,i.default)(1e3*t));var s=(0,r.default)(a.hours),c=(0,r.default)(a.minutes),l=(0,r.default)(a.seconds),u=(0,r.default)(a.milliseconds,3);if(a.days>0||o.days>0){var d=(0,r.default)(a.days);return"".concat(d,":").concat(s,":").concat(c,":").concat(l)}return a.hours>0||o.hours>0?"".concat(s,":").concat(c,":").concat(l):n?"".concat(c,":").concat(l,":").concat(u):"".concat(c,":").concat(l)};t.default=o,e.exports=t.default},"./src/js/utils/log.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n("video.js"))&&r.__esModule?r:{default:r},a=function(e,t,n){!0===n&&("error"===t?i.default.log.error(e):"warn"===t?i.default.log.warn(e):i.default.log(e))};t.default=a,e.exports=t.default},"./node_modules/global/window.js":function(e,t,n){var r;r="undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},e.exports=r},"video.js":function(t){"use strict";t.exports=e},"wavesurfer.js":function(e){"use strict";e.exports=t},"./node_modules/parse-ms/index.js":function(e,t,n){"use strict";function r(e){if("number"!==typeof e)throw new TypeError("Expected a number");var t=e>0?Math.floor:Math.ceil;return{days:t(e/864e5),hours:t(e/36e5)%24,minutes:t(e/6e4)%60,seconds:t(e/1e3)%60,milliseconds:t(e)%1e3,microseconds:t(1e3*e)%1e3,nanoseconds:t(1e6*e)%1e3}}n.r(t),n.d(t,{default:function(){return r}})}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={exports:{}};return n[e].call(a.exports,a,a.exports,i),a.exports}i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return function(){"use strict";var e=a;function t(e){return(t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.register=function(e){var t=e||u.default||l.default.videojs;u.default.Wavesurfer=w,void 0===t.getPlugin(O)&&t.registerPlugin(O,w)},e.Wavesurfer=void 0;var n=p(i("./src/js/event.js")),r=p(i("./src/js/utils/log.js")),o=p(i("./src/js/utils/format-time.js")),s=p(i("./src/js/defaults.js")),c=p(i("./src/js/middleware.js")),l=p(i("./node_modules/global/window.js")),u=p(i("video.js")),d=p(i("wavesurfer.js"));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,n){if(n&&("object"===t(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=u.default.getPlugin("plugin"),O="wavesurfer",x="vjs-wavedisplay",y="WebAudio",A="MediaElement",w=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(l,e);var t,i,a,c=b(l);function l(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),r=c.call(this,e,t),e.addClass("vjs-wavesurfer"),t=u.default.mergeOptions(s.default,t),r.waveReady=!1,r.waveFinished=!1,r.liveMode=!1,r.backend=null,r.debug="true"===t.debug.toString(),r.textTracksEnabled=r.player.options_.tracks.length>0,r.displayMilliseconds=t.displayMilliseconds,t.formatTime&&"function"===typeof t.formatTime?r.setFormatTime(t.formatTime):r.setFormatTime((function(e,t){return(0,o.default)(e,t,r.displayMilliseconds)})),r.player.one(n.default.READY,r.initialize.bind(m(r))),r}return t=l,(i=[{key:"initialize",value:function(){var e=this;void 0!==this.player.bigPlayButton&&this.player.bigPlayButton.hide();var t=this.parseOptions(this.player.options_.plugins.wavesurfer);!0===this.player.options_.controls&&(this.player.controlBar.show(),this.player.controlBar.el_.style.display="flex",this.backend===y&&void 0!==this.player.controlBar.progressControl&&this.player.controlBar.progressControl.hide(),void 0!==this.player.controlBar.pictureInPictureToggle&&this.player.controlBar.pictureInPictureToggle.hide(),["currentTimeDisplay","timeDivider","durationDisplay"].forEach((function(t){void 0!==(t=e.player.controlBar[t])&&(t.el_.style.display="block",t.show())})),void 0!==this.player.controlBar.remainingTimeDisplay&&this.player.controlBar.remainingTimeDisplay.hide(),this.backend===y&&void 0!==this.player.controlBar.playToggle&&(this.player.controlBar.playToggle.on(["tap","click"],this.onPlayToggle.bind(this)),this.player.controlBar.playToggle.hide())),this.surfer=d.default.create(t),this.surfer.on(n.default.ERROR,this.onWaveError.bind(this)),this.surfer.on(n.default.FINISH,this.onWaveFinish.bind(this)),this.backend=this.surfer.params.backend,this.log("Using wavesurfer.js "+this.backend+" backend."),"microphone"in this.player.wavesurfer().surfer.getActivePlugins()&&(this.liveMode=!0,this.waveReady=!0,this.log("wavesurfer.js microphone plugin enabled."),this.player.controlBar.playToggle.show(),this.surfer.microphone.on(n.default.DEVICE_ERROR,this.onWaveError.bind(this))),this.surferReady=this.onWaveReady.bind(this),this.backend===y&&(this.surferProgress=this.onWaveProgress.bind(this),this.surferSeek=this.onWaveSeek.bind(this),this.player.muted()&&this.setVolume(0)),this.liveMode||this.setupPlaybackEvents(!0),this.player.on(n.default.VOLUMECHANGE,this.onVolumeChange.bind(this)),this.player.on(n.default.FULLSCREENCHANGE,this.onScreenChange.bind(this)),!0===this.player.options_.fluid&&(this.surfer.drawer.wrapper.className=x)}},{key:"parseOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.player.el_.getBoundingClientRect();this.originalWidth=this.player.options_.width||t.width,this.originalHeight=this.player.options_.height||t.height;var n=this.player.controlBar.height();if(!0===this.player.options_.controls&&0===n&&(n=30),void 0===e.container&&(e.container=this.player.el_),void 0===e.waveformHeight){var r=t.height;e.height=r-n}else e.height=e.waveformHeight;return e.splitChannels&&!0===e.splitChannels&&(e.height/=2),"backend"in e?this.backend=e.backend:e.backend=this.backend=A,e}},{key:"setupPlaybackEvents",value:function(e){!1===e?(this.surfer.un(n.default.READY,this.surferReady),this.backend===y&&(this.surfer.un(n.default.AUDIOPROCESS,this.surferProgress),this.surfer.un(n.default.SEEK,this.surferSeek))):!0===e&&(this.surfer.on(n.default.READY,this.surferReady),this.backend===y&&(this.surfer.on(n.default.AUDIOPROCESS,this.surferProgress),this.surfer.on(n.default.SEEK,this.surferSeek)))}},{key:"load",value:function(e,t){e instanceof Blob||e instanceof File?(this.log("Loading object: "+JSON.stringify(e)),this.surfer.loadBlob(e)):void 0!==t?this.loadPeaks(e,t):("string"===typeof e?this.log("Loading URL: "+e):this.log("Loading element: "+e),this.surfer.load(e))}},{key:"loadPeaks",value:function(e,t){var r=this;if(Array.isArray(t))this.log("Loading URL with array of peaks: "+e),this.surfer.load(e,t);else{var i={url:t,responseType:"json"};void 0!==this.player.options_.plugins.wavesurfer.xhr&&(i.xhr=this.player.options_.plugins.wavesurfer.xhr);var a=d.default.util.fetchFile(i);a.once("success",(function(i){r.log("Loaded Peak Data URL: "+t),i&&i.data?r.surfer.load(e,i.data):(r.player.trigger(n.default.ERROR,"Could not load peaks data from "+t),r.log(err,"error"))})),a.once("error",(function(e){r.player.trigger(n.default.ERROR,"Unable to retrieve peak data from "+t+". Status code: "+a.response.status)}))}}},{key:"play",value:function(){void 0!==this.player.controlBar.playToggle&&this.player.controlBar.playToggle.contentEl()&&this.player.controlBar.playToggle.handlePlay(),this.liveMode?this.surfer.microphone.active?this.surfer.microphone.paused?(this.log("Resume microphone"),this.surfer.microphone.play()):this.pause():(this.log("Start microphone"),this.surfer.microphone.start()):(this.log("Start playback"),this.player.play(),this.surfer.play())}},{key:"pause",value:function(){void 0!==this.player.controlBar.playToggle&&this.player.controlBar.playToggle.contentEl()&&this.player.controlBar.playToggle.handlePause(),this.liveMode?(this.log("Pause microphone"),this.surfer.microphone.pause()):(this.log("Pause playback"),this.waveFinished?this.waveFinished=!1:this.surfer.pause(),this.setCurrentTime())}},{key:"dispose",value:function(){this.surfer&&(this.liveMode&&this.surfer.microphone&&(this.surfer.microphone.destroy(),this.log("Destroyed microphone plugin")),this.surfer.destroy()),this.log("Destroyed plugin")}},{key:"isDestroyed",value:function(){return this.player&&null===this.player.children()}},{key:"destroy",value:function(){this.player.dispose()}},{key:"setVolume",value:function(e){void 0!==e&&(this.log("Changing volume to: "+e),this.player.volume(e))}},{key:"exportImage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"blob";return this.surfer.exportImage(e,t,n)}},{key:"setAudioOutput",value:function(e){var t=this;e&&this.surfer.setSinkId(e).then((function(e){t.player.trigger(n.default.AUDIO_OUTPUT_READY)})).catch((function(e){t.player.trigger(n.default.ERROR,e),t.log(e,"error")}))}},{key:"getCurrentTime",value:function(){var e=this.surfer.getCurrentTime();return e=isNaN(e)?0:e}},{key:"setCurrentTime",value:function(e,t){if(void 0===e&&(e=this.surfer.getCurrentTime()),void 0===t&&(t=this.surfer.getDuration()),e=isNaN(e)?0:e,t=isNaN(t)?0:t,this.player.controlBar.currentTimeDisplay&&this.player.controlBar.currentTimeDisplay.contentEl()&&this.player.controlBar.currentTimeDisplay.contentEl().lastChild){var n=Math.min(e,t);this.player.controlBar.currentTimeDisplay.formattedTime_=this.player.controlBar.currentTimeDisplay.contentEl().lastChild.textContent=this._formatTime(n,t,this.displayMilliseconds)}this.textTracksEnabled&&this.player.tech_&&this.player.tech_.el_&&this.player.tech_.setCurrentTime(e)}},{key:"getDuration",value:function(){var e=this.surfer.getDuration();return e=isNaN(e)?0:e}},{key:"setDuration",value:function(e){void 0===e&&(e=this.surfer.getDuration()),e=isNaN(e)?0:e,this.player.controlBar.durationDisplay&&this.player.controlBar.durationDisplay.contentEl()&&this.player.controlBar.durationDisplay.contentEl().lastChild&&(this.player.controlBar.durationDisplay.formattedTime_=this.player.controlBar.durationDisplay.contentEl().lastChild.textContent=this._formatTime(e,e,this.displayMilliseconds))}},{key:"onWaveReady",value:function(){var e=this;this.waveReady=!0,this.waveFinished=!1,this.liveMode=!1,this.log("Waveform is ready"),this.player.trigger(n.default.WAVE_READY),this.backend===y&&(this.setCurrentTime(),this.setDuration(),void 0!==this.player.controlBar.playToggle&&this.player.controlBar.playToggle.contentEl()&&this.player.controlBar.playToggle.show()),this.player.loadingSpinner.contentEl()&&this.player.loadingSpinner.hide(),!0===this.player.options_.autoplay&&(this.setVolume(0),this.backend===y?this.play():this.player.play().catch((function(t){e.onWaveError(t)})))}},{key:"onWaveFinish",value:function(){var e=this;this.log("Finished playback"),this.player.trigger(n.default.PLAYBACK_FINISH),!0===this.player.options_.loop?this.backend===y&&(this.surfer.stop(),this.play()):(this.waveFinished=!0,this.backend===y&&(this.pause(),this.player.trigger(n.default.ENDED),this.surfer.once(n.default.SEEK,(function(){void 0!==e.player.controlBar.playToggle&&e.player.controlBar.playToggle.removeClass("vjs-ended"),e.player.trigger(n.default.PAUSE)}))))}},{key:"onWaveProgress",value:function(e){this.setCurrentTime()}},{key:"onWaveSeek",value:function(){this.setCurrentTime()}},{key:"onWaveError",value:function(e){e.name&&"AbortError"===e.name||"DOMException"===e.name&&e.message.startsWith("The operation was aborted")?this.player.trigger(n.default.ABORT,e):(this.player.trigger(n.default.ERROR,e),this.log(e,"error"))}},{key:"onPlayToggle",value:function(){void 0!==this.player.controlBar.playToggle&&this.player.controlBar.playToggle.hasClass("vjs-ended")&&this.player.controlBar.playToggle.removeClass("vjs-ended"),this.surfer.isPlaying()?this.pause():this.play()}},{key:"onVolumeChange",value:function(){var e=this.player.volume();this.player.muted()&&(e=0),this.surfer.setVolume(e)}},{key:"onScreenChange",value:function(){var e=this,t=this.player.setInterval((function(){var n,r;if(e.player.isFullscreen()||(n=e.originalWidth,r=e.originalHeight),e.waveReady){if(e.liveMode&&!e.surfer.microphone.active)return;e.redrawWaveform(n,r)}e.player.clearInterval(t)}),100)}},{key:"redrawWaveform",value:function(e,t){if(!this.isDestroyed()){if(this.player.el_){var n=this.player.el_.getBoundingClientRect();void 0===e&&(e=n.width),void 0===t&&(t=n.height)}this.surfer.drawer.destroy(),this.surfer.params.width=e,this.surfer.params.height=t-this.player.controlBar.height(),this.surfer.createDrawer(),this.surfer.drawer.wrapper.className=x,this.surfer.drawBuffer(),this.surfer.drawer.progress(this.surfer.backend.getPlayedPercents())}}},{key:"log",value:function(e,t){(0,r.default)(e,t,this.debug)}},{key:"setFormatTime",value:function(e){this._formatTime=e,u.default.setFormatTime(this._formatTime)}}])&&h(t.prototype,i),a&&h(t,a),l}(g);e.Wavesurfer=w,w.VERSION="3.8.0",u.default.Wavesurfer=w,void 0===u.default.getPlugin(O)&&u.default.registerPlugin(O,w),u.default.use("*",(function(e){return c.default.player=e,c.default}))}(),a}()},e.exports=r(n(62),n(358))},594:function(e,t){},728:function(e,t){},842:function(e,t,n){},843:function(e,t,n){},846:function(e,t,n){},847:function(e,t,n){"use strict";n.r(t);var r,i,a,o,s,c,l,u,d,p,h,f=n(0),b=n.n(f),j=n(93),m=n.n(j),v=n(56),g=n(33),O=n(11),x=n(20),y=n(15),A=n(910),w=n(894),E=n(161),C=n(8),k=n(10),I=Object(k.b)(A.a.Description)(r||(r=Object(C.a)(["\n  word-break: break-word;\n  width: fit-content;\n"]))),S=n(1),R=function(e){var t=e.open,n=e.isConfirmation,r=e.content,i=e.title,a=e.type,o=e.onClose,s={},c={};return"default"!==a&&a||(c.positive=!0),"error"===a&&(s.icon="exclamation triangle",s.color="red",c.color="red",c.basic=!0),"warning"===a&&(s.icon="warning circle",s.color="orange",c.color="blue",c.basic=!0),Object(S.jsxs)(A.a,{open:t,size:"tiny",children:[Object(S.jsx)(w.a,Object(y.a)({content:i},s)),Object(S.jsx)(A.a.Content,{image:!0,children:Object(S.jsx)(I,{children:r})}),Object(S.jsxs)(A.a.Actions,{children:[!n&&Object(S.jsx)(E.a,Object(y.a)(Object(y.a)({onClick:function(){return o&&o(!1)}},c),{},{children:"Ok"})),n&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(E.a,{onClick:function(){return o&&o(!1)},basic:!0,children:"Cancel"}),Object(S.jsx)(E.a,Object(y.a)(Object(y.a)({onClick:function(){return o&&o(!0)}},c),{},{children:"Confirm"}))]})]})]})},T=Object(x.b)({key:"basicModalState",default:{open:!1,title:"",content:"",type:"default"}}),D=function(){var e=Object(x.d)(T),t=Object(O.a)(e,2),n=t[0],r=n.open,i=n.content,a=n.title,o=n.type,s=n.onClose,c=n.isConfirmation,l=t[1];return Object(S.jsx)(R,{open:r,content:i,title:a,type:o,onClose:function(e){s&&s(e),l({open:!1,title:"",content:"",type:"default"})},isConfirmation:c||!1})},B=n(3),P=n.n(B),Q=n(12),N=n(27),U=Object(x.b)({key:"formModalState",default:{open:!1,title:"",content:"",type:"default",initialValues:{},validationSchema:"",onSubmit:function(){}}}),L=function(){var e=Object(x.d)(U),t=Object(O.a)(e,2),n=t[0],r=n.open,i=n.content,a=n.title,o=n.type,s=n.onClose,c=n.initialValues,l=n.validationSchema,u=n.onSubmit,d=n.isConfirmation,p=t[1],h=function(e){s&&s(e),p({open:!1,title:"",content:"",type:"default",initialValues:{},validationSchema:"",onSubmit:function(){}})};return Object(S.jsx)(N.d,{initialValues:c,validationSchema:l,onSubmit:function(e){u(e)},children:function(e){var t=e.submitForm,n=function(){var e=Object(Q.a)(P.a.mark((function e(n){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=3;break}return e.next=3,t();case 3:h(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(R,{open:r,content:i,title:a,type:o,onClose:n,isConfirmation:!!d})}})},M=function(){return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(D,{}),Object(S.jsx)(L,{})]})},_=n(80),F=n(217),K=n.n(F),z=Object(x.b)({key:"mediaQueryState",default:{isMobile:K()("(max-width: 767px)").matches,isTablet:K()("(max-width: 1024px)").matches}}),J=Object(x.c)({key:"getIsMobile",get:function(e){return!(0,e.get)(z).isMobile}}),V=Object(x.b)({key:"sidebarState",default:J}),Y=Object(x.b)({key:"userState",default:null}),q=k.b.div(i||(i=Object(C.a)(["\n  border-radius: 10em;\n  ","\n  ","\n  ","\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  & > img {\n    height: 100%;\n    width: 100%;\n  }\n"])),(function(e){var t=e.image;return t&&Object(k.a)(a||(a=Object(C.a)(["\n      background-image: url(",");\n      background-position: center;\n      background-size: cover;\n    "])),t)}),(function(e){return!e.borderless&&Object(k.a)(o||(o=Object(C.a)(["\n      border: 1px solid #000000;\n    "])))}),(function(e){var t=e.size;return"small"===t?Object(k.a)(s||(s=Object(C.a)(["\n        height: 24px;\n        width: 24px;\n        font-size: 0.8em;\n      "]))):"large"===t?Object(k.a)(c||(c=Object(C.a)(["\n        height: 52px;\n        width: 52px;\n      "]))):Object(k.a)(l||(l=Object(C.a)(["\n      height: 36px;\n      width: 36px;\n    "])))})),W=function(e){var t=e.split(" ");return t.length>1?"".concat(t[0].charAt(0).toUpperCase()).concat(t[t.length-1].charAt(0).toUpperCase()):1===t.length?"".concat(t[0].charAt(0).toUpperCase()).concat(t[0].charAt(1).toLowerCase()):""},Z=function(e){var t=e.name,n=e.size,r=void 0===n?"medium":n,i=e.picture,a=!!i;return Object(S.jsx)(q,{className:"avatar",image:i,size:r,borderless:a,children:!a&&Object(S.jsx)("span",{children:W(t)})})},G=n(509),H=n(219),X=Object(k.b)(G.a)(u||(u=Object(C.a)(["\n  &.ui {\n    margin: 0;\n    border-radius: 0;\n  }\n"]))),$=Object(k.b)(X.Item)(d||(d=Object(C.a)(["\n  flex: 1 !important;\n  justify-content: center;\n  & > .ui.search {\n    max-width: 531px;\n    width: 100%;\n    & > * {\n      width: 100%;\n    }\n  }\n"]))),ee=Object(k.b)(H.a)(p||(p=Object(C.a)(["\n  border-left: 1px solid rgba(34, 36, 38, 0.15);\n  position: relative;\n  width: 68px;\n  & > i {\n    display: none;\n  }\n"]))),te=k.b.div(h||(h=Object(C.a)(["\n  width: 122px;\n  height: 36px;\n  background-image: url('/images/logo2.svg');\n  background-repeat: no-repeat;\n  @media only screen and (max-width: 767px) {\n    width: 36px;\n    background-image: url('/images/logo.svg');\n  }\n"]))),ne=n(903),re=n(510),ie=n.n(re),ae=n(66),oe=["token"],se=ie.a.create({baseURL:"/api"});se.interceptors.request.use((function(e){var t=localStorage.getItem("token"),n=t?JSON.parse(t):"";return e.headers.Authorization="Bearer ".concat(n),e})),se.interceptors.response.use((function(e){return e}),(function(e){if(401===e.response.status){if(localStorage.removeItem("token"),"/u/signin"===Cl.location.pathname)return Promise.reject(e);Cl.push("/u/signin"),window.location.reload()}return Promise.reject(e)}));var ce,le,ue,de,pe,he,fe,be,je,me,ve,ge,Oe,xe,ye,Ae,we,Ee,Ce,ke,Ie,Se={singup:(ce=se,function(){var e=Object(Q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.post("u/auth/signup",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),singout:function(e){return Object(Q.a)(P.a.mark((function t(){var n;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.post("a/auth/signout");case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))}(se),requestPasswordReset:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.post("u/password-reset",{email:n});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),getMe:function(e){return Object(Q.a)(P.a.mark((function t(){var n;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.get("a/me");case 3:return n=t.sent,t.abrupt("return",n.data);case 7:throw t.prev=7,t.t0=t.catch(0),console.error(t.t0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))}(se),updateMe:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.put("a/profile",n);case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),passwordReset:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r,i,a;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.token,i=Object(ae.a)(n,oe),t.next=3,e.post("u/password-reset/".concat(r),i);case 3:return a=t.sent,t.abrupt("return",a.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),passwordChange:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.put("a/password",n);case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),signin:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.post("u/auth/signin",n);case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),confirmEmail:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.post("u/confirmation-email/".concat(n));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),requestConfirmEmail:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.post("u/confirmation-email",{email:n});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),searchStories:Object(Q.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(new Array(10).fill("x")));case 1:case"end":return e.stop()}}),e)}))),getStories:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r){var i;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("a/stories?page=".concat(n,"&size=").concat(r));case 2:return i=t.sent,t.abrupt("return",i.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(se),deleteStory:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.delete("a/stories/".concat(n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),getStory:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("a/stories/".concat(n));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),createStory:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r){var i,a;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=new FormData).append("file",n,n.name),t.next=4,e.post("a/stories",i,{onUploadProgress:function(e){return r({total:e.total,loaded:e.loaded})}});case 4:return a=t.sent,t.abrupt("return",a.data);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(se),updateStory:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r){var i;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.put("a/stories/".concat(n),r);case 2:return i=t.sent,t.abrupt("return",i.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(se),publishStory:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=6;break}return t.next=3,e.post("a/stories/".concat(n,"/publish"));case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,e.post("a/stories/".concat(n,"/draft"));case 8:t.t0=t.sent;case 9:return t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(se),uploadImage:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r){var i,a;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=new FormData).append("file",n),t.next=4,e.post("a/images",i,{onUploadProgress:function(e){return r&&r({total:e.total,loaded:e.loaded})}});case 4:return a=t.sent,t.abrupt("return",a.data);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(se),getImage:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("a/images/".concat(n));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),getCollections:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r){var i;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("a/collections?page=".concat(n,"&size=").concat(r));case 2:return i=t.sent,t.abrupt("return",i.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(se),getCollection:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("a/collections/".concat(n));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),updateCollection:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r){var i;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.put("a/collections/".concat(n),r);case 2:return i=t.sent,t.abrupt("return",i.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(se),createCollection:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.post("a/collections",n);case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),deleteCollection:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.delete("a/collections/".concat(n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),getPersons:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r,i){var a;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("a/persons?page=".concat(n,"&size=").concat(r).concat(i?"&name=".concat(i):""));case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}(se),updatePerson:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r){var i;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.put("a/persons/".concat(n),r);case 2:return i=t.sent,t.abrupt("return",i.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(se),createPerson:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.post("a/persons",n);case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),addPersonToStory:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.post("a/stories/".concat(n,"/add-person"),{personId:r});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(se),removePersonFromStory:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.post("a/stories/".concat(n,"/remove-person"),{personId:r});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(se),uploadFile:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r,i){var a,o;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new FormData).append("file",r),a.append("storyId",n),t.next=5,e.post("a/files",a,{onUploadProgress:function(e){return i&&i({total:e.total,loaded:e.loaded})}});case 5:return o=t.sent,t.abrupt("return",o.data);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}(se),deleteFile:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.delete("a/files/".concat(n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),getFiles:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r){var i;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("a/files?page=".concat(n,"&size=").concat(r));case 2:return i=t.sent,t.abrupt("return",i.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(se),getFile:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("a/files/".concat(n));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),getLink:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("a/links/".concat(n));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),createLink:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.post("a/links",n);case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),deleteLink:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.delete("a/links/".concat(n));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),getTranscriptions:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("a/transcriptions/".concat(n));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),deleteTranscriptions:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.delete("a/transcriptions/".concat(n));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),updateTranscriptions:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r){var i;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.put("a/transcriptions/".concat(n),r);case 2:return i=t.sent,t.abrupt("return",i.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(se),createTranscriptions:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.post("a/transcriptions",n);case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),getGallery:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r){var i;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("a/gallery-entries?page=".concat(n,"&size=").concat(r));case 2:return i=t.sent,t.abrupt("return",i.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(se),getGalleryItem:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("a/gallery-entries/".concat(n));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),createGallery:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r){var i;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.post("a/gallery-entries",{storyId:n,imageId:r});case 2:return i=t.sent,t.abrupt("return",i.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(se),deleteGallery:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.delete("a/gallery-entries/".concat(n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),getTimelines:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r){var i;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("a/timeline-entries?page=".concat(n,"&size=").concat(r));case 2:return i=t.sent,t.abrupt("return",i.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(se),getTimeline:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("a/timeline-entries/".concat(n));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),createTimeline:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n),t.next=3,e.post("a/timeline-entries",Object(y.a)(Object(y.a)({},n),{},{at:new Date(n.at).toJSON()}));case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),deleteTimeline:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.delete("a/timeline-entries/".concat(n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),getPlaces:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r){var i;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("a/places?page=".concat(n,"&size=").concat(r));case 2:return i=t.sent,t.abrupt("return",i.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(se),createPlace:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.post("a/places",n);case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),deletePlace:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.delete("a/places/".concat(n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),searchLocation:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("a/geomap/search?format=json&q=".concat(n));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),uploadSubtitle:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r,i,a){var o,s;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=new FormData).append("file",i),o.append("language",r),o.append("storyId",n),t.next=6,e.post("a/subtitles",o,{onUploadProgress:function(e){return a&&a({total:e.total,loaded:e.loaded})}});case 6:return s=t.sent,t.abrupt("return",s.data);case 8:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}()}(se),deleteSubtitle:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.delete("a/subtitles/".concat(n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),addWatcher:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.post("a/watchers",n);case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),removeWatcher:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.delete("a/watchers/".concat(n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),notifyWatcher:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.post("a/watchers/".concat(n,"/notify"));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),deleteComment:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.delete("a/comments/".concat(n));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),createComment:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.post("a/comments",n);case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se),editComment:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r){var i;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.put("a/comments/".concat(n),r);case 2:return i=t.sent,t.abrupt("return",i.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(se),search:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n,r,i){var a;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("a/search?q=".concat(i||"","&page=").concat(n,"&size=").concat(r));case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}(se),searchSuggestions:function(e){return function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("a/search/suggestions?q=".concat(n||"","&page=",0,"&size=",10));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(se)},Re=n(199),Te=n.n(Re),De=n(64),Be=function(){var e=function(){var e=Object(f.useState)([]),t=Object(O.a)(e,2),n=t[0],r=t[1],i=Object(f.useState)(!1),a=Object(O.a)(i,2),o=a[0],s=a[1];return{getSuggestions:function(){var e=Object(Q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return r([]),e.abrupt("return");case 3:return s(!0),e.next=6,Se.searchSuggestions(t);case 6:n=e.sent,r(n.suggestions),s(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),suggestions:n,loading:o}}(),t=e.getSuggestions,n=e.loading,r=e.suggestions,i=Object(v.h)().search,a=Object(v.g)(),o=Object(De.parse)(i,{ignoreQueryPrefix:!0}),s=o.q,c=Object(f.useState)(s||""),l=Object(O.a)(c,2),u=l[0],d=l[1],p=Object(f.useCallback)(Te()((function(e){var t=Object(De.stringify)(Object(y.a)(Object(y.a)({},o),{},{q:e}),{addQueryPrefix:!0});a.push({pathname:"/a/home",search:t})}),500),[]);Object(f.useEffect)((function(){t(u||s)}),[u]);return Object(S.jsx)(ne.a,{showNoResults:!1,onKeyPress:function(e){13===e.charCode&&p(e.target.value)},placeholder:"Search...",loading:n,onResultSelect:function(e,t){var n=t.result.title;p(n),d(n)},onSearchChange:function(e,t){d(t.value||"")},results:r.map((function(e,t){return{key:t,title:e}})),value:u})},Pe=function(){var e,t=Object(v.g)(),n=Object(x.d)(V),r=Object(O.a)(n,2),i=r[0],a=r[1],o=Object(x.e)(Y);return Object(S.jsxs)(X,{borderless:!0,children:[Object(S.jsx)(X.Item,{onClick:function(){a(!i)},children:Object(S.jsx)(_.a,{name:"sidebar"})}),Object(S.jsx)(X.Item,{children:Object(S.jsx)(g.b,{to:"/a/home",children:Object(S.jsx)(te,{})})}),Object(S.jsx)($,{position:"left",fluid:!0,children:Object(S.jsx)(Be,{})}),Object(S.jsxs)(X.Menu,{position:"right",children:[Object(S.jsx)(X.Item,{children:Object(S.jsx)(E.a,{primary:!0,onClick:function(){t.push("/a/stories/new")},children:"New Story"})}),Object(S.jsx)(ee,{item:!0,icon:"",pointing:!1,trigger:Object(S.jsx)(Z,{picture:null===o||void 0===o||null===(e=o.picture)||void 0===e?void 0:e.thumbnail,name:o?"".concat(null===o||void 0===o?void 0:o.firstName," ").concat(null===o||void 0===o?void 0:o.lastName):""}),children:Object(S.jsxs)(ee.Menu,{children:[Object(S.jsx)(ee.Item,{icon:"user",text:"Profile",onClick:function(){return t.push("/a/profile")}}),Object(S.jsx)(ee.Divider,{}),Object(S.jsx)(ee.Item,{icon:"log out",text:"Exit",onClick:function(){t.push("/a/signout")}})]})})]})]})},Qe=n(895),Ne=Object(k.b)(Qe.a.Pushable)(le||(le=Object(C.a)(["\n  height: calc(100vh - 61px);\n  @media (min-width: 768px) {\n    .sidebar + .pusher {\n      margin-left: 0;\n      transition: margin-left 500ms ease, width 500ms ease;\n      width: 100%;\n    }\n\n    .sidebar.visible + .pusher {\n      margin-left: 260px;\n      transition: margin-left 500ms ease, width 500ms ease;\n      width: calc(100% - 260px);\n    }\n  }\n"]))),Ue=Object(k.b)(Qe.a.Pusher)(ue||(ue=Object(C.a)([""]))),Le=n(896),Me=function(){var e=Object(v.h)().pathname,t=function(t){return e.startsWith(t)};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(G.a.Item,{className:"menu-item",as:g.b,to:"a/home",active:t("/a/home"),children:[Object(S.jsx)(_.a,{name:"home"}),"Home"]}),Object(S.jsx)(Le.a,{}),Object(S.jsxs)(G.a.Item,{className:"menu-item",as:g.b,to:"/a/stories",active:t("/a/stories"),children:[Object(S.jsx)(_.a,{name:"play"}),"Stories"]}),Object(S.jsxs)(G.a.Item,{className:"menu-item",as:g.b,to:"/a/collections",active:t("/a/collections"),children:[Object(S.jsx)(_.a,{name:"book"}),"Collections"]}),Object(S.jsxs)(G.a.Item,{className:"menu-item",as:g.b,to:"/a/people",active:t("/a/people"),children:[Object(S.jsx)(_.a,{name:"group"}),"People"]}),Object(S.jsxs)(G.a.Item,{className:"menu-item",as:g.b,to:"/a/places",active:t("/a/places"),children:[Object(S.jsx)(_.a,{name:"map"}),"Places"]}),Object(S.jsxs)(G.a.Item,{className:"menu-item",as:g.b,to:"/a/photos",active:t("/a/photos"),children:[Object(S.jsx)(_.a,{name:"camera"}),"Photos"]}),Object(S.jsxs)(G.a.Item,{className:"menu-item",as:g.b,to:"/a/files",active:t("/a/files"),children:[Object(S.jsx)(_.a,{name:"file"}),"Files"]}),Object(S.jsxs)(G.a.Item,{className:"menu-item",as:g.b,to:"/a/timelines",active:t("/a/timelines"),children:[Object(S.jsx)(_.a,{name:"calendar"}),"Timeline"]})]})},_e=function(e){var t=e.children,n=Object(x.e)(V);return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(Ne,{children:[Object(S.jsx)(Qe.a,{as:G.a,className:"side-menu",animation:"overlay",direction:"left",visible:n,vertical:!0,borderless:!0,children:Object(S.jsx)(Me,{})}),Object(S.jsx)(Ue,{children:t})]})})},Fe=n(83),Ke=n(905),ze=n(349),Je=n.n(ze),Ve=Object(x.b)({key:"mediaStatusState",default:{}}),Ye=function(){var e=Object(f.useState)(new Ke.a),t=Object(O.a)(e,1)[0],n=Object(x.f)(Ve);t.configure({webSocketFactory:function(){return new Je.a("/api/ws?jwt=".concat(function(){var e=localStorage.getItem("token");return e?JSON.parse(e):null}()))},onConnect:function(){t.subscribe("/user/queue/media-progress",(function(e){var t=JSON.parse(e.body),r=t.total,i=t.current,a=t.id,o=t.payload,s=t.finished,c=Math.round(i/r*100);n((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(Fe.a)({},a,{progress:c,payload:o,finished:s}))}))}))}}),Object(f.useEffect)((function(){return t.activate(),function(){t.deactivate()}}),[])},qe=function(e){var t=e.children,n=Object(x.f)(Y);return Ye(),Object(f.useEffect)((function(){(function(){var e=Object(Q.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.getMe();case 2:t=e.sent,n(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Pe,{}),Object(S.jsx)(_e,{children:t})]})},We=n(512),Ze=n(169),Ge=Object(k.b)(We.a.Column)(de||(de=Object(C.a)(["\n  position: relative;\n  display: flex;\n  height: 100vh;\n  //background-image: url('/images/logo.svg');\n  background-size: cover;\n"]))),He=(k.b.div(pe||(pe=Object(C.a)(["\n  position: absolute;\n  background: rgba(0, 0, 0, 0.5);\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  padding: 1rem;\n"]))),k.b.div(he||(he=Object(C.a)(["\n  font-size: 56px;\n  font-weight: bold;\n  line-height: 67px;\n  letter-spacing: 0.04em;\n  color: white;\n  max-width: 560px;\n  margin-bottom: 64px;\n"]))),k.b.div(fe||(fe=Object(C.a)(["\n  font-size: 32px;\n  letter-spacing: 0.04em;\n  font-weight: normal;\n  line-height: 38px;\n  color: white;\n  max-width: 684px;\n"]))),k.b.div(be||(be=Object(C.a)(["\n  max-width: 300px;\n  display: flex;\n  margin: 64px auto;\n  justify-content: center;\n  align-items: center;\n"])))),Xe=k.b.div(je||(je=Object(C.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: center;\n  & > div {\n    width: 100%;\n    align-self: center;\n  }\n"]))),$e=function(e){var t=e.children;return Object(S.jsxs)(We.a,{verticalAlign:"middle",stackable:!0,inverted:!0,padded:!0,children:[Object(S.jsx)(Ge,{width:5,only:"tablet computer"}),Object(S.jsxs)(We.a.Column,{width:6,children:[Object(S.jsx)(He,{children:Object(S.jsx)(Ze.a,{src:"/images/logo2.svg"})}),Object(S.jsx)(Xe,{children:Object(S.jsx)("div",{children:t})})]}),Object(S.jsx)(Ge,{width:5,only:"tablet computer"})]})},et=n(25),tt=et.b().shape({email:et.d().email().required(),password:et.d().required().min(8,"Password is too short - should be 8 chars minimum.").matches(/[a-zA-Z]/,"Password can only contain Latin letters.")}),nt=k.b.div(me||(me=Object(C.a)(["\n  position: absolute;\n  right: 0;\n  color: red;\n  display: flex;\n  align-items: center;\n  margin-top: 0.5em;\n  & > i.tiny.icons > i {\n    margin: unset;\n  }\n\n  & > span {\n    line-height: 1em;\n    font-size: 0.8em;\n    margin-left: 0.5em;\n  }\n"]))),rt=k.b.div(ve||(ve=Object(C.a)(["\n  margin-bottom: 30px;\n  position: relative;\n"]))),it=Object(k.b)(rt)(ge||(ge=Object(C.a)([""]))),at=Object(k.b)(rt)(Oe||(Oe=Object(C.a)(["\n  & > .field {\n    display: flex;\n    flex-flow: column;\n    & > textarea {\n      resize: none;\n      border: 1px solid rgba(34, 36, 38, 0.15);\n    }\n    & > textarea:focus {\n      border-color: #85b7d9;\n      background: #ffffff;\n      color: rgba(0, 0, 0, 0.8);\n      box-shadow: none;\n      border-width: 1px;\n    }\n    & > textarea:focus-visible {\n      outline: none;\n    }\n  }\n  & > .field.error > textarea {\n    background-color: #fff6f6;\n    border-color: #e0b4b4;\n    color: #9f3a38;\n    box-shadow: none;\n    &::placeholder {\n      color: #e8bebd;\n    }\n  }\n\n  & > .field.error > textarea:focus {\n    &::placeholder {\n      color: #da9796;\n    }\n  }\n"]))),ot=Object(k.b)(rt)(xe||(xe=Object(C.a)(["\n  &.ui.form > div.dropdown {\n    display: block;\n  }\n"]))),st=n(200),ct=["errorMessage"],lt=function(e){var t=e.children;return Object(S.jsxs)(nt,{className:"ui red basic errorMessage",children:[Object(S.jsxs)(_.a.Group,{size:"tiny",children:[Object(S.jsx)(_.a,{name:"circle outline",size:"big"}),Object(S.jsx)(_.a,{name:"exclamation"})]}),Object(S.jsx)("span",{className:"ui red basic errorMessage",children:t})]})},ut=function(e){var t=e.errorMessage,n=Object(ae.a)(e,ct),r=Object(N.g)(n.name),i=Object(O.a)(r,2)[1];return Object(S.jsxs)(it,{children:[Object(S.jsx)(st.a,Object(y.a)(Object(y.a)({},n),{},{error:i.touched&&!!i.error||!!t,fluid:!0})),(i.touched&&!!i.error||!!t)&&Object(S.jsx)(lt,{children:i.error||t})]})},dt=["errorMessage"],pt=function(e){var t=e.children;return Object(S.jsxs)(nt,{className:"ui red basic errorMessage",children:[Object(S.jsxs)(_.a.Group,{size:"tiny",children:[Object(S.jsx)(_.a,{name:"circle outline",size:"big"}),Object(S.jsx)(_.a,{name:"exclamation"})]}),Object(S.jsx)("span",{className:"ui red basic errorMessage",children:t})]})},ht=function(e){var t=e.errorMessage,n=Object(ae.a)(e,dt),r=Object(N.g)(n.name),i=Object(O.a)(r,2)[1];return Object(S.jsxs)(at,{children:[Object(S.jsx)(st.c,Object(y.a)(Object(y.a)({},n),{},{error:i.touched&&!!i.error||!!t})),(i.touched&&!!i.error||!!t)&&Object(S.jsx)(pt,{children:i.error||t})]})},ft=["errorMessage"],bt=function(e){var t=e.children;return Object(S.jsxs)(nt,{className:"ui red basic errorMessage",children:[Object(S.jsxs)(_.a.Group,{size:"tiny",children:[Object(S.jsx)(_.a,{name:"circle outline",size:"big"}),Object(S.jsx)(_.a,{name:"exclamation"})]}),Object(S.jsx)("span",{className:"ui red basic errorMessage",children:t})]})},jt=function(e){var t=e.errorMessage,n=Object(ae.a)(e,ft),r=Object(N.g)(n.name),i=Object(O.a)(r,2)[1];return Object(S.jsxs)(ot,{children:[Object(S.jsx)(st.b,Object(y.a)(Object(y.a)({},n),{},{error:i.touched&&!!i.error||!!t,fluid:!0})),(i.touched&&!!i.error||!!t)&&Object(S.jsx)(bt,{children:i.error||t})]})},mt=n(897),vt=Object(k.b)(mt.a)(ye||(ye=Object(C.a)(["\n  &.ui.message {\n    text-align: center;\n    background: none;\n    box-shadow: none;\n    border: none;\n    margin: 0;\n  }\n"]))),gt=function(e){var t=e.to,n=e.children;return Object(S.jsx)(vt,{size:"huge",children:Object(S.jsx)(g.b,{to:t,children:n})})},Ot=function(){var e=Object(v.g)(),t=Object(x.f)(Y),n=Object(f.useState)(void 0),r=Object(O.a)(n,2),i=r[0],a=r[1],o=Object(x.f)(T),s=function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se.requestConfirmEmail(t);case 3:o({open:!1,title:"",content:""}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),o({open:!0,title:"Confirm email",content:Object(S.jsxs)(S.Fragment,{children:["This email has not confirmed. ",Object(S.jsx)("br",{}),"In the next few minutes, we are sending another confirmation email.",Object(S.jsx)("br",{}),"Please, verify our email box and confirm it."]})});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),c=function(){var n=Object(Q.a)(P.a.mark((function n(r){var i,c,l,u,d;return P.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r.email,c=r.password,n.prev=1,a(""),n.next=5,Se.signin({email:i,password:c});case 5:l=n.sent,u=l.token,d=l.user,localStorage.setItem("token",JSON.stringify(u)),t(d),e.push("/a"),n.next=22;break;case 13:if(n.prev=13,n.t0=n.catch(1),"1004"!==n.t0.response.data.code){n.next=18;break}return a("Email or password are incorrect. Please try again"),n.abrupt("return");case 18:if("1005"!==n.t0.response.data.code){n.next=21;break}return o({open:!0,title:"Verify email",content:Object(S.jsxs)(S.Fragment,{children:["Please verify your email by clicking the link in the message we sent you.",Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsx)(E.a,{basic:!0,color:"blue",onClick:function(){return s(i)},children:"Resend email"})]})}),n.abrupt("return");case 21:a(n.t0.response.data.message);case 22:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(w.a,{as:"h2",color:"black",textAlign:"left",children:"Login"}),Object(S.jsx)(N.d,{initialValues:{email:"",password:""},validationSchema:tt,onSubmit:c,children:function(e){var t=e.isSubmitting;return Object(S.jsxs)(N.c,{children:[Object(S.jsx)(ut,{name:"email",placeholder:"Email address",errorMessage:i}),Object(S.jsx)(ut,{name:"password",placeholder:"Password",type:"password",errorMessage:i}),Object(S.jsx)(E.a,{color:"blue",fluid:!0,size:"large",loading:t,type:"submit",children:"Login"}),Object(S.jsx)(gt,{to:"/u/forgot-password",children:"Forgot Password"}),Object(S.jsx)(E.a,{basic:!0,color:"blue",fluid:!0,size:"large",as:g.b,to:"/u/signup",children:"Create new Account"})]})}})]})},xt=et.b().shape({email:et.d().email().required()}),yt=function(){var e=Object(v.g)(),t=Object(x.f)(T),n=Object(f.useState)(void 0),r=Object(O.a)(n,2),i=r[0],a=r[1],o=function(){var n=Object(Q.a)(P.a.mark((function n(r){var i;return P.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r.email,n.prev=1,n.next=4,Se.requestPasswordReset(i);case 4:t({open:!0,title:"Forgot Password",content:"We sent you an email with a link to reset your password."}),e.push("/u/singin"),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),a("Something was wrong! please try again.");case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(w.a,{as:"h2",color:"black",textAlign:"left",children:"Forgot password"}),Object(S.jsx)(N.d,{initialValues:{email:""},validationSchema:xt,onSubmit:o,children:function(e){var t=e.isSubmitting;return Object(S.jsxs)(N.c,{children:[Object(S.jsx)(ut,{name:"email",placeholder:"Email address",errorMessage:i}),Object(S.jsx)(E.a,{color:"blue",fluid:!0,size:"large",type:"submit",loading:t,children:"Submit"}),Object(S.jsx)(gt,{to:"/u/signin",children:"Back to login"})]})}})]})},At=et.b().shape({email:et.d().email().required(),firstName:et.d().required(),lastName:et.d().required(),password:et.d().required().min(8,"Password is too short - should be 8 chars minimum.").matches(/[a-zA-Z]/,"Password can onlsy contain Latin letters."),confirmation:et.d().oneOf([et.c("password"),null],"Passwords must match").required()}),wt=function(){var e=Object(v.g)(),t=Object(x.f)(T),n=Object(f.useState)(void 0),r=Object(O.a)(n,2),i=r[0],a=r[1],o=function(){var n=Object(Q.a)(P.a.mark((function n(r){var i,o,s,c,l;return P.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r.email,o=r.firstName,s=r.lastName,c=r.password,l=r.confirmation,n.prev=1,n.next=4,Se.singup({email:i,firstName:o,lastName:s,password:c,confirmation:l});case 4:e.push("/login/singin"),t({open:!0,title:"Confirm email",content:Object(S.jsx)(S.Fragment,{children:"We sent an email to you to confirm your account. Please check this."})}),n.next=14;break;case 8:if(n.prev=8,n.t0=n.catch(1),"1001"!==n.t0.response.data.code){n.next=13;break}return a("Email is already taken."),n.abrupt("return");case 13:a(n.t0.response.data.message);case 14:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(w.a,{as:"h2",color:"black",textAlign:"left",children:"Create account"}),Object(S.jsx)(N.d,{initialValues:{email:"",password:"",confirmation:"",firstName:"",lastName:""},validationSchema:At,onSubmit:o,children:function(e){var t=e.isSubmitting;return Object(S.jsxs)(N.c,{children:[Object(S.jsx)(ut,{name:"email",placeholder:"Email address",errorMessage:i}),Object(S.jsx)(ut,{name:"firstName",placeholder:"First Name",errorMessage:i}),Object(S.jsx)(ut,{name:"lastName",placeholder:"Last Name",errorMessage:i}),Object(S.jsx)(ut,{name:"password",placeholder:"Password",type:"password",errorMessage:i}),Object(S.jsx)(ut,{name:"confirmation",placeholder:"Confirmation password",type:"password",errorMessage:i}),Object(S.jsx)(E.a,{color:"blue",fluid:!0,size:"large",loading:t,type:"submit",children:"Create account"}),Object(S.jsx)(gt,{to:"/u/signin",children:"Back to login"})]})}})]})},Et=n(898),Ct=k.b.div(Ae||(Ae=Object(C.a)(["\n  position: relative;\n  & > .ui.placeholder,\n  & > .ui.image {\n    width: 100%;\n    height: 100%;\n  }\n\n  & > .ui.placeholder {\n    position: absolute;\n    max-width: unset;\n    top: 0;\n    left: 0;\n    right: 0;\n  }\n"]))),kt=["src"],It=function(e){var t=e.src,n=Object(ae.a)(e,kt),r=Object(f.useState)(!0),i=Object(O.a)(r,2),a=i[0],o=i[1],s=function(){o(!1)};return Object(S.jsxs)(Ct,{className:"lazyImage",children:[Object(S.jsx)(Ze.a,Object(y.a)(Object(y.a)({src:t||""},n),{},{onLoad:function(){return s()},onError:function(){return s()}})),a&&Object(S.jsx)(Et.a,{})]})},St=n(311),Rt=Object(k.b)(St.a)(we||(we=Object(C.a)(["\n  cursor: pointer;\n  max-width: 329px;\n  max-height: 340px;\n  &:hover {\n    box-shadow: 0 2px 6px 0 #bcbdbd, 0 0 0 2px #d4d4d5;\n  }\n  & > .lazyImage > .image > img {\n    object-fit: contain;\n    width: 100%;\n    height: 200px;\n    background-color: black;\n    position: relative;\n  }\n\n  & > .lazyImage > .image > img::after {\n    content: ' ';\n    background-size: cover;\n    background-position: center;\n    background-repeat: no-repeat;\n    height: 100%;\n    width: 100%;\n    position: absolute;\n    z-index: 2;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n\n  & > .lazyImage > .ui.image.video > img::after {\n    background-image: url(",");\n  }\n\n  & > .lazyImage > .ui.image.audio > img::after {\n    background-image: url(",");\n  }\n"])),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAApQAAAGQCAYAAAAQtvC3AAAUZklEQVR4Xu3dzYte133A8dkUClkUuixZFoNJcduF6a40tNvSlXFN/wJXXWZlnL8gdhaxMZVpbNlNZSepJBunEFBtqBYuXlg2lNYU4lGhhiZ2cDSakTSWPPN0ztXc0Z3zvMzLb5773HvO5wcfZM/MnRk9R4sv5748a2s/uDUBAIBT2l2b8UEAADguQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJcA837p0Z3Lu2vbkyqdfT25s7E5ubk+qmfR3vf7FTvN3f/aDe81rkb8+APsEJcAh5zebgKopHo87NzZ2Jv/wyf3J2qtb068bUDNBCdDYC8nnP76XN5SZM8IS6BCUAOm0th3Jk8/6xs7kyat3p15PoDqCEqibXcn4fG/vNcxfV6AqghKo1PnNyXuf7eRtZE45H36x07ym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gl3KVVl7dWt6PQDKISihKk599y695lPrAFAWQQm1+eZPRWVfHrnkMUFAFQQlVOfFW837Sefxw9n6vZ/c3nutXTcJVEFQQrWc/l4ap7mByghKqNorW80dyHkQcTrpTvp089PU6wxQNkEJ1UuPs7koKqOaXUmnuIE6CUpg335Y2rE8vmZH8nUhCVRPUAIzvLzZhNJv//j25Pf/+baHor/zIB7/8PKd5jVZe23rwWuUv24AdRKUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQIigBAAgRFACABAiKAEACBGUAACECEoAAEIEJQAAIYISAIAQQQkAQEgTlLsAAHBKO/8PJUWJ1GKgu+gAAAAASUVORK5CYII=","data:image/png;base64,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"),Tt=Object(k.b)(St.a.Description)(Ee||(Ee=Object(C.a)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2; /* number of lines to show */\n  -webkit-box-orient: vertical;\n  height: 3em;\n"]))),Dt=Object(k.b)(St.a.Meta)(Ce||(Ce=Object(C.a)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  min-height: 1.358em;\n"]))),Bt=k.b.div(ke||(ke=Object(C.a)(["\n  margin-top: 0.5em;\n  margin-bottom: 0.5em;\n  height: 1em;\n  display: flex;\n  align-items: center;\n  & > .icon.audio,\n  & > .icon.video {\n    margin-right: 1rem;\n  }\n  & > .avatar {\n    min-width: 24px;\n    margin-right: 0.8rem;\n  }\n  & > span {\n    flex: 1;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    margin-right: 0.8rem;\n  }\n"]))),Pt=k.b.div(Ie||(Ie=Object(C.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: end;\n  line-height: 24px;\n"]))),Qt=function(e,t){var n=parseInt(e.replace("p","")),r=parseInt(t.replace("p",""));return n>r?-1:r>n?1:0},Nt=function(e){var t=e.video;e.defaultRes;if(!t)return{};var n=t.thumbnails,r=(t.alternatives,t.gifs),i=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=n[Object.keys(n).sort(Qt)[0]];return(null===r||void 0===r?void 0:r.length)&&r[0].id?r[0].url:e(t+1)};return{preview:Object.keys(r).length?function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=r[Object.keys(r).sort(Qt)[0]];return(null===n||void 0===n?void 0:n.length)?n[0].id?n[0].url:e(t+1):i(t+1)}():void 0,autoGeneratedCover:Object.keys(n).length?i():void 0}},Ut=function(e){var t,n,r,i=e.onClick,a=e.showAutor,o=void 0===a||a,s=e.story,c=e.actions,l=s.video,u=s.owner,d=s.type,p=Nt({video:l}).preview,h=Object(f.useState)(!1),b=Object(O.a)(h,2),j=b[0],m=b[1],v="file";d&&(v+=" ".concat(null===d||void 0===d?void 0:d.toLowerCase())),v+=" outline";var g={onClick:i},x="".concat(u.firstName.charAt(0).toUpperCase()+u.firstName.slice(1)," ").concat(u.lastName.charAt(0).toUpperCase()+u.lastName.slice(1));return Object(S.jsxs)(Rt,Object(y.a)(Object(y.a)({fluid:!0,as:"div",className:"ui fluid card"},g),{},{onMouseEnter:function(){return m(!0)},onMouseLeave:function(){return m(!1)},children:[Object(S.jsx)(It,{className:"".concat(null===(t=s.type)||void 0===t?void 0:t.toLowerCase()),src:j?p:s.thumbnail,wrapped:!0,rounded:!1}),Object(S.jsxs)(Rt.Content,{children:[Object(S.jsx)(Rt.Header,{as:Dt,children:s.title}),Object(S.jsx)(Rt.Meta,{as:Dt,children:null===(n=s.collections[0])||void 0===n?void 0:n.title}),Object(S.jsx)(Tt,{children:s.description}),Object(S.jsxs)(Bt,{children:[Object(S.jsx)(_.a,{size:"large",name:v}),o?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Z,{name:x,picture:null===(r=u.picture)||void 0===r?void 0:r.thumbnail}),Object(S.jsx)("span",{children:x})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("span",{children:"Status: ".concat(s.ready?s.published?"Published":"Draft":"Processing Video")}),c&&Object(S.jsx)(Pt,{children:c})]})]})]})]}))},Lt=n(516);var Mt,_t,Ft,Kt,zt,Jt,Vt,Yt,qt,Wt,Zt=function(e){var t=e.loading,n=e.hasNextPage,r=e.onLoadMore,i=e.rootMargin,a=e.disabled,o=e.delayInMs,s=void 0===o?100:o,c=Object(Lt.a)({rootMargin:i}),l=Object(O.a)(c,2),u=l[0],d=l[1],p=d.rootRef,h=d.isVisible,b=!a&&!t&&h&&n;return Object(f.useEffect)((function(){if(b){var e=setTimeout((function(){r()}),s);return function(){clearTimeout(e)}}}),[r,b,s]),[u,{rootRef:p}]},Gt=n(54),Ht=function(e){var t=e.size,n=e.request,r=Object(f.useState)(!1),i=Object(O.a)(r,2),a=i[0],o=i[1],s=Object(f.useState)([]),c=Object(O.a)(s,2),l=c[0],u=c[1],d=Object(f.useState)(!0),p=Object(O.a)(d,2),h=p[0],b=p[1],j=Object(f.useState)(),m=Object(O.a)(j,2),v=m[0],g=m[1],x=Object(f.useState)(0),y=Object(O.a)(x,2),A=y[0],w=y[1];function E(){return(E=Object(Q.a)(P.a.mark((function e(r){var i,a,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,n(0,t,r);case 4:i=e.sent,a=i.content,s=i.last,w(0),u(a),b(!s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),g(e.t0);case 15:return e.prev=15,o(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})))).apply(this,arguments)}function C(){return(C=Object(Q.a)(P.a.mark((function e(r){var i,a,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,n(A,t,r);case 4:i=e.sent,a=i.content,s=i.last,w(A+1),u((function(e){return[].concat(Object(Gt.a)(e),Object(Gt.a)(a))})),b(!s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),g(e.t0);case 15:return e.prev=15,o(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})))).apply(this,arguments)}return{loading:a,items:l,hasNextPage:h,error:v,loadMore:function(e){return C.apply(this,arguments)},reload:function(e){return E.apply(this,arguments)},setItems:u}},Xt=k.b.div(Mt||(Mt=Object(C.a)(["\n  height: calc(100vh - 61px);\n  overflow: auto;\n"]))),$t=k.b.div(_t||(_t=Object(C.a)(["\n  padding: 24px;\n"]))),en=n(848),tn=n(899),nn=function(e){var t=e.isLoading,n=e.message,r=e.children,i=e.progress;return Object(S.jsxs)(S.Fragment,{children:[t&&Object(S.jsx)(en.a,{inverted:!0,active:t,children:Object(S.jsxs)(tn.a,{children:[!t&&"Loading...",void 0!==i&&"".concat(i,"%"),n&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("br",{}),n]})]})}),!t&&r]})},rn=function(e){var t=e.history,n=Object(v.h)().search,r=Object(De.parse)(n,{ignoreQueryPrefix:!0}).q,i=Ht({size:15,request:Se.search}),a=i.loading,o=i.items,s=i.hasNextPage,c=i.error,l=i.loadMore,u=i.reload;Object(f.useEffect)((function(){u(r)}),[r]);var d=Zt({loading:a,hasNextPage:s,onLoadMore:function(){return l(r)},disabled:!!c,rootMargin:"0px 0px 400px 0px"}),p=Object(O.a)(d,1)[0];return Object(S.jsx)(Xt,{children:Object(S.jsxs)($t,{children:[Object(S.jsx)(w.a,{as:"h1",children:"Home"}),Object(S.jsxs)(We.a,{children:[o.map((function(e){return Object(S.jsx)(We.a.Column,{tablet:8,mobile:16,widescreen:4,computer:8,largeScreen:4,children:Object(S.jsx)(Ut,{story:e,onClick:function(){return t.push("/a/stories/".concat(e.id))}})},e.id)})),Object(S.jsx)("div",{ref:p,children:Object(S.jsx)(nn,{})})]})]})})},an=k.b.div(Ft||(Ft=Object(C.a)(["\n  width: 100%;\n  height: calc(100vh - 240px);\n  overflow: auto;\n"]))),on=function(e){var t=e.tab,n=e.onChange,r=Object(x.e)(z),i=r.isMobile;return r.isTablet||i?Object(S.jsx)(G.a,{vertical:!0,children:Object(S.jsx)(H.a,{item:!0,text:t,children:Object(S.jsxs)(H.a.Menu,{children:[Object(S.jsx)(H.a.Item,{onClick:function(){return n("general")},children:"General"}),Object(S.jsx)(H.a.Item,{onClick:function(){return n("change-password")},children:"Change password"})]})})}):Object(S.jsxs)(G.a,{pointing:!0,stackable:!0,secondary:!0,children:[Object(S.jsx)(G.a.Item,{name:"General",active:"general"===t,onClick:function(){return n("general")}}),Object(S.jsx)(G.a.Item,{name:"Change password",active:"change-password"===t,onClick:function(){return n("change-password")}})]})},sn=et.b().shape({password:et.d().required(),newPassword:et.d().required("new password is a required field.").min(8,"Password is too short - should be 8 chars minimum.").matches(/[a-zA-Z]/,"Password can onlsy contain Latin letters."),confirmation:et.d().oneOf([et.c("newPassword"),null],"new passwords must match").required("confirm new password is a required field.")}),cn=k.b.div(Kt||(Kt=Object(C.a)(["\n  display: flex;\n  flex-flow: column;\n  width: 400px;\n  @media only screen and (max-width: 1024px) {\n    width: unset;\n  }\n"]))),ln=function(){var e=Object(v.g)(),t=Object(f.useState)(void 0),n=Object(O.a)(t,2),r=n[0],i=n[1],a=Object(x.f)(T),o=function(){var t=Object(Q.a)(P.a.mark((function t(n){var r,o,s;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.newPassword,o=n.confirmation,s=n.password,t.prev=1,t.next=4,Se.passwordChange({password:s,newPassword:r,confirmation:o});case 4:localStorage.removeItem("token"),e.push("/u/login"),a({open:!0,title:"Password changed",content:Object(S.jsx)(S.Fragment,{children:"Your password has been changed."})}),t.next=15;break;case 9:if(t.prev=9,t.t0=t.catch(1),"1004"!==t.t0.response.data.code){t.next=14;break}return i("Wrong password! please try again."),t.abrupt("return");case 14:i("Something was wrong! please try again.");case 15:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}();return Object(S.jsxs)(cn,{children:[Object(S.jsx)("div",{style:{padding:"16px 0px 32px"},children:Object(S.jsx)(w.a,{as:"h4",color:"black",textAlign:"left",children:"We suggest you use 8 or more characters with a mix of letters, numbers for the most secure password:"})}),Object(S.jsx)(N.d,{initialValues:{newPassword:"",confirmation:"",password:""},validationSchema:sn,onSubmit:o,children:function(e){var t=e.isSubmitting;return Object(S.jsxs)(N.c,{children:[Object(S.jsx)(ut,{name:"password",placeholder:"Your password",type:"password",errorMessage:r}),Object(S.jsx)(ut,{name:"newPassword",placeholder:"New password",type:"password",errorMessage:r}),Object(S.jsx)(ut,{name:"confirmation",placeholder:"Confirm new password",type:"password",errorMessage:r}),Object(S.jsx)(E.a,{basic:!0,color:"blue",fluid:!0,size:"large",loading:t,type:"submit",children:"Change"})]})}})]})},un=et.b().shape({firstName:et.d().required(),lastName:et.d().required()}),dn=Object(k.b)(E.a)(zt||(zt=Object(C.a)(["\n  &.button,\n  &.ui.basic.button {\n    box-shadow: unset !important;\n    margin: 8px 0px 8px -21px;\n  }\n  &.ui.basic.button:focus {\n    box-shadow: unset !important;\n  }\n  &.ui.basic.button:active {\n    box-shadow: unset !important;\n    background-color: unset;\n  }\n  &.ui.basic.button:hover {\n    box-shadow: unset !important;\n  }\n"]))),pn=k.b.div(Jt||(Jt=Object(C.a)(["\n  margin: 10px 0px 10px 0px;\n"]))),hn=n(908),fn=n(30),bn=function(e){var t=e.name,n=e.defaultPicture,r=e.onChange,i=Object(f.useRef)(null),a=Object(f.useState)(null),o=Object(O.a)(a,2),s=o[0],c=o[1],l=Object(x.e)(Ve),u=Object(f.useState)(n),d=Object(O.a)(u,2),p=d[0],h=d[1];Object(f.useEffect)((function(){var e=(null===p||void 0===p?void 0:p.id)||"";if(l[e]){var t=l[e],n=t.payload,r=t.finished,i=t.progress;c({progress:i,label:"Processing..."}),r&&(c(null),h((function(e){return Object(y.a)(Object(y.a)({},e),n)})))}}),[l]);var b=function(){var e=Object(Q.a)(P.a.mark((function e(t){var n,i,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=t.target.files)||void 0===n?void 0:n.length){e.next=2;break}return e.abrupt("return");case 2:return i=t.target.files[0],e.prev=3,e.next=6,Se.uploadImage(i,(function(e){var t=e.loaded,n=e.total,r=Math.round(100*t/n);c({progress:r,label:"Uploading..."})}));case 6:a=e.sent,h(a),r(a.id),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),Object(fn.toast)({type:"error",title:e.t0.response.data.message,time:3e3,description:"Error: ".concat(e.t0.response.data.code)});case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(null),r(null);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Z,{name:t,size:"large",picture:null===p||void 0===p?void 0:p.thumbnail}),Object(S.jsx)("input",{ref:i,type:"file",hidden:!0,onChange:b,accept:"image/png, image/jpeg"}),null!==s&&Object(S.jsx)(pn,{children:Object(S.jsx)(hn.a,{color:"blue",progress:!0,percent:s.progress||0,label:s.label||"",size:"small"})}),null===s&&((null===p||void 0===p?void 0:p.thumbnail)?Object(S.jsx)(dn,{onClick:j,basic:!0,primary:!0,children:"Remove picture"}):Object(S.jsx)(dn,{onClick:function(){var e;null===i||void 0===i||null===(e=i.current)||void 0===e||e.click()},basic:!0,primary:!0,children:"Upload new picture"}))]})},jn=k.b.div(Vt||(Vt=Object(C.a)(["\n  display: flex;\n  flex-flow: column;\n  width: 400px;\n  @media only screen and (max-width: 1024px) {\n    width: unset;\n  }\n"]))),mn=function(){var e,t=Object(x.d)(Y),n=Object(O.a)(t,2),r=n[0],i=n[1],a=Object(f.useState)((null===r||void 0===r||null===(e=r.picture)||void 0===e?void 0:e.id)||null),o=Object(O.a)(a,2),s=o[0],c=o[1],l=Object(f.useState)({firstName:(null===r||void 0===r?void 0:r.firstName)||"",lastName:(null===r||void 0===r?void 0:r.lastName)||"",about:(null===r||void 0===r?void 0:r.about)||"",location:(null===r||void 0===r?void 0:r.location)||""}),u=Object(O.a)(l,2),d=u[0],p=u[1],h=function(){var e=Object(Q.a)(P.a.mark((function e(t){var n,r,a,o,c,l,u;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.firstName,r=t.lastName,a=t.about,o=void 0===a?"":a,c=t.location,l=void 0===c?"":c,e.next=4,Se.updateMe({firstName:n,lastName:r,about:o,location:l,pictureId:s});case 4:u=e.sent,i(u),Object(fn.toast)({type:"success",title:"Saved",time:3e3}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Object(fn.toast)({type:"error",title:e.t0.response.data.message,time:3e3,description:"Error: ".concat(e.t0.response.data.code)});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();Object(f.useEffect)((function(){p({firstName:(null===r||void 0===r?void 0:r.firstName)||"",lastName:(null===r||void 0===r?void 0:r.lastName)||"",about:(null===r||void 0===r?void 0:r.about)||"",location:(null===r||void 0===r?void 0:r.location)||""})}),[r]);var b=function(e){c(e)};return Object(S.jsx)(jn,{children:Object(S.jsx)(N.d,{initialValues:d,validationSchema:un,onSubmit:h,children:function(e){var t=e.isSubmitting,n=e.handleSubmit,i=e.setValues,a=e.values;return Object(f.useEffect)((function(){i(d)}),[d]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(ut,{name:"firstName",label:"First name",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}}),Object(S.jsx)(ut,{name:"lastName",label:"Last name",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}}),Object(S.jsx)("div",{children:Object(S.jsx)(bn,{name:"".concat(null===a||void 0===a?void 0:a.firstName," ").concat(null===a||void 0===a?void 0:a.lastName)||"",defaultPicture:(null===r||void 0===r?void 0:r.picture)||null,onChange:b})}),Object(S.jsx)(w.a,{as:"h4",color:"black",textAlign:"left",children:"Let people know about you. Your profile will appear on the Information page of the stories and collections you create, as well as any comments you post."}),Object(S.jsx)(ht,{name:"about",label:"About",rows:8,onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}}),Object(S.jsx)(ut,{name:"location",label:"Location",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}}),Object(S.jsx)(E.a,{fluid:!0,primary:!0,disabled:t,loading:t,onClick:function(){n()},children:"Save"})]})}})})},vn=function(){var e=Object(v.h)(),t=e.search,n=e.pathname,r=Object(v.g)(),i=Object(De.parse)(t,{ignoreQueryPrefix:!0}),a=i.tab,o=function(e,t){var a=Object(De.stringify)(Object(y.a)(Object(y.a)({},i),{},{tab:e}),{addQueryPrefix:!0});t?r.replace({pathname:n,search:a}):r.push({pathname:n,search:a})};Object(f.useEffect)((function(){a||o("general",!0)}),[a]);return Object(S.jsx)(Xt,{children:Object(S.jsxs)($t,{children:[Object(S.jsxs)(g.b,{to:"/a/stories",children:[Object(S.jsx)(_.a,{name:"arrow left"}),"Back"]}),Object(S.jsx)(w.a,{as:"h1",children:"Profile"}),Object(S.jsx)(on,{tab:a,onChange:o}),Object(S.jsx)(an,{children:function(){switch(a){case"change-password":return Object(S.jsx)(ln,{});default:return Object(S.jsx)(mn,{})}}()})]})})},gn=function(){var e=Object(x.f)(Y);return Object(f.useEffect)((function(){Se.singout(),e(null),localStorage.removeItem("token")}),[]),Object(S.jsx)(v.a,{to:"/u/signin"})},On=et.b().shape({email:et.d().email().required()}),xn=function(e){var t=e.children,n=Object(x.f)(Y),r=Object(v.g)(),i=Object(v.h)().search,a=Object(De.parse)(i,{ignoreQueryPrefix:!0}).token,o=Object(x.f)(T),s=Object(x.f)(U),c=Object(f.useState)(!1),l=Object(O.a)(c,2),u=l[0],d=l[1],p=function(){var e=Object(Q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,e.prev=1,e.next=4,Se.requestConfirmEmail(n);case 4:o({open:!0,title:"Confirm email",content:Object(S.jsx)(S.Fragment,{children:"We sent an email to you to confirm your account. Please check this."})}),r.push("/u/signin"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r.push("/u/signin");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.useEffect)((function(){(function(){var e=Object(Q.a)(P.a.mark((function e(){var t,i,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.next=4,Se.confirmEmail(a);case 4:t=e.sent,i=t.user,c=t.token,d(!1),n(i),localStorage.setItem("token",JSON.stringify(c)),o({open:!0,title:"Welcome to Rakonto!",content:Object(S.jsx)(S.Fragment,{children:"Thank you for joining the world's first platform specifically designed to create, view and share your most important stories. Enjoy!"})}),r.push("/a/home"),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(0),d(!1),"1003"===e.t0.response.data.code&&s({open:!0,title:"Expired link",type:"warning",initialValues:{email:""},validationSchema:On,isConfirmation:!0,onSubmit:p,content:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{style:{marginBottom:"16px"},children:"This link has expired. Please enter your email address to resend another link to you to confirm your account."}),Object(S.jsx)("div",{children:Object(S.jsx)(N.c,{children:Object(S.jsx)(ut,{name:"email",placeholder:"Email address"})})})]})}),"1002"===e.t0.response.data.code&&(o({open:!0,title:"Confirm email",type:"error",content:Object(S.jsxs)(S.Fragment,{children:["This token not found. ",Object(S.jsx)("br",{}),"if you have registered, please try to login to request another confirmation email."]})}),r.push("/u/signin"));case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(S.jsxs)(S.Fragment,{children:[t,Object(S.jsx)(en.a,{active:u,page:!0,children:Object(S.jsx)(w.a,{as:"h2",icon:!0,inverted:!0,children:Object(S.jsx)(_.a,{name:"spinner",loading:!0})})})]})},yn=k.b.div(Yt||(Yt=Object(C.a)(["\n  height: 50vh;\n"]))),An=Object(k.b)(E.a)(qt||(qt=Object(C.a)(["\n  &.ui.button {\n    margin-top: 3em;\n    margin-bottom: 1.5em;\n  }\n"])));An.defaultProps={fluid:!0,size:"massive"};var wn=Object(k.b)(E.a)(Wt||(Wt=Object(C.a)(["\n  &.ui.button {\n    display: flex;\n    flex-flow: column;\n    align-items: center;\n    i.icon:not(.button):not(.dropdown) {\n      margin: unset;\n      color: #4471c3;\n    }\n    h3 {\n      font-weight: 300;\n    }\n  }\n"])));wn.defaultProps={fluid:!0,size:"massive"};var En,Cn,kn,In,Sn,Rn=n(359),Tn=k.b.div(En||(En=Object(C.a)(["\n  text-align: center;\n  &.ui.placeholder.segment {\n    border-width: 2px;\n    border-radius: 2px;\n    ",";\n    border-style: dashed;\n    background-color: #fafafa;\n  }\n  &.ui.placeholder .header {\n    margin: 1em;\n  }\n  &.ui.placeholder .header:not(:first-child):before {\n    content: unset;\n  }\n  &.ui.placeholder button {\n    margin-top: 1em;\n  }\n  height: 100%;\n  width: 100%;\n"])),(function(e){var t=e.isDragActive,n=e.isDragAccept;return e.isDragReject?Object(k.a)(Cn||(Cn=Object(C.a)(["\n          border-color: #ff1744;\n        "]))):n?Object(k.a)(kn||(kn=Object(C.a)(["\n          border-color: #00e676;\n        "]))):t?Object(k.a)(In||(In=Object(C.a)(["\n          border-color: #2196f3;\n        "]))):Object(k.a)(Sn||(Sn=Object(C.a)(["\n        border-color: #eeeeee;\n      "])))}));Tn.defaultProps={className:"ui placeholder segment"};var Dn,Bn,Pn,Qn,Nn,Un,Ln,Mn,_n,Fn=function(e){var t=e.handleDrop,n=e.isUploading,r=e.progress,i=Object(Rn.a)({accept:["audio/*","video/*"],noClick:!0,noKeyboard:!0,onDrop:t}),a=i.open,o=i.getRootProps,s=i.getInputProps,c=i.isDragActive,l=i.isDragAccept,u=i.isDragReject;return Object(S.jsxs)(Tn,Object(y.a)(Object(y.a)({},o()),{},{isDragActive:c,isDragAccept:l,isDragReject:u,children:[Object(S.jsx)("input",Object(y.a)({},s())),n&&Object(S.jsx)(nn,{progress:100!==r?r:void 0,message:100===r?"Processing...":"",isLoading:n}),!n&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(w.a,{icon:!0,children:[Object(S.jsx)(_.a,{name:"upload"}),"Drag and drop your video, audio files to upload"]}),Object(S.jsx)(w.a,{children:"or"}),Object(S.jsx)(E.a,{primary:!0,onClick:a,children:"Select file"})]})]}))},Kn=function(){var e=Object(v.g)(),t=Object(f.useState)(0),n=Object(O.a)(t,2),r=n[0],i=n[1],a=Object(f.useState)(!1),o=Object(O.a)(a,2),s=o[0],c=o[1];return{createStory:function(){var t=Object(Q.a)(P.a.mark((function t(n){var r,a;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.prev=1,t.next=4,Se.createStory(n,(function(e){var t=Math.round(100*e.loaded/e.total);i(t)}));case 4:r=t.sent,a=r.id,e.push("/a/stories/".concat(a,"/edit")),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),Object(fn.toast)({type:"error",title:t.t0.response.data.message,time:3e3,description:"Error: ".concat(t.t0.response.data.code)});case 13:return t.prev=13,i(100),c(!1),t.finish(13);case 17:case"end":return t.stop()}}),t,null,[[1,9,13,17]])})));return function(e){return t.apply(this,arguments)}}(),progress:r,isUploading:s}},zn=function(){var e=Object(v.g)(),t=Object(x.e)(z).isMobile,n=Kn(),r=n.createStory,i=n.progress,a=n.isUploading,o=function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t[0]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(Xt,{children:Object(S.jsxs)($t,{children:[Object(S.jsxs)(g.b,{to:"/a/stories",children:[Object(S.jsx)(_.a,{name:"arrow left"}),"Back"]}),Object(S.jsxs)(We.a,{centered:!0,stackable:!0,children:[Object(S.jsx)(We.a.Column,{width:10,children:t?Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(An,{primary:!0,basic:!0,fluid:!0,size:"big",onClick:open,children:"Select file"})}):Object(S.jsx)(yn,{children:Object(S.jsx)(Fn,{isUploading:a,progress:i,handleDrop:o})})}),Object(S.jsxs)(We.a.Row,{children:[Object(S.jsx)(We.a.Column,{width:5,children:Object(S.jsxs)(wn,{disabled:a,onClick:function(){return e.push("/a/stories/record/video")},children:[Object(S.jsx)(_.a,{name:"video",size:"big"}),Object(S.jsx)("h3",{children:"Record your video"})]})}),Object(S.jsx)(We.a.Column,{width:5,children:Object(S.jsxs)(wn,{disabled:a,onClick:function(){return e.push("/a/stories/record/audio")},children:[Object(S.jsx)(_.a,{name:"microphone",size:"big"}),Object(S.jsx)("h3",{children:"Record your audio"})]})})]})]})]})})},Jn=n(518),Vn=Object(k.b)(G.a)(Dn||(Dn=Object(C.a)(["\n  margin: unset !important;\n  @media only screen and (max-width: 767px) {\n    margin: 1em !important;\n  }\n"]))),Yn=k.b.div(Bn||(Bn=Object(C.a)(["\n  background-color: black;\n  & > div {\n    max-height: 720px;\n    max-width: 1280px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n"]))),qn=k.b.div(Pn||(Pn=Object(C.a)(["\n  display: flex;\n  flex-flow: row;\n  min-height: 65vh;\n  @media only screen and (max-width: 1024px) {\n    flex-flow: column;\n  }\n"]))),Wn=k.b.div(Qn||(Qn=Object(C.a)(["\n  background-color: #f8f8f8;\n  flex-flow: row;\n  min-width: 650px;\n  padding: 24px 16px;\n  @media only screen and (max-width: 1024px) {\n    flex: 1;\n    width: unset;\n  }\n"]))),Zn=k.b.div(Nn||(Nn=Object(C.a)(["\n  padding: 24px 16px;\n  width: auto;\n  flex: 1;\n"]))),Gn=Object(k.b)(Xt)(Un||(Un=Object(C.a)(["\n  overflow: auto;\n"]))),Hn=Object(k.b)(Jn.a)(Ln||(Ln=Object(C.a)(["\n  &.item {\n    border: 1px solid #e0e1e2 !important;\n    max-height: 200px;\n    min-width: 700px;\n  }\n  &.item > .content {\n    padding: 16px 0px 16px 14px !important;\n    background-color: white !important;\n    & > .description {\n      max-width: fit-content;\n      -webkit-line-clamp: 5;\n      -webkit-box-orient: vertical;\n      display: -webkit-box;\n      overflow: hidden;\n      margin-right: 24px;\n      height: 100px;\n    }\n    & > .description {\n    }\n    & > .meta {\n      display: flex;\n      align-items: center;\n    }\n  }\n  &.item > .lazyImage {\n    background-color: #000000;\n    height: 200px;\n    width: 352px;\n    & > .ui.image img {\n      margin-left: auto;\n      margin-right: auto;\n      max-width: inherit;\n      height: inherit;\n    }\n  }\n\n  @media only screen and (max-width: 1024px) {\n    &.item {\n      height: unset;\n      min-width: unset;\n    }\n  }\n\n  @media only screen and (max-width: 767px) {\n    &.item > .lazyImage {\n      height: unset;\n      width: unset;\n    }\n  }\n"]))),Xn=function(e){var t=e.tab,n=e.showMenu,r=e.onChange,i=Object(x.e)(z),a=i.isMobile;return i.isTablet||a?Object(S.jsx)(Vn,{vertical:!0,children:Object(S.jsx)(H.a,{item:!0,text:t,children:Object(S.jsxs)(H.a.Menu,{children:[Object(S.jsx)(H.a.Item,{onClick:function(){return r("information")},children:"Information"}),n.transcript&&Object(S.jsx)(H.a.Item,{onClick:function(){return r("transcript")},children:"Transcript"}),n.people&&Object(S.jsx)(H.a.Item,{onClick:function(){return r("people")},children:"People"}),n.places&&Object(S.jsx)(H.a.Item,{onClick:function(){return r("places")},children:"Places"}),n.timeline&&Object(S.jsx)(H.a.Item,{onClick:function(){return r("timeline")},children:"Timeline"}),n.gallery&&Object(S.jsx)(H.a.Item,{onClick:function(){return r("gallery")},children:"Gallery"}),n.files&&Object(S.jsx)(H.a.Item,{onClick:function(){return r("files")},children:"Files"}),n.links&&Object(S.jsx)(H.a.Item,{onClick:function(){return r("links")},children:"Links"})]})})}):Object(S.jsxs)(Vn,{pointing:!0,stackable:!0,secondary:!0,children:[Object(S.jsx)(Vn.Item,{name:"Information",active:"information"===t,onClick:function(){return r("information")}}),n.transcript&&Object(S.jsx)(Vn.Item,{name:"Transcript",active:"transcript"===t,onClick:function(){return r("transcript")}}),n.people&&Object(S.jsx)(Vn.Item,{name:"People",active:"people"===t,onClick:function(){return r("people")}}),n.places&&Object(S.jsx)(Vn.Item,{name:"Places",active:"places"===t,onClick:function(){return r("places")}}),n.timeline&&Object(S.jsx)(Vn.Item,{name:"Timeline",active:"timeline"===t,onClick:function(){return r("timeline")}}),n.gallery&&Object(S.jsx)(Vn.Item,{name:"Gallery",active:"gallery"===t,onClick:function(){return r("gallery")}}),n.files&&Object(S.jsx)(Vn.Item,{name:"Files",active:"files"===t,onClick:function(){return r("files")}}),n.links&&Object(S.jsx)(Vn.Item,{name:"Links",active:"links"===t,onClick:function(){return r("links")}})]})},$n=k.b.video(Mn||(Mn=Object(C.a)(["\n  ","\n"])),(function(e){if(e.preview)return Object(k.a)(_n||(_n=Object(C.a)(["\n        & > div.vjs-poster:hover {\n          background-image: url(",") !important;\n        }\n      "])),e.preview)})),er=(n(388),n(727),n(62)),tr=n(525);n.n(tr)()(er.default);var nr,rr,ir,ar,or,sr,cr,lr,ur,dr,pr,hr,fr,br,jr,mr,vr,gr,Or,xr,yr,Ar,wr,Er,Cr,kr,Ir,Sr,Rr,Tr,Dr,Br,Pr,Qr=function(e){var t=e.options,n=e.onReady,r=e.type,i=e.preview,a=b.a.useRef(null),o=b.a.useRef(null);return b.a.useEffect((function(){if(!o.current){var e=a.current;if(!e)return;var r=o.current=Object(er.default)(e,t,(function(){console.log("player is ready"),n&&n(r)}))}}),[t]),b.a.useEffect((function(){return function(){o.current&&(o.current.dispose(),o.current=null)}}),[]),Object(S.jsxs)("div",{"data-vjs-player":!0,children:["video"===r&&Object(S.jsx)($n,{preview:i,ref:a,className:"video-js vjs-big-play-centered"}),"audio"===r&&Object(S.jsx)("audio",{ref:a,className:"video-js vjs-big-play-centered"})]})},Nr=function(e){var t,n=e.options,r=e.preview,i=Object(y.a)(Object(y.a)({},n),{},{controlBar:{subtitlesButton:!!(null===(t=n.tracks)||void 0===t?void 0:t.length),children:["playToggle","progressControl","volumePanel","qualitySelector","fullscreenToggle"]}});return Object(S.jsx)(Qr,{preview:r,options:i,type:"video"})},Ur=k.b.div(nr||(nr=Object(C.a)(["\n  position: relative;\n  & > canvas {\n    position: absolute;\n    top: 0;\n  }\n"]))),Lr=function(e){var t=e.options,n=(e.id,Object(y.a)({},t));return Object(S.jsx)(Ur,{children:Object(S.jsx)(Qr,{options:n,type:"audio"})})},Mr=function(e,t){var n=parseInt(e.replace("p","")),r=parseInt(t.replace("p",""));return n>r?-1:r>n?1:0},_r=function(e){var t=e.subtitles,n=e.media,r=e.type,i=e.defaultRes,a=void 0===i?"720p":i,o=e.cover,s={poster:o,controls:!0,fluid:!0,aspectRatio:"16:9",muted:!1,tracks:t.map((function(e){return{src:e.url,srclang:e.language,language:e.language,label:e.language}}))};if("VIDEO"===r){var c=n.alternatives,l=n.gifs;return s.sources=Object.keys(c).sort(Mr).reduce((function(e,t){var n=t,r=c[n];return(null===r||void 0===r?void 0:r.length)?(e.push({id:r[0].id,src:r[0].url,bitrate:r[0].info.bitRate,duration:r[0].info.duration,height:r[0].info.height,width:r[0].info.width,label:n,selected:n===a,type:"video/mp4"}),e):e}),[]),Object(S.jsx)(Nr,{preview:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=l[Object.keys(l).sort(Mr)[0]];return(null===n||void 0===n?void 0:n.length)?n[0].id?n[0].url:e(t+1):o||""}(),options:s})}if("AUDIO"===r){var u=n.alternatives;return s.sources=u.reduce((function(e,t,n){return e.push({id:t.id,src:t.url,selected:0===n,type:"audio/mp3"}),e}),[]),Object(S.jsx)(Lr,{id:(null===n||void 0===n?void 0:n.id)||"",options:s})}return null},Fr=n(901),Kr=n(851),zr=n(38),Jr=k.b.div(rr||(rr=Object(C.a)(["\n  box-sizing: border-box;\n  border: 1px solid #ddd;\n  cursor: text;\n  padding: 16px;\n  border-radius: 2px;\n  margin-bottom: 2em;\n  box-shadow: inset 0px 1px 8px -3px #ababab;\n  background: #fefefe;\n  &:global(.public-DraftEditor-content) {\n    min-height: 140px;\n  }\n"]))),Vr=n(408),Yr=n(526),qr=n.n(Yr),Wr=["mention","theme"],Zr=function(e){var t=e.mention,n=e.theme,r=Object(ae.a)(e,Wr);return Object(S.jsx)("div",Object(y.a)(Object(y.a)({},r),{},{children:Object(S.jsxs)("div",{className:null===n||void 0===n?void 0:n.mentionSuggestionsEntryContainer,children:[Object(S.jsx)("div",{className:null===n||void 0===n?void 0:n.mentionSuggestionsEntryContainerLeft,children:Object(S.jsx)(Z,{picture:t.avatar,name:t.name})}),Object(S.jsx)("div",{className:null===n||void 0===n?void 0:n.mentionSuggestionsEntryContainerRight,children:Object(S.jsx)("div",{className:null===n||void 0===n?void 0:n.mentionSuggestionsEntryText,children:t.name})})]})}))},Gr=n(527),Hr=b.a.forwardRef((function(e,t){var n=e.mentions,r=e.state,i=e.onChange,a=e.readOnly,o=Object(f.useState)(!1),s=Object(O.a)(o,2),c=s[0],l=s[1],u=Object(f.useState)(n||[]),d=Object(O.a)(u,2),p=d[0],h=d[1],b=Object(f.useMemo)((function(){var e=Object(Vr.a)({entityMutability:"IMMUTABLE",theme:qr.a,mentionPrefix:"@",supportWhitespace:!0});return{plugins:[e],MentionSuggestions:e.MentionSuggestions}}),[]),j=b.MentionSuggestions,m=b.plugins,v=Object(f.useCallback)((function(e){l(e)}),[]),g=Object(f.useCallback)((function(e){var t=e.value;h(Object(Vr.b)(t,n||[]))}),[]),x=Object(S.jsx)(j,{open:c,onOpenChange:v,suggestions:p,onSearchChange:g,entryComponent:Zr,popoverContainer:function(e){var t=e.children;return Object(S.jsx)("div",{children:t})}});return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Gr.a,{readOnly:a,editorKey:"editor",editorState:r,onChange:i,plugins:m,ref:t}),x]})})),Xr=function(e){var t=e.id,n=e.mentions,r=e.createAction,i=Object(f.useRef)(null),a=Object(f.useState)(zr.EditorState.createEmpty()),o=Object(O.a)(a,2),s=o[0],c=o[1],l=function(){var e=Object(Q.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r({body:JSON.stringify(Object(zr.convertToRaw)(s.getCurrentContent())),storyId:t});case 3:c(zr.EditorState.createEmpty()),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Object(fn.toast)({type:"error",title:e.t0.response.data.message,time:3e3,description:"Error: ".concat(e.t0.response.data.code)});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),u=Object(f.useCallback)((function(e){c(e)}),[]);return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Jr,{onClick:function(){var e;null===(e=i.current)||void 0===e||e.focus()},children:Object(S.jsx)(Hr,{mentions:n,onChange:u,state:s,ref:i})}),Object(S.jsx)(E.a,{content:"Send comment",labelPosition:"left",icon:"edit",primary:!0,onClick:l})]})},$r=n(904),ei=n(902),ti=k.b.div(ir||(ir=Object(C.a)(["\n  box-sizing: border-box;\n  border: 1px solid #ddd;\n  cursor: text;\n  padding: 16px;\n  border-radius: 2px;\n  margin-bottom: 2em;\n  box-shadow: inset 0px 1px 8px -3px #ababab;\n  background: #fefefe;\n  &:global(.public-DraftEditor-content) {\n    min-height: 140px;\n  }\n"]))),ni=Object(k.b)(Fr.a)(ar||(ar=Object(C.a)(["\n  background-color: red;\n  & > div.avatar {\n    height: 36px !important;\n    span {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 100%;\n      height: 100%;\n    }\n  }\n  & > * div.avatar {\n    height: 36px !important;\n    span {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 100%;\n      height: 100%;\n    }\n  }\n"]))),ri=n(528),ii=function(e){var t=e.children,n=e.lines,r=void 0===n?3:n,i=e.more,a=void 0===i?"Show more":i,o=e.less,s=void 0===o?"Show less":o,c=e.anchorClass,l=void 0===c?"":c,u=Object(f.useState)(!1),d=Object(O.a)(u,2),p=d[0],h=d[1],b=Object(f.useState)(!1),j=Object(O.a)(b,2),m=j[0],v=j[1],g=function(e){e.preventDefault(),h(!p)};return Object(S.jsxs)("div",{children:[Object(S.jsx)(ri.a,{lines:!p&&r,ellipsis:Object(S.jsxs)("span",{children:["..."," ",Object(S.jsx)("a",{href:"#",className:l,onClick:g,children:a})]}),onTruncate:function(e){e!==m&&v(e)},children:t}),!m&&p&&Object(S.jsxs)("span",{children:[" ",Object(S.jsx)("a",{href:"#",className:l,onClick:g,children:s})]})]})},ai=function(e){var t,n,r=e.comment,i=e.editComment,a=e.deleteComment,o=e.mentions,s=e.id,c=Object(f.useRef)(null),l=Object(f.useState)(zr.EditorState.createWithContent(Object(zr.convertFromRaw)(JSON.parse(r.body)))),u=Object(O.a)(l,2),d=u[0],p=u[1],h=Object(x.e)(Y),b=Object(f.useState)(!1),j=Object(O.a)(b,2),m=j[0],v=j[1],g=Object(f.useCallback)((function(e){p(e)}),[]),y=function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(Q.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(!0),null===(t=c.current)||void 0===t||t.focus();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(Q.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(!1),p(zr.EditorState.createWithContent(Object(zr.convertFromRaw)(JSON.parse(r.body))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(Q.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=JSON.stringify(Object(zr.convertToRaw)(d.getCurrentContent())),e.next=4,i(r.id,{body:t,storyId:s,parentId:r.parentId});case 4:v(!1),Object(fn.toast)({type:"success",title:"Saved",time:3e3}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Object(fn.toast)({type:"error",title:e.t0.response.data.message||e.t0.message,time:3e3,description:"Error: ".concat(e.t0.response.data.code||e.t0.status)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),C=(null===h||void 0===h?void 0:h.id)===r.author.id,k="".concat(r.author.firstName.charAt(0).toUpperCase()+r.author.firstName.slice(1)," ").concat(r.author.lastName.charAt(0).toUpperCase()+r.author.lastName.slice(1));return Object(S.jsxs)(ni,{children:[Object(S.jsx)(ni.Avatar,{as:Z,picture:(null===(t=r.author)||void 0===t||null===(n=t.picture)||void 0===n?void 0:n.thumbnail)||"",name:k}),Object(S.jsxs)(ni.Content,{children:[Object(S.jsx)(ni.Author,{as:"a",children:k}),Object(S.jsx)(ni.Metadata,{children:Object(S.jsx)("span",{children:Object($r.a)(Object(ei.a)(r.updatedAt),new Date,{addSuffix:!0})})}),Object(S.jsx)(ni.Text,{children:m?Object(S.jsx)(ti,{onClick:function(){var e;null===(e=c.current)||void 0===e||e.focus()},children:Object(S.jsx)(Hr,{mentions:o,onChange:g,state:d,ref:c})}):Object(S.jsx)(ii,{lines:3,children:Object(S.jsx)(Hr,{readOnly:!0,mentions:o,onChange:g,state:d})})}),Object(S.jsx)(ni.Actions,{children:C&&Object(S.jsx)(S.Fragment,{children:m?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(ni.Action,{onClick:E,children:"Save"}),Object(S.jsx)(ni.Action,{onClick:w,children:"Cancel"})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(ni.Action,{onClick:function(){A()},children:"Edit"}),Object(S.jsx)(ni.Action,{onClick:function(){y(r.id)},children:"Delete"})]})})})]})]})},oi=function(e){var t=e.id,n=e.comments,r=e.watchers,i=function(e,t){var n=Object(f.useState)(t),r=Object(O.a)(n,2),i=r[0],a=r[1],o=Object(f.useState)(!0),s=Object(O.a)(o,2),c=s[0],l=(s[1],function(){var e=Object(Q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.createComment(t);case 2:n=e.sent,a([n].concat(Object(Gt.a)(i)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u=function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.deleteComment(t);case 2:a(i.filter((function(e){return e.id!==t})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(Q.a)(P.a.mark((function e(t,n){var r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.editComment(t,n);case 2:r=e.sent,a(i.map((function(e){return e.id===r.id?r:e})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return{comments:i,isLoading:c,createComment:l,deleteComment:u,editComment:d}}(0,n),a=i.createComment,o=i.deleteComment,s=i.editComment,c=i.comments,l=null===r||void 0===r?void 0:r.filter((function(e){return null!=e.user})).map((function(e){var t;return{id:e.user.id,name:"".concat(e.user.firstName," ").concat(e.user.lastName),avatar:null===(t=e.user.picture)||void 0===t?void 0:t.thumbnail}}));return Object(S.jsxs)(Fr.a.Group,{threaded:!0,children:[c.map((function(e){return Object(S.jsx)(ai,{comment:e,mentions:l,id:t,deleteComment:o,editComment:s},e.id)})),Object(S.jsx)(Kr.a,{reply:!0,children:Object(S.jsx)(Xr,{mentions:l,createAction:a,id:t})})]})},si=k.b.div(or||(or=Object(C.a)(["\n  font-size: 20px;\n  font-style: normal;\n  font-weight: 700;\n  line-height: 24px;\n  letter-spacing: 0em;\n  text-align: left;\n  margin-bottom: 24px;\n"]))),ci=k.b.div(sr||(sr=Object(C.a)(["\n  font-size: 16px;\n"]))),li=k.b.div(cr||(cr=Object(C.a)(["\n  display: flex;\n  flex-flow: row;\n  align-items: center;\n  & > span {\n    margin-left: 16px;\n  }\n"]))),ui=k.b.div(lr||(lr=Object(C.a)(["\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 20px;\n  letter-spacing: 0em;\n  text-align: left;\n"]))),di=function(e){var t,n,r,i,a,o=e.storyId,s=e.description,c=e.title,l=e.subTitle,u=e.owner,d=e.watchers,p=e.comments,h="".concat((null===(t=u.firstName)||void 0===t?void 0:t.charAt(0).toUpperCase())+(null===(n=u.firstName)||void 0===n?void 0:n.slice(1))," ").concat((null===(r=u.lastName)||void 0===r?void 0:r.charAt(0).toUpperCase())+(null===(i=u.lastName)||void 0===i?void 0:i.slice(1)));return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(si,{children:c}),l&&Object(S.jsx)(ci,{children:l}),Object(S.jsx)(ii,{children:Object(S.jsx)(ui,{children:s})}),Object(S.jsx)(w.a,{as:"h3",dividing:!0,children:"About the author"}),Object(S.jsxs)(li,{children:[Object(S.jsx)(Z,{name:h,picture:null===u||void 0===u||null===(a=u.picture)||void 0===a?void 0:a.thumbnail}),Object(S.jsx)("span",{children:h})]}),Object(S.jsx)(ii,{children:Object(S.jsx)(ui,{children:u.about})}),Object(S.jsx)(w.a,{as:"h3",dividing:!0,children:"Comments"}),Object(S.jsx)(oi,{comments:p,watchers:d,id:o})]})},pi=n(404),hi=n(900),fi=Object(k.b)(hi.a)(ur||(ur=Object(C.a)(["\n  & > .ui.segment.item {\n    padding: 12px;\n    i {\n      vertical-align: middle;\n    }\n  }\n"]))),bi=(k.b.div(dr||(dr=Object(C.a)(["\n  display: table-cell;\n  vertical-align: middle;\n  div {\n    display: flex;\n    .ui.button {\n      background-color: unset;\n    }\n  }\n"]))),function(e){var t=e.links;return Object(S.jsx)(fi,{relaxed:"very",size:"big",children:t.map((function(e){return Object(S.jsxs)(fi.Item,{item:"true",as:pi.a,children:[Object(S.jsx)(_.a,{name:"chain",size:"big"}),Object(S.jsx)(fi.Content,{verticalAlign:"middle",children:Object(S.jsx)(fi.Header,{children:Object(S.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:Object(S.jsx)("b",{children:e.url})})})})]},e.id)}))})}),ji=function(e){var t=e.links;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(w.a,{as:"h1",children:"List of links"}),Object(S.jsx)(bi,{links:t})]})},mi=Object(k.b)(hi.a)(pr||(pr=Object(C.a)(["\n  padding-bottom: 30px !important;\n  padding-right: 8px !important;\n\n  @media only screen and (max-width: 1024px) {\n    height: unset;\n    padding-bottom: unset;\n    padding-right: unset;\n  }\n\n  & > .ui.segment.item {\n    padding: 12px;\n    i {\n      vertical-align: middle;\n    }\n  }\n"]))),vi=function(e){var t=e.files;return Object(S.jsx)(mi,{relaxed:"very",size:"big",children:t.map((function(e){return Object(S.jsxs)(mi.Item,{item:"true",as:pi.a,children:[Object(S.jsx)(_.a,{name:"file alternate outline",size:"big"}),Object(S.jsx)(mi.Content,{verticalAlign:"middle",children:Object(S.jsx)(mi.Header,{children:Object(S.jsx)("a",{href:e.url,children:Object(S.jsx)("b",{children:e.originalName})})})})]},e.id)}))})},gi=function(e){var t=e.files;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(w.a,{as:"h1",children:"List of files"}),Object(S.jsx)(vi,{files:t})]})},Oi=k.b.div(hr||(hr=Object(C.a)(["\n  display: flex;\n  flex-flow: wrap;\n  padding-bottom: 30px !important;\n  padding-right: 8px !important;\n\n  @media only screen and (max-width: 1024px) {\n    height: unset;\n    padding-bottom: unset;\n    padding-right: unset;\n  }\n\n  & > .ui.segment.item {\n    padding: 12px;\n  }\n"]))),xi=k.b.div(fr||(fr=Object(C.a)(["\n  cursor: pointer;\n  width: 250px;\n  height: 285px;\n  padding: 8px;\n  position: relative;\n"]))),yi=k.b.div(br||(br=Object(C.a)(["\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.85);\n  display: flex;\n  justify-content: center;\n  & > .ui.image {\n    object-fit: contain;\n    width: unset;\n    height: unset;\n  }\n"]))),Ai=k.b.div(jr||(jr=Object(C.a)(["\n  display: flex;\n  flex-flow: column;\n"]))),wi=k.b.div(mr||(mr=Object(C.a)(["\n  max-width: 90vw;\n  min-width: 85vw;\n  height: 95vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  img {\n    object-fit: contain;\n    width: 100%;\n    height: 100%;\n  }\n  @media only screen and (max-width: 767px) {\n    height: 85vh;\n  }\n"]))),Ei=k.b.div(vr||(vr=Object(C.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  @media only screen and (max-width: 767px) {\n    flex-flow: column;\n  }\n"]))),Ci=k.b.div(gr||(gr=Object(C.a)(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  & > i {\n    cursor: pointer;\n  }\n"]))),ki=k.b.div(Or||(Or=Object(C.a)(["\n  display: flex;\n  justify-content: flex-end;\n  position: absolute;\n  bottom: 10px;\n  right: 10px;\n"]))),Ii=Object(k.b)(E.a)(xr||(xr=Object(C.a)(["\n  &.ui.button {\n    background-color: rgba(255, 255, 255, 0.5);\n    box-shadow: unset;\n    color: white;\n    margin: 0.25em;\n  }\n"]))),Si=function(e){var t=e.images,n=e.onNextClick,r=e.onPrevClick,i=e.show,a=void 0!==i&&i,o=e.index,s=e.onClose,c=Object(x.e)(Ve),l=Object(f.useState)(null),u=Object(O.a)(l,2),d=u[0],p=u[1],h=Object(f.useState)(!0),b=Object(O.a)(h,2),j=b[0],m=b[1];Object(f.useEffect)((function(){var e;t.length&&null!==o&&(p(t[o]),m(!(null===(e=t[o])||void 0===e?void 0:e.thumbnail)))}),[o,t]),Object(f.useEffect)((function(){if(d){var e=d.id;if(c[e]){var t=c[e],n=t.payload,r=t.finished;m(!0),r&&(m(!1),p(n))}}}),[c,d]);return Object(S.jsx)(en.a,{active:a,page:!0,children:Object(S.jsxs)(Ai,{children:[Object(S.jsx)(Ci,{children:Object(S.jsx)(_.a,{name:"close",size:"big",onClick:s})}),Object(S.jsxs)(Ei,{children:[(o||0)>0&&Object(S.jsx)(Ii,{icon:"angle left",circular:!0,size:"big",onClick:function(){m(!0),r()},disabled:0===o}),Object(S.jsx)(wi,{children:j?Object(S.jsx)(tn.a,{active:!0,inverted:!0,children:"Loading..."}):Object(S.jsx)(Ze.a,{src:null===d||void 0===d?void 0:d.thumbnail})}),(o||0)<t.length-1&&Object(S.jsx)(Ii,{icon:"angle right",circular:!0,size:"big",onClick:function(){m(!0),n()},disabled:o===t.length})]}),Object(S.jsxs)(ki,{children:[null===d||void 0===d?void 0:d.originalName," | ",(o||0)+1," of ",t.length]})]})})},Ri=function(e){var t=e.image,n=e.onClick,r=Object(x.e)(Ve),i=Object(f.useState)(!t.thumbnail),a=Object(O.a)(i,2),o=a[0],s=a[1],c=Object(f.useState)(t.thumbnail),l=Object(O.a)(c,2),u=l[0],d=l[1],p=t.id;return Object(f.useEffect)((function(){if(r[p]){var e=r[p],t=e.payload,n=e.finished;s(!0),n&&(s(!1),d(t.thumbnail))}}),[r]),Object(S.jsx)(xi,{children:Object(S.jsx)(yi,{children:o?Object(S.jsx)(tn.a,{active:!0,inverted:!0,children:"Processing..."}):Object(S.jsx)(Ze.a,{src:u,onClick:n,size:"big"})})})},Ti=function(e){var t=e.galleries,n=Object(f.useState)(0),r=Object(O.a)(n,2),i=r[0],a=r[1],o=Object(f.useState)(!1),s=Object(O.a)(o,2),c=s[0],l=s[1];return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Oi,{children:t.map((function(e,t){return Object(S.jsx)(Ri,{image:e.image,onClick:function(){return function(e){a(e),l(!0)}(t)}},e.id)}))}),Object(S.jsx)(Si,{images:t.map((function(e){return e.image})),index:i,show:c,onNextClick:function(){null!==i&&a(i+1)},onPrevClick:function(){null!==i&&a(i-1)},onClose:function(){l(!1),a(null)}})]})},Di=Object(k.b)(hi.a)(yr||(yr=Object(C.a)(["\n  padding-bottom: 30px !important;\n  padding-right: 8px !important;\n\n  @media only screen and (max-width: 1024px) {\n    height: unset;\n    padding-bottom: unset;\n    padding-right: unset;\n  }\n\n  & > .ui.segment.item {\n    padding: 12px;\n  }\n"]))),Bi=function(e){var t=e.persons;return Object(S.jsx)(Di,{relaxed:"very",size:"big",children:t.map((function(e){var t;return Object(S.jsxs)(Di.Item,{item:"true",as:pi.a,children:[Object(S.jsx)("div",{className:"ui image",children:Object(S.jsx)(Z,{name:e.name,picture:null===(t=e.picture)||void 0===t?void 0:t.thumbnail})}),Object(S.jsxs)(Di.Content,{verticalAlign:"middle",children:[Object(S.jsx)(Di.Header,{children:e.name}),Object(S.jsxs)(Di.Description,{children:[Object(S.jsx)("a",{href:e.link,target:"_blank",rel:"noreferrer",children:Object(S.jsx)("b",{children:e.link})})," "]})]})]},e.id)}))})},Pi=function(e){var t=e.persons,n=void 0===t?[]:t;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(w.a,{as:"h1",children:"List of people"}),Object(S.jsx)(Bi,{persons:n})]})},Qi=k.b.div(Ar||(Ar=Object(C.a)(["\n  & > * div.card-description {\n    word-break: break-all;\n  }\n  & > * section.timeline-card-content {\n    min-height: unset;\n  }\n"]))),Ni=n(529),Ui=n(907),Li=n(909),Mi=function(e){var t=e.ocurrencies,n=t.map((function(e){console.log("as");var t=Object(Ui.a)(e.at,"yyyy-MM-dd'T'HH:mm:ss'Z'",new Date);return{title:Object(Li.a)(t,new Date)}}));return Object(S.jsx)(Qi,{children:Object(S.jsx)(Ni.a,{items:n,mode:"VERTICAL",children:t.map((function(e){return Object(S.jsxs)(f.Fragment,{children:[Object(S.jsx)(w.a,{children:e.title}),e.description&&Object(S.jsx)(ii,{children:e.description})]},e.id)}))})})},_i=(Object(k.b)(E.a)(wr||(wr=Object(C.a)(["\n  &.ui.button {\n    margin-top: 12px;\n    margin-bottom: 12px;\n  }\n"]))),k.b.div(Er||(Er=Object(C.a)(["\n  & > .transcript-wrapper {\n    > .transcript-editor {\n      overflow: auto;\n    }\n  }\n"])))),Fi=n(355),Ki=n.n(Fi),zi=n(356),Ji=(n(502),function(e){e.children;var t=e.transcription,n=Object(f.useState)((function(){if(!t)return zr.EditorState.createEmpty();var e=Ki()(t.content),n=zr.ContentState.createFromBlockArray(e.contentBlocks);return zr.EditorState.createWithContent(n)})),r=Object(O.a)(n,1)[0];return Object(S.jsx)(_i,{children:Object(S.jsx)(zi.Editor,{editorState:r,wrapperClassName:"transcript-wrapper",editorClassName:"transcript-editor",readOnly:!0,toolbarHidden:!0})})}),Vi=Object(k.b)(hi.a)(Cr||(Cr=Object(C.a)(["\n  overflow: auto;\n  padding-bottom: 30px !important;\n  padding-right: 8px !important;\n\n  @media only screen and (max-width: 1024px) {\n    padding-bottom: unset;\n    padding-right: unset;\n  }\n"]))),Yi=k.b.div(kr||(kr=Object(C.a)(["\n  position: relative;\n  min-width: 500px;\n  & > div:not(:last-child) {\n    padding: 8px 16px;\n  }\n  & > div:last-child {\n    height: 260px;\n  }\n\n  @media only screen and (max-width: 1024px) {\n    min-width: unset;\n  }\n"]))),qi=(n(841),n(260)),Wi=n.n(qi),Zi=n(530),Gi=n(531),Hi=function(e){var t=e.position,n=e.markers,r=Object(f.useRef)(null),i=Object(f.useState)(null),a=Object(O.a)(i,2),o=a[0],s=a[1],c=Wi.a.icon({iconUrl:Zi.a,shadowUrl:Gi.a});return Object(f.useEffect)((function(){r.current&&s(Wi.a.map(r.current).setView(t,20))}),[r]),Object(f.useEffect)((function(){o&&(Wi.a.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoicGhpbGlwZWNhcnJhenpvbmkiLCJhIjoiY2tyMWhmMmhmMjF2djJvcGF0NDEwbXE5eCJ9.F30oIQhfwLRHrl5pRgdz4g",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"your.mapbox.access.token"}).addTo(o),n.forEach((function(e){return Wi.a.marker(e,{icon:c}).addTo(o)})))}),[n,o]),Object(S.jsx)("div",{ref:r})},Xi=function(e){var t=e.places;return Object(S.jsx)(Vi,{children:t.map((function(e){var t=[Number(e.latitude),Number(e.longitude)];return Object(S.jsxs)(Yi,{item:"true",as:pi.a,children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:Object(S.jsx)("label",{children:"Name:"})})," ",e.name]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:Object(S.jsx)("label",{children:"Description:"})})," ",e.description]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:Object(S.jsx)("label",{children:"Address:"})})," ",e.location]}),Object(S.jsx)(Hi,{position:t,markers:[t]})]},e.id)}))})},$i=function(e){var t,n=e.story,r=Object(f.useState)(!1),i=Object(O.a)(r,2),a=i[0],o=i[1],s=n.video,c=n.owner,l=n.type,u=Nt({video:s}).preview,d="".concat(c.firstName.charAt(0).toUpperCase()+c.firstName.slice(1)," ").concat(c.lastName.charAt(0).toUpperCase()+c.lastName.slice(1));return Object(S.jsxs)(Hn,{onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},children:[Object(S.jsx)(It,{className:"".concat(null===l||void 0===l?void 0:l.toLowerCase()),src:a?u:n.thumbnail,wrapped:!0,rounded:!1}),Object(S.jsxs)(Hn.Content,{children:[Object(S.jsx)(Hn.Header,{as:g.b,to:"/a/stories/".concat(n.id),children:n.title}),Object(S.jsx)(Hn.Description,{children:n.description}),Object(S.jsxs)(Hn.Meta,{children:[Object(S.jsx)(Z,{name:d,picture:null===(t=c.picture)||void 0===t?void 0:t.thumbnail}),Object(S.jsx)("span",{children:d})]})]})]})},ea=function(e){var t=e.stories,n=void 0===t?[]:t;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(w.a,{as:"h3",dividing:!0,children:"Related stories"}),Object(S.jsx)(Hn.Group,{children:n.map((function(e){return Object(S.jsx)($i,{story:e},e.id)}))})]})},ta=function(){var e,t=Object(v.h)(),n=t.search,r=t.pathname,i=Object(v.g)(),a=Object(De.parse)(n,{ignoreQueryPrefix:!0}),o=a.tab,s=Object(v.i)().storyId,c=function(e){var t=Object(f.useState)({}),n=Object(O.a)(t,2),r=n[0],i=n[1],a=Object(f.useState)(!0),o=Object(O.a)(a,2),s=o[0],c=o[1],l=Object(v.g)(),u=Object(f.useCallback)(Object(Q.a)(P.a.mark((function t(){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.prev=1,t.t0=i,t.next=5,Se.getStory(e);case 5:t.t1=t.sent,(0,t.t0)(t.t1),t.next=18;break;case 9:if(t.prev=9,t.t2=t.catch(1),403!==t.t2.response.status){t.next=13;break}return t.abrupt("return",l.replace("/a/403"));case 13:if(404!==t.t2.response.status){t.next=15;break}return t.abrupt("return",l.replace("/a/404"));case 15:if(400!==t.t2.response.status){t.next=17;break}return t.abrupt("return",l.replace("/a/404"));case 17:throw t.t2;case 18:return t.prev=18,c(!1),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[1,9,18,21]])}))),[e]);return Object(f.useEffect)((function(){u()}),[e]),{story:r,isLoading:s,getStory:u}}(s),l=c.story,u=c.isLoading,d=l.type,p=l.video,h=l.audio,b=l.thumbnail,j=l.owner,m=l.title,g=l.description,x=l.collections,A=l.comments,w=l.persons,E=l.files,C=l.links,k=l.transcription,I=l.galleryEntries,R=l.timelineEntries,T=l.places,D=l.watchers,B=l.subtitles,N={transcript:!!k,people:!!(null===w||void 0===w?void 0:w.length),places:!!(null===T||void 0===T?void 0:T.length),timeline:!!(null===R||void 0===R?void 0:R.length),gallery:!!(null===I||void 0===I?void 0:I.length),files:!!(null===E||void 0===E?void 0:E.length),links:!!(null===C||void 0===C?void 0:C.length)},U=function(e,t){var n=Object(De.stringify)(Object(y.a)(Object(y.a)({},a),{},{tab:e}),{addQueryPrefix:!0});t?i.replace({pathname:r,search:n}):i.push({pathname:r,search:n})};Object(f.useEffect)((function(){o||U("information",!0),u||N[o]||U("information",!0)}),[o,u]);return Object(S.jsx)(nn,{isLoading:u,children:Object(S.jsxs)(Gn,{children:[Object(S.jsx)(Yn,{children:Object(S.jsx)("div",{children:Object(S.jsx)(_r,{subtitles:B||[],type:d,media:p||h,cover:b})})}),Object(S.jsx)(Xn,{tab:o,onChange:U,showMenu:N}),Object(S.jsxs)(qn,{children:[Object(S.jsx)(Zn,{children:function(){var e;switch(o){case"places":return Object(S.jsx)(Xi,{places:T||[]});case"people":return Object(S.jsx)(Pi,{persons:w||[]});case"transcript":return Object(S.jsx)(Ji,{transcription:k});case"timeline":return Object(S.jsx)(Mi,{ocurrencies:R||[]});case"gallery":return Object(S.jsx)(Ti,{galleries:I||[]});case"files":return Object(S.jsx)(gi,{files:E||[]});case"links":return Object(S.jsx)(ji,{links:C||[]});default:return Object(S.jsx)(di,{storyId:s,subTitle:x&&(null===(e=x[0])||void 0===e?void 0:e.title)||"",title:m,description:g,owner:j,comments:A||[],watchers:D||[]})}}()}),!!(null===x||void 0===x?void 0:x.length)&&!!x[0].stories.length&&Object(S.jsx)(Wn,{children:Object(S.jsx)(ea,{stories:null===(e=x[0])||void 0===e?void 0:e.stories})})]})]})})},na=function(e){var t=e.tab,n=e.onChange,r=Object(x.e)(z),i=r.isMobile;return r.isTablet||i?Object(S.jsx)(G.a,{vertical:!0,children:Object(S.jsx)(H.a,{item:!0,text:t,children:Object(S.jsxs)(H.a.Menu,{children:[Object(S.jsx)(H.a.Item,{onClick:function(){return n("information")},children:"Information"}),Object(S.jsx)(H.a.Item,{onClick:function(){return n("transcript")},children:"Transcript"}),Object(S.jsx)(H.a.Item,{onClick:function(){return n("people")},children:"People"}),Object(S.jsx)(H.a.Item,{onClick:function(){return n("places")},children:"Places"}),Object(S.jsx)(H.a.Item,{onClick:function(){return n("timeline")},children:"Timeline"}),Object(S.jsx)(H.a.Item,{onClick:function(){return n("gallery")},children:"Gallery"}),Object(S.jsx)(H.a.Item,{onClick:function(){return n("subtitles")},children:"Subtitles"}),Object(S.jsx)(H.a.Item,{onClick:function(){return n("files")},children:"Files"}),Object(S.jsx)(H.a.Item,{onClick:function(){return n("links")},children:"Links"}),Object(S.jsx)(H.a.Item,{onClick:function(){return n("share")},children:"Share"})]})})}):Object(S.jsxs)(G.a,{pointing:!0,stackable:!0,secondary:!0,children:[Object(S.jsx)(G.a.Item,{name:"Information",active:"information"===t,onClick:function(){return n("information")}}),Object(S.jsx)(G.a.Item,{name:"Transcript",active:"transcript"===t,onClick:function(){return n("transcript")}}),Object(S.jsx)(G.a.Item,{name:"People",active:"people"===t,onClick:function(){return n("people")}}),Object(S.jsx)(G.a.Item,{name:"Places",active:"places"===t,onClick:function(){return n("places")}}),Object(S.jsx)(G.a.Item,{name:"Timeline",active:"timeline"===t,onClick:function(){return n("timeline")}}),Object(S.jsx)(G.a.Item,{name:"Gallery",active:"gallery"===t,onClick:function(){return n("gallery")}}),Object(S.jsx)(G.a.Item,{name:"Subtitles",active:"subtitles"===t,onClick:function(){return n("subtitles")}}),Object(S.jsx)(G.a.Item,{name:"Files",active:"files"===t,onClick:function(){return n("files")}}),Object(S.jsx)(G.a.Item,{name:"Links",active:"links"===t,onClick:function(){return n("links")}}),Object(S.jsx)(G.a.Item,{name:"Share",active:"share"===t,onClick:function(){return n("share")}})]})},ra=et.b().shape({title:et.d().required()}),ia=k.b.div(Ir||(Ir=Object(C.a)(["\n  margin-top: 20px;\n  text-align: center;\n  height: 124px;\n  width: 219px;\n  &.ui.placeholder.segment {\n    min-height: unset;\n  }\n  & > .ui.header,\n  & > .ui.icon.header .icon {\n    font-size: 1em;\n  }\n  @media only screen and (max-width: 1024px) {\n    height: 124px;\n    width: 219px;\n    &.ui.placeholder.segment {\n      min-height: unset;\n    }\n  }\n  &.ui.placeholder.segment {\n    border-width: 2px;\n    border-radius: 2px;\n    ",";\n    border-style: dashed;\n    background-color: #fafafa;\n    ",";\n  }\n  &.ui.placeholder .header {\n    margin: 1em;\n  }\n  &.ui.placeholder .header:not(:first-child):before {\n    content: unset;\n  }\n  &.ui.placeholder button {\n    margin-top: 1em;\n  }\n"])),(function(e){var t=e.isDragActive,n=e.isDragAccept;return e.isDragReject?Object(k.a)(Sr||(Sr=Object(C.a)(["\n          border-color: #ff1744;\n        "]))):n?Object(k.a)(Rr||(Rr=Object(C.a)(["\n          border-color: #00e676;\n        "]))):t?Object(k.a)(Tr||(Tr=Object(C.a)(["\n          border-color: #2196f3;\n        "]))):Object(k.a)(Dr||(Dr=Object(C.a)(["\n        border-color: #eeeeee;\n      "])))}),(function(e){var t=e.thumbSrc;if(t)return Object(k.a)(Br||(Br=Object(C.a)(["\n          background-image: url(",");\n          background-size: contain;\n          background-repeat: no-repeat;\n          background-position: center;\n        "])),t)}));ia.defaultProps={className:"ui placeholder segment"};var aa,oa,sa,ca,la,ua,da,pa,ha,fa,ba,ja,ma,va,ga,Oa,xa,ya,Aa,wa,Ea,Ca,ka,Ia,Sa,Ra,Ta,Da,Ba,Pa,Qa,Na,Ua,La=Object(k.b)(E.a)(Pr||(Pr=Object(C.a)(["\n  &.button,\n  &.ui.basic.black.button {\n    box-shadow: unset !important;\n  }\n"]))),Ma=function(e,t){var n=Object(f.useState)(0),r=Object(O.a)(n,2),i=r[0],a=r[1],o=Object(f.useRef)(null),s=Object(f.useState)(!1),c=Object(O.a)(s,2),l=c[0],u=c[1],d=Object(f.useState)(new Ke.a),p=Object(O.a)(d,1)[0],h=Object(f.useCallback)((function(){u(!0),p.configure({webSocketFactory:function(){return new Je.a("/api/ws?jwt=".concat(function(){var e=localStorage.getItem("token");return e?JSON.parse(e):null}()))},onConnect:function(){p.subscribe("/user/queue/media-progress",(function(e){var n=JSON.parse(e.body),r=n.total,i=n.current,s=n.id;if(o.current&&o.current===s){var c=Math.round(i/r*100);a(c),i===r&&u(!1),t&&t(s)}}))}}),p.activate()}),[p,e,t]);return Object(f.useEffect)((function(){o.current=e}),[o,e]),Object(f.useEffect)((function(){!l&&p.connected&&p.deactivate()}),[l,p]),{coverProgress:i,isProcessingCover:l,startProcess:h}},_a=function(e){var t=e.onIdChange,n=e.message,r=e.noClick,i=void 0===r||r,a=e.ButtonLabel,o=void 0===a?"Upload":a,s=function(e){var t=e.cover,n=Object(f.useState)(!1),r=Object(O.a)(n,2),i=r[0],a=r[1],o=Object(f.useState)(0),s=Object(O.a)(o,2),c=s[0],l=s[1],u=Object(f.useState)(t),d=Object(O.a)(u,2),p=d[0],h=d[1];return{coverInfo:p,uploadProgress:c,isUploadingCover:i,upload:function(){var e=Object(Q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,Se.uploadImage(t,(function(e){var t=e.loaded,n=e.total,r=Math.round(100*t/n)-1;l(r<0?0:r)}));case 3:n=e.sent,l(100),a(!1),h(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCoverInfo:Object(f.useCallback)(function(){var e=Object(Q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.getImage(t);case 2:n=e.sent,h(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p]),removeCover:Object(f.useCallback)(Object(Q.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(void 0);case 1:case"end":return e.stop()}}),e)}))),[p])}}({cover:e.cover}),c=s.coverInfo,l=s.uploadProgress,u=s.isUploadingCover,d=s.upload,p=s.getCoverInfo,h=s.removeCover,b=Ma(null===c||void 0===c?void 0:c.id,p),j=b.coverProgress,m=b.isProcessingCover,v=b.startProcess;Object(f.useEffect)((function(){t(null===c||void 0===c?void 0:c.id)}),[c]);var g=function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t[0]);case 2:v();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=Object(Rn.a)({accept:["image/*"],noClick:i,noKeyboard:!0,onDrop:g}),A=x.open,C=x.getRootProps,k=x.getInputProps,I=x.isDragActive,R=x.isDragAccept,T=x.isDragReject;return Object(S.jsxs)(We.a,{style:{margin:0},children:[Object(S.jsx)(We.a.Row,{children:Object(S.jsxs)(ia,Object(y.a)(Object(y.a)({},C()),{},{thumbSrc:(null===c||void 0===c?void 0:c.thumbnail)||"",isDragActive:I,isDragAccept:R,isDragReject:T,children:[Object(S.jsx)("input",Object(y.a)({},k())),u&&Object(S.jsx)(nn,{isLoading:u,progress:l}),m&&Object(S.jsx)(nn,{isLoading:m,progress:j,message:"Processing cover..."}),!u&&!m&&Object(S.jsx)(S.Fragment,{children:!(null===c||void 0===c?void 0:c.thumbnail)&&Object(S.jsxs)(w.a,{icon:!0,children:[Object(S.jsx)(_.a,{name:"upload"}),"Drag and drop your cover"]})})]}))}),n&&Object(S.jsx)(We.a.Row,{children:Object(S.jsx)("div",{children:n})}),Object(S.jsxs)(We.a.Row,{children:[Object(S.jsx)(E.a,{type:"button",primary:!0,basic:!0,onClick:A,children:o}),Object(S.jsx)(La,{type:"button",disabled:!(null===c||void 0===c?void 0:c.thumbnail),color:"black",basic:!0,onClick:h,children:"Remove"})]})]})},Fa=function(e){var t=e.open,n=e.onClose,r=Object(f.useState)(),i=Object(O.a)(r,2),a=i[0],o=i[1],s={createCollection:function(){var e=Object(Q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.createCollection(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}.createCollection,c=function(){var e=Object(Q.a)(P.a.mark((function e(t,r){var i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({title:t.title,coverId:a});case 2:i=e.sent,n(i),r.resetForm();case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(S.jsx)(N.d,{initialValues:{title:""},validationSchema:ra,onSubmit:c,children:function(e){var r=e.isSubmitting,i=e.handleSubmit;return Object(S.jsxs)(A.a,{open:t,size:"tiny",children:[Object(S.jsx)(w.a,{content:"New collection"}),Object(S.jsx)(A.a.Content,{image:!0,children:Object(S.jsxs)(I,{children:[Object(S.jsx)(ut,{name:"title",label:"Title",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}}),Object(S.jsx)(_a,{onIdChange:o,noClick:!1,ButtonLabel:"Upload cover"})]})}),Object(S.jsxs)(A.a.Actions,{children:[Object(S.jsx)(E.a,{negative:!0,disabled:r,loading:r,type:"button",onClick:function(){return n()},basic:!0,children:"Cancel"}),Object(S.jsx)(E.a,{primary:!0,disabled:r,loading:r,onClick:function(){i()},children:"Save"})]})]})}})},Ka=(k.b.div(aa||(aa=Object(C.a)(["\n  padding-bottom: 100px;\n"]))),k.b.div(oa||(oa=Object(C.a)(["\n  display: flex;\n  & > div:first-child {\n    @media only screen and (max-width: 1024px) {\n      order: 1;\n    }\n    flex: 1;\n    margin-right: 8px;\n  }\n\n  & > div:last-child {\n    margin-top: 20px;\n    margin-bottom: 32px;\n  }\n"])))),za=function(){var e=function(){var e=Object(f.useState)([]),t=Object(O.a)(e,2),n=t[0],r=t[1],i=Object(f.useState)(!1),a=Object(O.a)(i,2),o=a[0],s=a[1],c=Object(f.useCallback)(Object(Q.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,Se.getCollections(0,1e3);case 4:t=e.sent,n=t.content,r(n.map((function(e){return{key:e.id,value:e.id,text:e.title}})));case 7:return e.prev=7,s(!1),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[1,,7,10]])}))),[]);return Object(f.useEffect)((function(){c()}),[]),{collectionList:n,isLoading:o,setCollectionList:r}}(),t=e.collectionList,n=e.isLoading,r=e.setCollectionList,i=Object(f.useState)(!1),a=Object(O.a)(i,2),o=a[0],s=a[1],c=Object(N.h)().setFieldValue;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(ut,{name:"title",placeholder:"Add a title",label:"Title",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}}),Object(S.jsx)(ht,{name:"description",label:"Description",placeholder:"Talk about your video",rows:26,onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}}),Object(S.jsxs)(Ka,{children:[Object(S.jsx)(jt,{loading:n,options:t,label:"Collection",name:"collections",placeholder:"Select",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}}),Object(S.jsx)("div",{children:Object(S.jsx)(E.a,{id:"publish",type:"button",primary:!0,onClick:function(){return s(!0)},children:"New collection"})})]}),Object(S.jsx)(Fa,{open:o,onClose:function(e){e&&(r([{key:e.id,value:e.id,text:e.title}].concat(Object(Gt.a)(t))),c("collections",e.id)),s(!1)}})]})},Ja=k.b.div(sa||(sa=Object(C.a)(["\n  display: flex;\n  @media only screen and (max-width: 1024px) {\n    flex-direction: column;\n    align-items: center;\n    flex-flow: column;\n    overflow-x: hidden;\n    & :nth-child(1) {\n      order: 2;\n    }\n    & :nth-child(2) {\n      order: 1;\n    }\n    & > div {\n      flex: 1;\n      width: 100%;\n    }\n  }\n\n  @media only screen and (max-width: 767px) {\n    height: calc(100% - 140px);\n  }\n"]))),Va=k.b.div(ca||(ca=Object(C.a)(["\n  padding: 0 12px;\n  flex: 1;\n  @media only screen and (max-width: 1024px) {\n    flex: unset;\n    margin-top: 20px;\n  }\n"]))),Ya=k.b.div(la||(la=Object(C.a)(["\n  width: fit-content;\n  padding: 0 12px;\n  min-width: 450px;\n  max-width: 720px;\n  flex: 1;\n"]))),qa=k.b.div(ua||(ua=Object(C.a)(["\n  margin-bottom: 12px;\n"]))),Wa=k.b.div(da||(da=Object(C.a)(["\n  display: flex;\n  justify-content: flex-start;\n  margin-bottom: 12px;\n  @media only screen and (max-width: 1024px) {\n    flex-flow: row-reverse;\n  }\n"]))),Za=Object(k.b)(Ja)(pa||(pa=Object(C.a)(["\n  @media only screen and (max-width: 1024px) {\n    height: calc(100% - 188px);\n  }\n"]))),Ga=function(e){var t,n=e.isLoading,r=e.story,i=e.updateStory,a=e.children,o=r.title,s=void 0===o?"":o,c=r.published,l=void 0!==c&&c,u=r.collections,d=void 0===u?[]:u,p=r.watchers,h=void 0===p?[]:p,b=r.description,j=void 0===b?"":b,m=r.cover,v=void 0===m?{id:""}:m,g=Object(f.useState)(),x=Object(O.a)(g,2),y=x[0],A=x[1],w=Object(f.useCallback)(function(){var e=Object(Q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={coverId:y,title:t.title,description:t.description,collections:[t.collections]},e.prev=1,e.next=4,i(n);case 4:Object(fn.toast)({type:"success",title:"Saved",time:3e3}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Object(fn.toast)({type:"error",title:e.t0.response.data.message,time:3e3,description:"Error: ".concat(e.t0.response.data.code)});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),[y]),C={title:s||"",collections:(null===(t=d[0])||void 0===t?void 0:t.id)||"",watchers:h||[],description:j||"",watcherShare:"",published:l};return Object(S.jsx)(nn,{isLoading:n,children:Object(S.jsx)(N.d,{initialValues:C,onSubmit:w,children:function(e){var t=e.handleSubmit;return Object(S.jsx)(N.c,{children:Object(S.jsxs)(Za,{children:[Object(S.jsxs)(Va,{children:[Object(S.jsx)(Wa,{children:Object(S.jsx)(E.a,{id:"publish",type:"button",primary:!0,onClick:function(){t()},children:"Save"})}),Object(S.jsx)(za,{})]}),Object(S.jsxs)(Ya,{children:[a,Object(S.jsx)(_a,{onIdChange:A,cover:v,ButtonLabel:"Change cover",message:"Add an image that displays when people see your story."})]})]})})}})})},Ha=Object(k.b)(E.a)(ha||(ha=Object(C.a)(["\n  &.ui.button {\n    margin-bottom: 12px;\n  }\n"]))),Xa=k.b.div(fa||(fa=Object(C.a)(["\n  & > .transcript-wrapper {\n    height: 40em;\n    > .transcript-editor {\n      height: 33.5em;\n      overflow: auto;\n      border: 1px solid #f1f1f1;\n    }\n  }\n"]))),$a=n(532),eo=n.n($a),to=function(e){var t=e.children,n=e.refresh,r=e.transcription,i=e.storyId,a=Object(f.useState)(zr.EditorState.createEmpty()),o=Object(O.a)(a,2),s=o[0],c=o[1];Object(f.useEffect)((function(){if(r){var e=Ki()(r.content);if(e){var t=zr.ContentState.createFromBlockArray(e.contentBlocks),n=zr.EditorState.createWithContent(t);c(n)}}}),[r]);var l=function(){var e=Object(Q.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=eo()(Object(zr.convertToRaw)(s.getCurrentContent())),r){e.next=8;break}return e.next=5,Se.createTranscriptions({content:t,storyId:i});case 5:return n(),Object(fn.toast)({type:"success",title:"Saved",time:3e3}),e.abrupt("return");case 8:return e.next=10,Se.updateTranscriptions(r.id,{content:t,storyId:i});case 10:n(),Object(fn.toast)({type:"success",title:"Saved",time:3e3}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),Object(fn.toast)({type:"error",title:e.t0.response.data.message,time:3e3,description:"Error: ".concat(e.t0.response.data.code)});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)(Ja,{children:[Object(S.jsxs)(Va,{children:[Object(S.jsx)(qa,{children:"A transcript can help people find specific information in your story. Copy and paste, or type your transcript text here. Remember to save your work!"}),Object(S.jsx)("div",{children:Object(S.jsx)(Ha,{primary:!0,id:"save",onClick:l,children:"Save"})}),Object(S.jsx)("label",{children:"Transcription"}),Object(S.jsx)(Xa,{children:Object(S.jsx)(zi.Editor,{editorState:s,onEditorStateChange:function(e){c(e)},wrapperClassName:"transcript-wrapper",editorClassName:"transcript-editor",toolbar:{inline:{inDropdown:!0},list:{inDropdown:!0},textAlign:{inDropdown:!0},link:{inDropdown:!0},history:{inDropdown:!0}}})})]}),Object(S.jsx)(Ya,{children:t})]})},no=et.b().shape({title:et.d().required(),description:et.d(),at:et.a().required()}),ro=function(e){var t=e.timeline,n=e.open,r=e.onClose,i=Object(f.useState)({description:(null===t||void 0===t?void 0:t.description)||"",title:(null===t||void 0===t?void 0:t.title)||"",at:(null===t||void 0===t?void 0:t.at)||new Date,id:null===t||void 0===t?void 0:t.id}),a=Object(O.a)(i,2),o=a[0],s=a[1],c=!!(null===t||void 0===t?void 0:t.id),l=function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({at:t.at,title:t.title,description:t.description,id:t.id||""});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.useEffect)((function(){s({description:(null===t||void 0===t?void 0:t.description)||"",title:(null===t||void 0===t?void 0:t.title)||"",at:(null===t||void 0===t?void 0:t.at)||new Date,id:(null===t||void 0===t?void 0:t.id)||""})}),[t]),Object(S.jsx)(N.d,{initialValues:o,validationSchema:no,onSubmit:l,children:function(e){var t=e.isSubmitting,i=e.handleSubmit,a=e.setValues;return Object(f.useEffect)((function(){a(o)}),[o]),Object(S.jsxs)(A.a,{open:n,size:"tiny",children:[Object(S.jsx)(w.a,{content:c?"Edit event":"New event"}),Object(S.jsx)(A.a.Content,{image:!0,children:Object(S.jsxs)(I,{children:[Object(S.jsx)(ut,{name:"title",label:"Title",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}}),Object(S.jsx)(ht,{rows:4,name:"description",label:"Description",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}}),Object(S.jsx)(ut,{name:"at",label:"At",type:"date",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}})]})}),Object(S.jsxs)(A.a.Actions,{children:[Object(S.jsx)(E.a,{negative:!0,disabled:t,loading:t,type:"button",onClick:function(){return r(null)},basic:!0,children:"Cancel"}),Object(S.jsx)(E.a,{primary:!0,disabled:t,loading:t,onClick:function(){i()},children:"Save"})]})]})}})},io=Object(k.b)(E.a)(ba||(ba=Object(C.a)(["\n  &.ui.button {\n    margin-bottom: 12px;\n  }\n"]))),ao=Object(k.b)(hi.a)(ja||(ja=Object(C.a)(["\n  padding-bottom: 30px !important;\n  padding-right: 8px !important;\n\n  @media only screen and (max-width: 1024px) {\n    height: unset;\n    padding-bottom: unset;\n    padding-right: unset;\n  }\n"]))),oo=k.b.div(ma||(ma=Object(C.a)(["\n  position: relative;\n  min-width: 500px;\n  & > div {\n    padding: 8px 16px;\n    word-break: break-word;\n  }\n  @media only screen and (max-width: 1024px) {\n    min-width: unset;\n  }\n"]))),so=k.b.div(va||(va=Object(C.a)(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n"]))),co=n(537),lo=function(e){var t=e.ocurrencies,n=e.removeOcurrence;return Object(S.jsx)(ao,{children:t.map((function(e){return Object(S.jsxs)(oo,{item:"true",as:pi.a,children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:Object(S.jsx)("label",{children:"At:"})})," ",Object(co.a)(Object(Ui.a)(e.at,"yyyy-MM-dd'T'HH:mm:ss'Z'",new Date),"PPP")]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:Object(S.jsx)("label",{children:"Title:"})})," ",e.title]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:Object(S.jsx)("label",{children:"Description:"})})," ",e.description]}),Object(S.jsx)(so,{children:Object(S.jsxs)("div",{children:[Object(S.jsx)(E.a,{icon:"pencil",circular:!0,disabled:!0}),Object(S.jsx)(E.a,{icon:"trash",circular:!0,onClick:function(){return n(e)}})]})})]},e.id)}))})},uo=function(e){var t=e.isLoading,n=e.refresh,r=e.storyId,i=e.ocurrencies,a=e.children,o=Object(f.useState)(!1),s=Object(O.a)(o,2),c=s[0],l=s[1],u={addOccurrence:function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.createTimeline(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeOccurrence:function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.deleteTimeline(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},d=u.addOccurrence,p=u.removeOccurrence,h=Object(x.f)(T),b=function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h({open:!0,title:"Remove ocurrence",isConfirmation:!0,onClose:function(){var e=Object(Q.a)(P.a.mark((function e(r){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,p(t.id);case 4:return e.next=6,n();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),content:Object(S.jsxs)(S.Fragment,{children:["Do you want remove ",Object(S.jsx)("b",{children:t.title})," from this story?"]})});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(Ja,{children:Object(S.jsxs)(nn,{isLoading:t,children:[Object(S.jsxs)(Va,{children:[Object(S.jsx)(qa,{children:"Add important events mentioned in the story, and enable people to view these events on a timeline"}),Object(S.jsx)(io,{primary:!0,onClick:function(){l(!0)},children:"Add new event"}),Object(S.jsx)(lo,{ocurrencies:i,removeOcurrence:b})]}),Object(S.jsx)(Ya,{children:a}),Object(S.jsx)(ro,{timeline:null,open:c,onClose:function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||t.id){e.next=3;break}return e.next=3,d({storyId:r,at:t.at,description:t.description,title:t.title});case 3:l(!1),n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})})},po=["api","multiple","accept","onSelected","children"],ho=function(e){e.api;var t=e.multiple,n=void 0!==t&&t,r=e.accept,i=e.onSelected,a=e.children,o=Object(ae.a)(e,po),s=Object(f.useRef)(null);return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("input",{ref:s,type:"file",multiple:n,hidden:!0,onChange:i,accept:r}),Object(S.jsx)(E.a,Object(y.a)(Object(y.a)({onClick:function(){var e;null===s||void 0===s||null===(e=s.current)||void 0===e||e.click()}},o),{},{children:a&&a}))]})},fo=k.b.div(ga||(ga=Object(C.a)(["\n  display: flex;\n  justify-content: flex-start;\n  margin-bottom: 12px;\n  @media only screen and (max-width: 1024px) {\n    flex-flow: row-reverse;\n  }\n"]))),bo=k.b.div(Oa||(Oa=Object(C.a)(["\n  flex: 1;\n  margin: 0 10px;\n"]))),jo=Object(k.b)(hi.a)(xa||(xa=Object(C.a)(["\n  overflow: auto;\n  padding-bottom: 30px !important;\n  padding-right: 8px !important;\n\n  @media only screen and (max-width: 1024px) {\n    height: unset;\n    padding-bottom: unset;\n    padding-right: unset;\n  }\n\n  & > .ui.segment.item {\n    padding: 12px;\n    i {\n      vertical-align: middle;\n    }\n  }\n"]))),mo=k.b.div(ya||(ya=Object(C.a)(["\n  display: table-cell;\n  vertical-align: middle;\n  div {\n    display: flex;\n    .ui.button {\n      background-color: unset;\n    }\n  }\n"]))),vo=function(e){var t=e.files,n=e.onRemove;return Object(S.jsx)(jo,{relaxed:"very",size:"big",children:t.map((function(e){return Object(S.jsxs)(jo.Item,{item:"true",as:pi.a,children:[Object(S.jsx)(_.a,{name:"file alternate outline",size:"big"}),Object(S.jsx)(jo.Content,{verticalAlign:"middle",children:Object(S.jsx)(jo.Header,{children:Object(S.jsx)("a",{href:e.url,children:Object(S.jsx)("b",{children:e.originalName})})})}),Object(S.jsx)(mo,{children:Object(S.jsx)("div",{children:Object(S.jsx)(E.a,{icon:"trash",circular:!0,onClick:function(){return n(e)}})})})]},e.id)}))})},go=function(e){var t=e.storyId,n=e.refresh,r=e.files,i=e.isLoading,a=e.children,o=Object(x.f)(T),s=Object(f.useState)({}),c=Object(O.a)(s,2),l=c[0],u=c[1],d=Object(f.useState)(0),p=Object(O.a)(d,2),h=p[0],b=p[1],j=Object(f.useState)(0),m=Object(O.a)(j,2),v=m[0],g=m[1],A=function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o({open:!0,title:"Remove file",isConfirmation:!0,onClose:function(){var e=Object(Q.a)(P.a.mark((function e(r){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Se.deleteFile(t.id);case 4:n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),content:Object(S.jsxs)(S.Fragment,{children:["Do you want remove file ",Object(S.jsx)("b",{children:t.originalName})," from this story?"]})});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(f.useEffect)((function(){console.log(l)}),[l]),Object(f.useEffect)((function(){var e=100*v,t=Object.values(l).reduce((function(e,t){return e+t}),0);b(t/e*100)}),[l,v]);var E=function(){var e=Object(Q.a)(P.a.mark((function e(n){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se.uploadFile(t,n,(function(e){var t=e.loaded,r=e.total,i=Math.round(100*t/r);u((function(e){return e[n.name]=i<0?0:i,Object(y.a)({},e)}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(fn.toast)({type:"error",title:e.t0.response.data.message,time:3e3,description:"Error: ".concat(e.t0.response.data.code)});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(Q.a)(P.a.mark((function e(t){var r,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=t.target.files)||void 0===r?void 0:r.length){e.next=2;break}return e.abrupt("return");case 2:return i=Array.from(t.target.files),g(i.length),e.next=6,Promise.all(i.map((function(e){return E(e)})));case 6:u({}),g(0),b(0),n();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(Ja,{children:Object(S.jsxs)(nn,{isLoading:i,children:[Object(S.jsxs)(Va,{children:[Object(S.jsx)(qa,{children:"Link files to your video for viewers to download"}),Object(S.jsxs)(fo,{children:[Object(S.jsx)(ho,{onSelected:C,primary:!0,multiple:!0,children:"Upload new file"}),Object(S.jsx)(bo,{children:!!h&&Object(S.jsx)(hn.a,{percent:h,progress:!0})})]}),Object(S.jsx)(Le.a,{}),Object(S.jsx)(w.a,{as:"h1",children:"List of files"}),Object(S.jsx)(vo,{files:r,onRemove:A})]}),Object(S.jsx)(Ya,{children:a})]})})},Oo=Object(k.b)(E.a)(Aa||(Aa=Object(C.a)(["\n  &.ui.button {\n    margin-bottom: 12px;\n  }\n"]))),xo=Object(k.b)(hi.a)(wa||(wa=Object(C.a)(["\n  padding-bottom: 30px !important;\n  padding-right: 8px !important;\n\n  @media only screen and (max-width: 1024px) {\n    height: unset;\n    padding-bottom: unset;\n    padding-right: unset;\n  }\n\n  & > .ui.segment.item {\n    padding: 12px;\n    i {\n      vertical-align: middle;\n    }\n  }\n"]))),yo=k.b.div(Ea||(Ea=Object(C.a)(["\n  display: table-cell;\n  vertical-align: middle;\n  div {\n    display: flex;\n    .ui.button {\n      background-color: unset;\n    }\n  }\n"]))),Ao=(k.b.div(Ca||(Ca=Object(C.a)(["\n  padding-top: 32px;\n  padding-bottom: 16px;\n"]))),function(e){var t=e.links,n=e.onRemove;return Object(S.jsx)(xo,{relaxed:"very",size:"big",children:t.map((function(e){return Object(S.jsxs)(xo.Item,{item:"true",as:pi.a,children:[Object(S.jsx)(_.a,{name:"chain",size:"big"}),Object(S.jsx)(xo.Content,{verticalAlign:"middle",children:Object(S.jsx)(xo.Header,{children:Object(S.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:Object(S.jsx)("b",{children:e.url})})})}),Object(S.jsx)(yo,{children:Object(S.jsx)("div",{children:Object(S.jsx)(E.a,{icon:"trash",circular:!0,onClick:function(){return n(e)}})})})]},e.id)}))})}),wo=et.b().shape({url:et.d().required().url()}),Eo=function(e){var t=e.open,n=e.storyId,r=e.onClose,i={createLink:function(){var e=Object(Q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.createLink(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}.createLink,a=function(){var e=Object(Q.a)(P.a.mark((function e(t,a){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({url:t.url,storyId:n});case 2:r(!0),a.resetForm();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(S.jsx)(N.d,{initialValues:{url:""},validationSchema:wo,onSubmit:a,children:function(e){var n=e.isSubmitting,i=e.handleSubmit;return Object(S.jsxs)(A.a,{open:t,size:"tiny",children:[Object(S.jsx)(w.a,{content:"New link"}),Object(S.jsx)(A.a.Content,{image:!0,children:Object(S.jsx)(I,{children:Object(S.jsx)(ut,{name:"url",label:"Link url",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}})})}),Object(S.jsxs)(A.a.Actions,{children:[Object(S.jsx)(E.a,{negative:!0,disabled:n,loading:n,type:"button",onClick:function(){return r(!1)},basic:!0,children:"Cancel"}),Object(S.jsx)(E.a,{primary:!0,disabled:n,loading:n,onClick:function(){i()},children:"Save"})]})]})}})},Co=function(e){var t=e.storyId,n=e.refresh,r=e.links,i=e.isLoading,a=e.children,o=Object(x.f)(T),s=Object(f.useState)(!1),c=Object(O.a)(s,2),l=c[0],u=c[1],d=function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o({open:!0,title:"Remove link",isConfirmation:!0,onClose:function(){var e=Object(Q.a)(P.a.mark((function e(r){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Se.deleteLink(t.id);case 4:n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),content:Object(S.jsxs)(S.Fragment,{children:["Do you want remove link ",Object(S.jsx)("b",{children:t.url})," from this story?"]})});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(Ja,{children:[Object(S.jsxs)(nn,{isLoading:i,children:[Object(S.jsxs)(Va,{children:[Object(S.jsx)(qa,{}),Object(S.jsx)(Oo,{primary:!0,id:"save",onClick:function(){return u(!0)},children:"Add a new link"}),Object(S.jsx)(Le.a,{}),Object(S.jsx)(w.a,{as:"h1",children:"List of links"}),Object(S.jsx)(Ao,{links:r,onRemove:d})]}),Object(S.jsx)(Ya,{children:a})]}),Object(S.jsx)(Eo,{storyId:t,open:l,onClose:function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(!1),t&&n();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})},ko=k.b.div(ka||(ka=Object(C.a)(["\n  display: flex;\n  justify-content: flex-start;\n  margin-bottom: 12px;\n  @media only screen and (max-width: 1024px) {\n    flex-flow: row-reverse;\n  }\n"]))),Io=k.b.div(Ia||(Ia=Object(C.a)(["\n  flex: 1;\n  margin: 0 10px;\n"]))),So=k.b.div(Sa||(Sa=Object(C.a)(["\n  display: flex;\n  flex-flow: wrap;\n  padding-bottom: 30px !important;\n  padding-right: 8px !important;\n\n  @media only screen and (max-width: 1024px) {\n    height: unset;\n    padding-bottom: unset;\n    padding-right: unset;\n  }\n\n  & > .ui.segment.item {\n    padding: 12px;\n  }\n"]))),Ro=k.b.div(Ra||(Ra=Object(C.a)(["\n  cursor: pointer;\n  width: 250px;\n  height: 285px;\n  padding: 8px;\n  position: relative;\n"]))),To=k.b.div(Ta||(Ta=Object(C.a)(["\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.85);\n  display: flex;\n  justify-content: center;\n  & > .ui.image {\n    object-fit: contain;\n    width: unset;\n    height: unset;\n  }\n"]))),Do=Object(k.b)(H.a)(Da||(Da=Object(C.a)(["\n  position: absolute;\n  background: #e0e1e2 none;\n  z-index: 1;\n  border-radius: 10em;\n  padding: 0.78571429em 0.78571429em 0.78571429em;\n  &.ui.dropdown {\n    position: absolute;\n    top: 20px;\n    right: 20px;\n    i.icon {\n      margin: unset;\n      width: 1.358em;\n    }\n  }\n"]))),Bo=function(e){var t=e.image,n=e.onClick,r=e.onDeleteClick,i=Object(x.e)(Ve),a=Object(f.useState)(!t.thumbnail),o=Object(O.a)(a,2),s=o[0],c=o[1],l=Object(f.useState)(t.thumbnail),u=Object(O.a)(l,2),d=u[0],p=u[1],h=t.id;return Object(f.useEffect)((function(){if(i[h]){var e=i[h],t=e.payload,n=e.finished;c(!0),n&&(c(!1),p(t.thumbnail))}}),[i]),Object(S.jsxs)(Ro,{children:[Object(S.jsx)(Do,{pointing:"right",icon:"ellipsis vertical",children:Object(S.jsx)(Do.Menu,{children:Object(S.jsx)(Do.Item,{text:"Delete",icon:"close",onClick:r})})}),Object(S.jsx)(To,{children:s?Object(S.jsx)(tn.a,{active:!0,inverted:!0,children:"Processing..."}):Object(S.jsx)(Ze.a,{src:d,onClick:n,size:"big"})})]})},Po=function(e){var t=e.children,n=e.isLoading,r=e.galleries,i=e.storyId,a=e.refresh,o=Object(f.useState)(0),s=Object(O.a)(o,2),c=s[0],l=s[1],u=Object(f.useState)(!1),d=Object(O.a)(u,2),p=d[0],h=d[1],b=Object(f.useState)({}),j=Object(O.a)(b,2),m=j[0],v=j[1],g=Object(f.useState)(0),x=Object(O.a)(g,2),A=x[0],w=x[1],E=Object(f.useState)(0),C=Object(O.a)(E,2),k=C[0],I=C[1],R=function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.deleteGallery(t);case 2:a();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(f.useEffect)((function(){var e=100*k,t=Object.values(m).reduce((function(e,t){return e+t}),0);w(t/e*100)}),[m,k]);var T=function(){var e=Object(Q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se.uploadImage(t,(function(e){var n=e.loaded,r=e.total,i=Math.round(100*n/r);v((function(e){return e[t.name]=i<0?0:i,Object(y.a)({},e)}))}));case 3:return n=e.sent,e.next=6,Se.createGallery(i,n.id);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Object(fn.toast)({type:"error",title:e.t0.response.data.message,time:3e3,description:"Error: ".concat(e.t0.response.data.code)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(Q.a)(P.a.mark((function e(t){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=t.target.files)||void 0===n?void 0:n.length){e.next=2;break}return e.abrupt("return");case 2:return r=Array.from(t.target.files),I(r.length),e.next=6,Promise.all(r.map((function(e){return T(e)})));case 6:a(),v({}),I(0),w(0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(Ja,{children:Object(S.jsxs)(nn,{isLoading:n,children:[Object(S.jsxs)(Va,{children:[Object(S.jsx)(qa,{children:"Create a photo gallery to accompany and enhance your story."}),Object(S.jsxs)(ko,{children:[Object(S.jsx)(ho,{accept:"image/*",onSelected:D,disabled:!!A,primary:!0,multiple:!0,children:"Upload photos"}),Object(S.jsx)(Io,{children:!!A&&Object(S.jsx)(hn.a,{percent:A,progress:!0})})]}),Object(S.jsx)(So,{children:r.map((function(e,t){return Object(S.jsx)(Bo,{image:e.image,onClick:function(){return function(e){l(e),h(!0)}(t)},onDeleteClick:function(){return R(e.id)}},e.id)}))})]}),Object(S.jsx)(Si,{images:r.map((function(e){return e.image})),index:c,show:p,onNextClick:function(){null!==c&&l(c+1)},onPrevClick:function(){null!==c&&l(c-1)},onClose:function(){h(!1),l(null)}}),Object(S.jsx)(Ya,{children:t})]})})},Qo=Object(k.b)(hi.a)(Ba||(Ba=Object(C.a)(["\n  padding-bottom: 30px !important;\n  padding-right: 8px !important;\n\n  @media only screen and (max-width: 1024px) {\n    height: unset;\n    padding-bottom: unset;\n    padding-right: unset;\n  }\n\n  & > .ui.segment.item {\n    padding: 12px;\n    i {\n      vertical-align: middle;\n    }\n  }\n"]))),No=k.b.div(Pa||(Pa=Object(C.a)(["\n  display: table-cell;\n  vertical-align: middle;\n  div {\n    display: flex;\n    .ui.button {\n      background-color: unset;\n    }\n  }\n"]))),Uo=k.b.div(Qa||(Qa=Object(C.a)(["\n  display: flex;\n  flex-flow: column;\n  & > .ui.selection {\n    margin-bottom: 32px;\n  }\n"])));!function(e){e["360p"]="360p",e["480p"]="480p",e["720p"]="720p",e["1028p"]="1028p"}(Na||(Na={})),function(e){e.arabic="arabic",e.brazilianPortuguese="brazilian portuguese",e.danish="danish",e.dutch="dutch",e.english="english",e.farsi="farsi",e.finnish="finnish",e.french="french",e.greek="greek",e.hebrew="hebrew",e.indonesian="indonesian",e.italian="italian",e.malay="malay",e.norwegian="norwegian",e.romanian="romanian",e.spanish="spanish",e.swedish="swedish",e.turkish="turkish",e.vietnamese="vietnamese",e.albanian="albanian",e.armenian="armenian",e.azerbaijani="azerbaijani",e.basque="basque",e.belarusian="belarusian",e.bengali="bengali",e.bosnian="bosnian",e.bulgarian="bulgarian",e.burmese="burmese",e.catalan="catalan",e.chinese="chinese",e.croatian="croatian",e.czech="czech",e.esperanto="esperanto",e.estonian="estonian",e.georgian="georgian",e.german="german",e.greenlandic="greenlandic",e.hindi="hindi",e.hungarian="hungarian",e.icelandic="icelandic",e.japanese="japanese",e.kannada="kannada",e.korean="korean",e.kurdish="kurdish",e.latvian="latvian",e.lithuanian="lithuanian",e.macedonian="macedonian",e.malayalam="malayalam",e.manipuri="manipuri",e.mongolian="mongolian",e.nepali="nepali",e.pashto="pashto",e.polish="polish",e.portuguese="portuguese",e.punjabi="punjabi",e.russian="russian",e.serbian="serbian",e.sinhala="sinhala",e.slovak="slovak",e.slovenian="slovenian",e.somali="somali",e.sundanese="sundanese",e.swahili="swahili",e.tagalog="tagalog",e.tamil="tamil",e.telugu="telugu",e.thai="thai",e.ukrainian="ukrainian",e.urdu="urdu",e.yoruba="yoruba"}(Ua||(Ua={}));var Lo,Mo,_o,Fo,Ko,zo,Jo,Vo,Yo,qo,Wo,Zo,Go,Ho,Xo,$o,es,ts,ns,rs,is,as,os,ss,cs,ls,us,ds,ps,hs,fs,bs,js,ms,vs,gs,Os,xs,ys,As,ws,Es,Cs,ks=n(539),Is=function(e){var t=e.subtitles,n=e.onRemove;return Object(S.jsx)(Qo,{relaxed:"very",size:"big",children:t.map((function(e){return Object(S.jsxs)(Qo.Item,{item:"true",as:pi.a,children:[Object(S.jsx)(_.a,{name:"file alternate outline",size:"big"}),Object(S.jsxs)(Qo.Content,{verticalAlign:"middle",children:[Object(S.jsx)(Qo.Header,{children:Object(S.jsx)("a",{href:e.url,children:Object(S.jsx)("b",{children:e.originalName})})}),Object(S.jsxs)(Qo.Description,{children:["Language: ",e.language]})]}),Object(S.jsx)(No,{children:Object(S.jsx)("div",{children:Object(S.jsx)(E.a,{icon:"trash",circular:!0,onClick:function(){return n(e)}})})})]},e.id)}))})},Ss=Object.values(Ua).map((function(e){return{key:e,value:e,text:e}})),Rs=function(e){var t=e.storyId,n=e.refresh,r=e.subtitles,i=e.isLoading,a=e.children,o=Object(x.f)(T),s=Object(f.useState)(),c=Object(O.a)(s,2),l=c[0],u=c[1],d=function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o({open:!0,title:"Remove subtitle",isConfirmation:!0,onClose:function(){var e=Object(Q.a)(P.a.mark((function e(r){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Se.deleteSubtitle(t.id);case 5:n(),Object(fn.toast)({type:"success",title:"Subtitle removed",time:3e3}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Object(fn.toast)({type:"error",title:e.t0.response.data.message,time:3e3,description:"Error: ".concat(e.t0.response.data.code)});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),content:Object(S.jsxs)(S.Fragment,{children:["Do you want remove subtitle ",Object(S.jsx)("b",{children:t.originalName})," from this story?"]})});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(Q.a)(P.a.mark((function e(r){var i,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(i=r.target.files)||void 0===i?void 0:i.length){e.next=2;break}return e.abrupt("return");case 2:return a=r.target.files[0],e.prev=3,e.next=6,Se.uploadSubtitle(t,l,a,(function(e){var t=e.loaded,n=e.total,r=Math.round(100*t/n);console.log(r<0?0:r)}));case 6:n(),u(void 0),Object(fn.toast)({type:"success",title:"Subtitle uploaded",time:3e3}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),Object(fn.toast)({type:"error",title:e.t0.response.data.message,time:3e3,description:"Error: ".concat(e.t0.response.data.code)});case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(Ja,{children:Object(S.jsxs)(nn,{isLoading:i,children:[Object(S.jsxs)(Va,{children:[Object(S.jsx)(qa,{children:"Add subtitles to your video. Select a language and upload a file. Upload files for different languages and help users understand content in any supported language."}),Object(S.jsxs)(Uo,{children:[Object(S.jsx)(ks.a,{placeholder:"Select your language",options:Ss,fluid:!0,onChange:function(e,t){var n=t.value;u(n)},value:l}),Object(S.jsx)(ho,{onSelected:p,disabled:!l,primary:!0,fluid:!0,accept:".vtt",children:"Upload new subtitle"})]}),Object(S.jsx)(Le.a,{}),Object(S.jsx)(w.a,{as:"h1",children:"List of subtitles"}),Object(S.jsx)(Is,{subtitles:r,onRemove:d})]}),Object(S.jsx)(Ya,{children:a})]})})},Ts=Object(k.b)(E.a)(Lo||(Lo=Object(C.a)(["\n  &.ui.button {\n    margin-bottom: 12px;\n  }\n"]))),Ds=Object(k.b)(ne.a)(Mo||(Mo=Object(C.a)(["\n  margin-top: 4px;\n  & > .ui.input {\n    display: flex;\n    input {\n      border-radius: unset;\n    }\n  }\n"]))),Bs=Object(k.b)(hi.a)(_o||(_o=Object(C.a)(["\n  padding-bottom: 30px !important;\n  padding-right: 8px !important;\n\n  @media only screen and (max-width: 1024px) {\n    height: unset;\n    padding-bottom: unset;\n    padding-right: unset;\n  }\n\n  & > .ui.segment.item {\n    padding: 12px;\n  }\n"]))),Ps=k.b.span(Fo||(Fo=Object(C.a)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  & > div {\n    margin-right: 8px;\n  }\n"]))),Qs=k.b.div(Ko||(Ko=Object(C.a)(["\n  display: table-cell;\n  vertical-align: middle;\n  div {\n    display: flex;\n    .ui.button {\n      background-color: unset;\n    }\n  }\n"]))),Ns=function(e){var t=e.persons,n=e.removePerson,r=e.editPerson;return Object(S.jsx)(Bs,{relaxed:"very",size:"big",children:t.map((function(e){var t;return Object(S.jsxs)(Bs.Item,{item:"true",as:pi.a,children:[Object(S.jsx)("div",{className:"ui image",children:Object(S.jsx)(Z,{name:e.name,picture:null===(t=e.picture)||void 0===t?void 0:t.thumbnail})}),Object(S.jsxs)(Bs.Content,{verticalAlign:"middle",children:[Object(S.jsx)(Bs.Header,{children:e.name}),Object(S.jsxs)(Bs.Description,{children:[Object(S.jsx)("a",{href:e.link,target:"_blank",rel:"noreferrer",children:Object(S.jsx)("b",{children:e.link})})," "]})]}),Object(S.jsx)(Qs,{children:Object(S.jsxs)("div",{children:[Object(S.jsx)(E.a,{icon:"pencil",circular:!0,onClick:function(){r(e)}}),Object(S.jsx)(E.a,{icon:"trash",circular:!0,onClick:function(){return n(e)}})]})})]},e.id)}))})},Us=function(e){var t=e.personList,n=e.onChange,r=e.onSelected,i=e.loading,a=Object(f.useState)(""),o=Object(O.a)(a,2),s=o[0],c=o[1];return Object(S.jsx)(Ds,{fluid:!0,loading:i,resultRenderer:function(e){var t=e.name,n=e.picture;return Object(S.jsxs)(Ps,{children:[Object(S.jsx)(Z,{name:t,picture:null===n||void 0===n?void 0:n.thumbnail,size:"small"}),t]})},placeholder:"Search for existing person",onResultSelect:function(e,t){r(t),c("")},onSearchChange:function(e,t){n(t),c(t.value||"")},results:t.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{title:e.name})})),value:s})},Ls=et.b().shape({name:et.d().required(),link:et.d().url()}),Ms=function(e){var t,n=e.person,r=e.open,i=e.onClose,a=function(){var e=function(){var e=Object(Q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.createPerson(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{updatePerson:function(){var e=Object(Q.a)(P.a.mark((function e(t,n){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Se.updatePerson(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),createPerson:e}}(),o=a.updatePerson,s=a.createPerson,c=Object(f.useState)((null===n||void 0===n||null===(t=n.picture)||void 0===t?void 0:t.id)||null),l=Object(O.a)(c,2),u=l[0],d=l[1],p=Object(f.useState)({name:(null===n||void 0===n?void 0:n.name)||"",link:(null===n||void 0===n?void 0:n.link)||""}),h=Object(O.a)(p,2),b=h[0],j=h[1],m=!!(null===n||void 0===n?void 0:n.id),v=function(){var e=Object(Q.a)(P.a.mark((function e(t,r){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!m){e.next=7;break}return e.next=4,o(null===n||void 0===n?void 0:n.id,{name:t.name,link:t.link,pictureId:u});case 4:i(null),e.next=12;break;case 7:return e.t0=i,e.next=10,s({name:t.name,link:t.link,pictureId:u});case 10:e.t1=e.sent,(0,e.t0)(e.t1);case 12:Object(fn.toast)({type:"success",title:"Saved",time:3e3}),e.next=19;break;case 15:e.prev=15,e.t2=e.catch(0),Object(fn.toast)({type:"error",title:e.t2.response.data.message,time:3e3,description:"Error: ".concat(e.t2.response.data.code)}),i(null);case 19:return e.prev=19,r.resetForm(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,15,19,22]])})));return function(t,n){return e.apply(this,arguments)}}();Object(f.useEffect)((function(){j({name:(null===n||void 0===n?void 0:n.name)||"",link:(null===n||void 0===n?void 0:n.link)||""})}),[n]);var g=function(e){d(e)};return Object(S.jsx)(N.d,{initialValues:b,validationSchema:Ls,onSubmit:v,children:function(e){var t=e.isSubmitting,a=e.handleSubmit,o=e.setValues,s=e.values;return Object(f.useEffect)((function(){o(b)}),[b]),Object(S.jsxs)(A.a,{open:r,size:"tiny",children:[Object(S.jsx)(w.a,{content:m?"Edit person":"New person"}),Object(S.jsx)(A.a.Content,{image:!0,children:Object(S.jsxs)(I,{children:[Object(S.jsx)(bn,{name:(null===s||void 0===s?void 0:s.name)||"",defaultPicture:(null===n||void 0===n?void 0:n.picture)||null,onChange:g}),Object(S.jsx)(ut,{name:"name",label:"Full Name",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}}),Object(S.jsx)(ut,{name:"link",label:"Link",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}})]})}),Object(S.jsxs)(A.a.Actions,{children:[Object(S.jsx)(E.a,{negative:!0,disabled:t,loading:t,type:"button",onClick:function(){return i(null)},basic:!0,children:"Cancel"}),Object(S.jsx)(E.a,{primary:!0,disabled:t,loading:t,onClick:function(){a()},children:"Save"})]})]})}})},_s=function(e){var t=e.storyId,n=e.children,r=e.isLoading,i=e.refresh,a=e.persons,o=void 0===a?[]:a,s=Object(f.useState)(!1),c=Object(O.a)(s,2),l=c[0],u=c[1],d=Object(f.useState)(null),p=Object(O.a)(d,2),h=p[0],b=p[1],j=Object(x.f)(T),m=function(){var e=Object(f.useState)([]),t=Object(O.a)(e,2),n=t[0],r=t[1],i=Object(f.useState)(!1),a=Object(O.a)(i,2),o=a[0],s=a[1],c=function(){var e=Object(Q.a)(P.a.mark((function e(t,n){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.addPersonToStory(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(Q.a)(P.a.mark((function e(t,n){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.removePersonFromStory(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return{getPersonList:function(){var e=Object(Q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(!0),e.prev=1,t){e.next=5;break}return r([]),e.abrupt("return");case 5:return e.next=7,Se.getPersons(0,1e3,t);case 7:n=e.sent,r(n.content);case 9:return e.prev=9,s(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,,9,12]])})));return function(t){return e.apply(this,arguments)}}(),personList:n,loadingPeopleList:o,removePerson:l,addPerson:c,clearPersonList:function(){r([])}}}(),v=m.personList,g=m.loadingPeopleList,y=m.addPerson,A=m.getPersonList,E=m.clearPersonList,C=m.removePerson,k=function(){var e=Object(Q.a)(P.a.mark((function e(n){var r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.result,e.next=3,y(t,r.id);case 3:return j({open:!0,title:"Add person",content:Object(S.jsxs)(S.Fragment,{children:[r.name," was added to this story."]})}),E(),e.next=7,i();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(Q.a)(P.a.mark((function e(n){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j({open:!0,title:"Remove person",isConfirmation:!0,onClose:function(){var e=Object(Q.a)(P.a.mark((function e(r){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,C(t,n.id);case 5:return e.next=7,i();case 7:Object(fn.toast)({type:"success",title:"Removed",time:3e3}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Object(fn.toast)({type:"error",title:e.t0.response.data.message,time:3e3,description:"Error: ".concat(e.t0.response.data.code)});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),content:Object(S.jsxs)(S.Fragment,{children:["Do you want remove ",Object(S.jsx)("b",{children:n.name})," from this story?"]})});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(e){u(!0),b(e||null)};return Object(S.jsxs)(Ja,{children:[Object(S.jsxs)(nn,{isLoading:r,children:[Object(S.jsxs)(Va,{children:[Object(S.jsx)(qa,{children:"Add people who are interviewed or are mentioned in the story. Users will be able to filter / search for stories mentioning specific people. Include links to external websites to learn more."}),Object(S.jsx)(Ts,{primary:!0,id:"save",onClick:function(){return R()},children:"Add a new person"}),Object(S.jsx)(Us,{personList:v,loading:g,onChange:Te()((function(e){var t=e.value;A(t||"")}),500),onSelected:k}),Object(S.jsx)(Le.a,{}),Object(S.jsx)(w.a,{as:"h1",children:"List of people"}),Object(S.jsx)(Ns,{persons:o,removePerson:I,editPerson:R})]}),Object(S.jsx)(Ya,{children:n})]}),Object(S.jsx)(Ms,{isEdit:!1,open:l,person:h,onClose:function(){var e=Object(Q.a)(P.a.mark((function e(n){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=3;break}return e.next=3,y(t,n.id);case 3:u(!1),b(null),i();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})},Fs=et.b().shape({name:et.d().required(),description:et.d(),location:et.d().required()}),Ks=k.b.span(zo||(zo=Object(C.a)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  & > div {\n    margin-right: 8px;\n  }\n"]))),zs=Object(k.b)(ne.a)(Jo||(Jo=Object(C.a)(["\n  margin-top: 4px;\n  & > .ui.input {\n    display: flex;\n    input {\n      border-radius: unset;\n    }\n  }\n"]))),Js=function(e){var t=e.onSelected,n=Object(f.useState)(""),r=Object(O.a)(n,2),i=r[0],a=r[1],o=Object(f.useState)(!1),s=Object(O.a)(o,2),c=s[0],l=s[1],u=Object(f.useState)([]),d=Object(O.a)(u,2),p=d[0],h=d[1],b=Object(f.useCallback)(Te()(function(){var e=Object(Q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,Se.searchLocation(t);case 3:n=e.sent,h(n),l(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),500),[]);Object(f.useEffect)((function(){i&&b(i)}),[i]);var j=function(){var e=Object(Q.a)(P.a.mark((function e(t,n){var r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.value,a(r||"");case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(S.jsx)(zs,{fluid:!0,loading:c,resultRenderer:function(e){var t=e.display_name;return Object(S.jsx)(Ks,{children:t})},placeholder:"Search for an address",onResultSelect:function(e,n){t(n),a("")},onSearchChange:j,results:p,value:i})},Vs=function(e){var t=e.place,n=e.open,r=e.onClose,i=Object(f.useState)({description:(null===t||void 0===t?void 0:t.description)||"",name:(null===t||void 0===t?void 0:t.name)||"",location:(null===t||void 0===t?void 0:t.location)||"",latitude:(null===t||void 0===t?void 0:t.latitude)||"",longitude:(null===t||void 0===t?void 0:t.longitude)||""}),a=Object(O.a)(i,2),o=a[0],s=a[1],c=!!(null===t||void 0===t?void 0:t.id),l=function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({description:t.description,name:t.name,location:t.location,latitude:t.latitude,longitude:t.longitude,id:t.id||""});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.useEffect)((function(){s({description:(null===t||void 0===t?void 0:t.description)||"",name:(null===t||void 0===t?void 0:t.name)||"",location:(null===t||void 0===t?void 0:t.location)||"",latitude:(null===t||void 0===t?void 0:t.latitude)||"",longitude:(null===t||void 0===t?void 0:t.longitude)||"",id:(null===t||void 0===t?void 0:t.id)||""})}),[t]),Object(S.jsx)(N.d,{initialValues:o,validationSchema:Fs,onSubmit:l,children:function(e){var t=e.isSubmitting,i=e.handleSubmit,a=e.setValues,s=e.setFieldValue;return Object(f.useEffect)((function(){a(o)}),[o]),Object(S.jsxs)(A.a,{open:n,size:"tiny",children:[Object(S.jsx)(w.a,{content:c?"Edit location":"New location"}),Object(S.jsx)(A.a.Content,{image:!0,children:Object(S.jsxs)(I,{children:[Object(S.jsx)(ut,{name:"name",label:"Name",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}}),Object(S.jsx)(ht,{rows:4,name:"description",label:"Description",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}}),Object(S.jsx)(Js,{onSelected:function(e){var t=e.result,n=t.display_name,r=t.lat,i=t.lon;s("location",n),s("latitude",r),s("longitude",i)}}),Object(S.jsx)(ht,{disabled:!0,rows:2,name:"location",label:"Address",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}})]})}),Object(S.jsxs)(A.a.Actions,{children:[Object(S.jsx)(E.a,{negative:!0,disabled:t,loading:t,type:"button",onClick:function(){return r(null)},basic:!0,children:"Cancel"}),Object(S.jsx)(E.a,{primary:!0,disabled:t,loading:t,onClick:function(){i()},children:"Save"})]})]})}})},Ys=Object(k.b)(E.a)(Vo||(Vo=Object(C.a)(["\n  &.ui.button {\n    margin-bottom: 12px;\n  }\n"]))),qs=Object(k.b)(hi.a)(Yo||(Yo=Object(C.a)(["\n  padding-bottom: 30px !important;\n  padding-right: 8px !important;\n\n  @media only screen and (max-width: 1024px) {\n    height: unset;\n    padding-bottom: unset;\n    padding-right: unset;\n  }\n"]))),Ws=k.b.div(qo||(qo=Object(C.a)(["\n  position: relative;\n  min-width: 500px;\n  & > div:not(:last-child & :first-child) {\n    padding: 8px 16px;\n  }\n  & > div:last-child {\n    height: 260px;\n  }\n\n  @media only screen and (max-width: 1024px) {\n    min-width: unset;\n  }\n"]))),Zs=k.b.div(Wo||(Wo=Object(C.a)(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n"]))),Gs=function(e){var t=e.places,n=e.removeOcurrence;return Object(S.jsx)(qs,{children:t.map((function(e){var t=[Number(e.latitude),Number(e.longitude)];return Object(S.jsxs)(Ws,{item:"true",as:pi.a,children:[Object(S.jsx)(Zs,{children:Object(S.jsxs)("div",{children:[Object(S.jsx)(E.a,{icon:"pencil",circular:!0,disabled:!0}),Object(S.jsx)(E.a,{icon:"trash",circular:!0,onClick:function(){return n(e)}})]})}),Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:Object(S.jsx)("label",{children:"Name:"})})," ",e.name]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:Object(S.jsx)("label",{children:"Description:"})})," ",e.description]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:Object(S.jsx)("label",{children:"Address:"})})," ",e.location]}),Object(S.jsx)(Hi,{position:t,markers:[t]})]},e.id)}))})},Hs=function(e){var t=e.isLoading,n=e.refresh,r=e.storyId,i=e.places,a=e.children,o=Object(f.useState)(!1),s=Object(O.a)(o,2),c=s[0],l=s[1],u={addPlace:function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.createPlace(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removePlace:function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.deletePlace(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},d=u.addPlace,p=u.removePlace,h=Object(x.f)(T),b=function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h({open:!0,title:"Remove place",isConfirmation:!0,onClose:function(){var e=Object(Q.a)(P.a.mark((function e(r){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,p(t.id);case 4:return e.next=6,n();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),content:Object(S.jsxs)(S.Fragment,{children:["Do you want remove ",Object(S.jsx)("b",{children:t.name})," from this story?"]})});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(Ja,{children:Object(S.jsxs)(nn,{isLoading:t,children:[Object(S.jsxs)(Va,{children:[Object(S.jsx)(qa,{children:"Add locations where elements of the story took place. User will be able to see maps with the locations you enter"}),Object(S.jsx)(Ys,{primary:!0,onClick:function(){l(!0)},children:"Add new location"}),Object(S.jsx)(Gs,{places:i,removeOcurrence:b})]}),Object(S.jsx)(Ya,{children:a}),Object(S.jsx)(Vs,{place:null,open:c,onClose:function(){var e=Object(Q.a)(P.a.mark((function e(t){var i,a,o,s,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return i=t.description,a=t.longitude,o=t.latitude,s=t.location,c=t.name,e.next=4,d({storyId:r,description:i,longitude:a,latitude:o,location:s,name:c});case 4:l(!1),n();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})})},Xs=n(367),$s=n(314),ec=Object(k.b)(pi.a)(Zo||(Zo=Object(C.a)(["\n  height: 26em;\n  overflow-y: auto;\n"]))),tc=k.b.div(Go||(Go=Object(C.a)(["\n  & > div {\n    margin-bottom: 32px;\n  }\n"]))),nc=k.b.div(Ho||(Ho=Object(C.a)(["\n  display: table-cell;\n  vertical-align: middle;\n  div {\n    display: flex;\n    i {\n      cursor: pointer;\n    }\n  }\n"]))),rc=function(e){var t=e.list,n=e.onRemoveWatcher,r=e.resendInvite;return Object(S.jsx)(hi.a,{divided:!0,relaxed:!0,children:t.map((function(e){var t,i=e.id,a=e.email,o=e.user;return Object(S.jsxs)(hi.a.Item,{children:[(null===o||void 0===o||null===(t=o.picture)||void 0===t?void 0:t.thumbnail)?Object(S.jsx)(Ze.a,{avatar:!0,src:o.picture.thumbnail}):Object(S.jsx)(hi.a.Icon,{name:"user",size:"large",verticalAlign:"middle"}),Object(S.jsxs)(hi.a.Content,{children:[Object(S.jsx)(hi.a.Header,{as:"a",children:a}),(null===o||void 0===o?void 0:o.firstName)&&(null===o||void 0===o?void 0:o.lastName)&&Object(S.jsx)(hi.a.Description,{as:"a",children:"".concat(o.firstName," ").concat(o.lastName)})]}),Object(S.jsx)(nc,{children:Object(S.jsx)(H.a,{pointing:"right",icon:"ellipsis vertical",children:Object(S.jsxs)(H.a.Menu,{children:[Object(S.jsx)(H.a.Item,{text:"Remove",icon:"close",onClick:function(){return n(i)}}),Object(S.jsx)(H.a.Item,{text:"Resend invite",icon:"mail outline",onClick:function(){return r(i)}})]})})})]},i)}))})},ic=et.b().shape({watcher:et.d().required().email("Must be a valid email!")}),ac=function(e){var t=e.children,n=e.refresh,r=e.published,i=e.watchers,a=e.storyId,o=function(){var e=Object(Q.a)(P.a.mark((function e(t,i){var o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.checked,e.prev=1,e.next=4,Se.publishStory(a,!!o);case 4:n(),Object(fn.toast)({type:"success",title:"Story ".concat(r?"Draft":"Published"),time:3e3}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Object(fn.toast)({type:"error",title:e.t0.response.data.message||"Something wrong, try again!",time:3e3,description:"Error: ".concat(e.t0.response.data.code||500)});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),s=function(){var e=Object(Q.a)(P.a.mark((function e(t,r){var i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.watcher,e.prev=1,e.next=4,Se.addWatcher({storyId:a,email:i});case 4:r.resetForm(),n(),Object(fn.toast)({type:"success",title:"Watcher added",time:3e3}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),Object(fn.toast)({type:"error",title:e.t0.response.data.message||"Something wrong, try again!",time:3e3,description:"Error: ".concat(e.t0.response.data.code||500)});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),c=function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se.removeWatcher(t);case 3:n(),Object(fn.toast)({type:"success",title:"Watcher removed",time:3e3}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Object(fn.toast)({type:"error",title:e.t0.response.data.message||"Something wrong, try again!",time:3e3,description:"Error: ".concat(e.t0.response.data.code||500)});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se.notifyWatcher(t);case 3:n(),Object(fn.toast)({type:"success",title:"Invite resented",time:3e3}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Object(fn.toast)({type:"error",title:e.t0.response.data.message||"Something wrong, try again!",time:3e3,description:"Error: ".concat(e.t0.response.data.code||500)});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(N.d,{initialValues:{watcher:""},onSubmit:s,validationSchema:ic,children:function(e){var n=e.isSubmitting;return Object(S.jsx)(N.c,{style:{height:"100%"},children:Object(S.jsxs)(Ja,{children:[Object(S.jsxs)(Va,{children:[Object(S.jsx)(Xs.a,{toggle:!0,label:r?"Published":"Draft",onChange:o,checked:r}),Object(S.jsxs)($s.a,{children:[Object(S.jsxs)(pi.a,{children:[Object(S.jsx)(w.a,{as:"h4",textAlign:"left",children:"Choose who will be able to view your video."}),Object(S.jsxs)(tc,{children:[Object(S.jsx)(ut,{fluid:!0,name:"watcher",placeholder:"type an email",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}}),Object(S.jsx)(E.a,{type:"submit",fluid:!0,primary:!0,loading:n,children:"Share"})]})]}),Object(S.jsx)(ec,{children:Object(S.jsx)(rc,{list:i,onRemoveWatcher:c,resendInvite:l})})]})]}),Object(S.jsx)(Ya,{children:t})]})})}})},oc=k.b.div(Xo||(Xo=Object(C.a)(["\n  width: 100%;\n  min-width: 426px;\n  min-height: 240px;\n  position: relative;\n"]))),sc=k.b.div($o||($o=Object(C.a)(["\n  width: 100%;\n  position: absolute;\n  height: 100%;\n  background-color: #000000;\n  color: white;\n  display: flex;\n  align-items: center;\n  padding: 0 20px;\n  i {\n    margin-right: 0.2em;\n  }\n  div {\n    width: 100%;\n    .ui.header {\n      font-size: 1em;\n      color: white;\n      margin-bottom: 8px;\n    }\n    .ui.progress {\n      background-color: white;\n    }\n  }\n"]))),cc=function(e){var t=e.type,n=e.progress,r="file";return t&&(r+=" ".concat(null===t||void 0===t?void 0:t.toLowerCase())),Object(S.jsxs)(sc,{children:[Object(S.jsx)(_.a,{name:r,size:"huge"}),Object(S.jsxs)("div",{children:[Object(S.jsx)(w.a,{children:"File processing...."}),Object(S.jsx)(hn.a,{percent:n,success:!0,active:!0,size:"small",progress:"percent"})]})]})},lc=function(e){var t=e.ready,n=e.subtitles,r=e.type,i=e.progress,a=e.thumbnail,o=e.media;return Object(S.jsxs)(oc,{children:[!t&&Object(S.jsx)(cc,{type:r,progress:i}),t&&Object(S.jsx)(_r,{subtitles:n,type:r,media:o,cover:a})]})},uc=function(){var e=Object(v.h)(),t=e.search,n=e.pathname,r=Object(f.useState)(0),i=Object(O.a)(r,2),a=i[0],o=i[1],s=Object(x.e)(Ve),c=Object(v.g)(),l=Object(De.parse)(t,{ignoreQueryPrefix:!0}),u=l.tab,d=Object(v.i)().storyId,p=function(e){var t=Object(f.useState)({}),n=Object(O.a)(t,2),r=n[0],i=n[1],a=Object(f.useState)(!0),o=Object(O.a)(a,2),s=o[0],c=o[1],l=Object(f.useState)(!0),u=Object(O.a)(l,2),d=u[0],p=u[1],h=Object(f.useCallback)(Object(Q.a)(P.a.mark((function t(){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.prev=1,t.t0=i,t.next=5,Se.getStory(e);case 5:t.t1=t.sent,(0,t.t0)(t.t1);case 7:return t.prev=7,c(!1),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[1,,7,10]])}))),[e]),b=Object(f.useCallback)(function(){var t=Object(Q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),t.prev=1,t.t0=i,t.next=5,Se.updateStory(e,n);case 5:t.t1=t.sent,(0,t.t0)(t.t1);case 7:return t.prev=7,p(!1),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[1,,7,10]])})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(f.useEffect)((function(){h()}),[]),{story:r,updateStory:b,setStory:i,isLoading:s,isSaving:d,refresh:h}}(d),h=p.story,b=p.isLoading,j=p.setStory,m=p.updateStory,A=p.refresh,E=h.type,C=h.ready,k=h.published,I=h.video,R=h.audio,T=h.thumbnail,D=h.persons,B=h.files,N=h.links,U=h.transcription,L=h.galleryEntries,M=h.timelineEntries,F=h.places,K=h.watchers,z=h.subtitles;Object(f.useEffect)((function(){var e=(null===R||void 0===R?void 0:R.id)||(null===I||void 0===I?void 0:I.id)||"";if(s[e]){var t=s[e],n=t.payload,r=t.finished,i=t.progress;r&&j((function(e){return Object(y.a)(Object(y.a)({},e),{},{ready:!0,thumbnail:n.thumbnail,video:Object(y.a)(Object(y.a)({},e.video),n)})})),o(i)}}),[s]);var J=function(e,t){var r=Object(De.stringify)(Object(y.a)(Object(y.a)({},l),{},{tab:e}),{addQueryPrefix:!0});t?c.replace({pathname:n,search:r}):c.push({pathname:n,search:r})};Object(f.useEffect)((function(){u||J("information",!0)}),[u]);var V=Object(S.jsx)(lc,{type:E,media:I||R,progress:a,thumbnail:T,ready:C,subtitles:z||[]});return Object(S.jsx)(Xt,{children:Object(S.jsxs)($t,{children:[Object(S.jsxs)(g.b,{to:"/a/stories",children:[Object(S.jsx)(_.a,{name:"arrow left"}),"Back"]}),Object(S.jsx)(w.a,{as:"h1",children:"Story"}),Object(S.jsx)(na,{tab:u,onChange:J}),function(){switch(u){case"places":return Object(S.jsx)(Hs,{isLoading:b,refresh:A,storyId:d,places:F||[],children:V});case"people":return Object(S.jsx)(_s,{storyId:d,persons:D,refresh:A,isLoading:b,children:V});case"transcript":return Object(S.jsx)(to,{storyId:d,refresh:A,transcription:U,children:V});case"timeline":return Object(S.jsx)(uo,{isLoading:b,refresh:A,storyId:d,ocurrencies:M||[],children:V});case"subtitles":return Object(S.jsx)(Rs,{isLoading:b,refresh:A,storyId:d,subtitles:z||[],children:V});case"gallery":return Object(S.jsx)(Po,{isLoading:b,refresh:A,storyId:d,galleries:L||[],children:V});case"files":return Object(S.jsx)(go,{storyId:d,refresh:A,files:B||[],isLoading:b,children:V});case"links":return Object(S.jsx)(Co,{storyId:d,refresh:A,links:N||[],isLoading:b,children:V});case"share":return Object(S.jsx)(ac,{storyId:d,watchers:K||[],published:!!k,refresh:A,children:V});default:return Object(S.jsx)(Ga,{story:h,updateStory:m,isLoading:b,children:V})}}()]})})},dc=function(){var e=Object(v.g)(),t=Object(x.f)(T),n=Ht({size:15,request:Se.getStories}),r=n.loading,i=n.items,a=n.hasNextPage,o=n.error,s=n.loadMore,c=n.reload,l=Zt({loading:r,hasNextPage:a,onLoadMore:s,disabled:!!o,rootMargin:"0px 0px 400px 0px"}),u=Object(O.a)(l,1)[0],d=function(){var e=Object(Q.a)(P.a.mark((function e(n){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({open:!0,title:"Delete story",isConfirmation:!0,onClose:function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Se.deleteStory(n);case 5:c(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),Object(fn.toast)({type:"error",title:e.t0.response.data.message,time:3e3,description:"Error: ".concat(e.t0.response.data.code)});case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),content:Object(S.jsx)(S.Fragment,{children:"Are you sure delete this story?"})});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(Xt,{children:Object(S.jsxs)($t,{children:[Object(S.jsx)(w.a,{as:"h1",children:"Stories"}),Object(S.jsxs)(We.a,{children:[i.map((function(t){return Object(S.jsx)(We.a.Column,{tablet:8,mobile:16,widescreen:4,computer:8,largeScreen:4,children:Object(S.jsx)(Ut,{showAutor:!1,story:t,onClick:function(){return e.push("/a/stories/".concat(t.id,"/edit"))},actions:Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(H.a,{pointing:"bottom right",icon:"ellipsis vertical",children:Object(S.jsxs)(H.a.Menu,{children:[Object(S.jsx)(H.a.Item,{text:"Preview",icon:"eye",onClick:function(){return e.push("/a/stories/".concat(t.id))}}),Object(S.jsx)(H.a.Item,{text:"Edit",icon:"pencil",onClick:function(){return e.push("/a/stories/".concat(t.id,"/edit"))}}),Object(S.jsx)(H.a.Item,{text:"Delete Forever",icon:"trash",onClick:function(){return d(t.id)}})]})})})})},t.id)})),a&&Object(S.jsx)("div",{ref:u,children:"loading..."})]})]})})},pc=Object(k.b)(St.a)(es||(es=Object(C.a)(["\n  cursor: pointer;\n  max-width: 329px;\n  max-height: 340px;\n  &:hover {\n    box-shadow: 0 2px 6px 0 #bcbdbd, 0 0 0 2px #d4d4d5;\n  }\n  & > .lazyImage > .image > img {\n    object-fit: contain;\n    width: 100%;\n    height: 200px;\n    background-color: black;\n    position: relative;\n  }\n\n  & > .lazyImage > .image > img::after {\n    content: ' ';\n    background-size: cover;\n    background-position: center;\n    background-repeat: no-repeat;\n    height: 100%;\n    width: 100%;\n    position: absolute;\n    z-index: 2;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n\n  & > .lazyImage > .ui.image > img::after {\n    background-image: url(",");\n  }\n"])),"data:image/png;base64,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"),hc=(Object(k.b)(St.a.Description)(ts||(ts=Object(C.a)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2; /* number of lines to show */\n  -webkit-box-orient: vertical;\n  height: 3em;\n"]))),Object(k.b)(St.a.Meta)(ns||(ns=Object(C.a)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"])))),fc=k.b.div(rs||(rs=Object(C.a)(["\n  margin-top: 0.5em;\n  margin-bottom: 0.5em;\n  height: 1em;\n  display: flex;\n  align-items: center;\n  & > .icon.audio,\n  & > .icon.video {\n    margin-right: 1rem;\n  }\n  & > .avatar {\n    min-width: 24px;\n    margin-right: 0.8rem;\n  }\n  & > span {\n    flex: 1;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    margin-right: 0.8rem;\n  }\n"]))),bc=k.b.div(is||(is=Object(C.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: end;\n  line-height: 24px;\n"]))),jc=function(e){var t=e.onClick,n=e.collection,r=e.actions,i=n.title,a=n.thumbnail,o=(n.description,n.stories),s={onClick:t};return Object(S.jsxs)(pc,Object(y.a)(Object(y.a)({fluid:!0,as:"div",className:"ui fluid card"},s),{},{children:[Object(S.jsx)(It,{src:a,wrapped:!0,rounded:!1}),Object(S.jsxs)(pc.Content,{children:[Object(S.jsx)(pc.Header,{as:hc,children:i}),Object(S.jsx)(fc,{children:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("span",{children:"Stories: ".concat(o.length)}),r&&Object(S.jsx)(bc,{children:r})]})})]})]}))},mc=k.b.div(as||(as=Object(C.a)(["\n  display: flex;\n  & > .ui.button {\n    margin: calc(2rem - 0.14285714em) 1em 1rem;\n    margin-top: -0.14285714em;\n  }\n"]))),vc=function(){var e=Object(v.g)(),t=Object(x.f)(T),n=Object(f.useState)(!1),r=Object(O.a)(n,2),i=r[0],a=r[1],o=Ht({size:15,request:Se.getCollections}),s=o.loading,c=o.items,l=o.hasNextPage,u=o.error,d=o.loadMore,p=o.setItems,h=o.reload,b=Zt({loading:s,hasNextPage:l,onLoadMore:d,disabled:!!u,rootMargin:"0px 0px 400px 0px"}),j=Object(O.a)(b,1)[0],m=function(){var e=Object(Q.a)(P.a.mark((function e(n){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({open:!0,title:"Delete collection",isConfirmation:!0,onClose:function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Se.deleteCollection(n);case 5:h(),e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(2),500!==e.t0.response.status){e.next=13;break}return Object(fn.toast)({type:"warning",title:"Delete collection",time:3e3,description:"This collection can't be deleted. You need to remove stories from this collection and after try delete it."}),e.abrupt("return");case 13:Object(fn.toast)({type:"error",title:e.t0.response.data.message,time:3e3,description:"Error: ".concat(e.t0.response.data.code)});case 14:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),content:Object(S.jsx)(S.Fragment,{children:"Are you sure delete this collection?"})});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(Xt,{children:Object(S.jsxs)($t,{children:[Object(S.jsxs)(mc,{children:[Object(S.jsx)(w.a,{as:"h1",children:"Collections"}),Object(S.jsx)(E.a,{icon:"add",circular:!0,primary:!0,onClick:function(){return a(!0)}})]}),Object(S.jsxs)(We.a,{children:[c.map((function(t){return Object(S.jsx)(We.a.Column,{tablet:8,mobile:16,widescreen:4,computer:8,largeScreen:4,children:Object(S.jsx)(jc,{collection:t,onClick:function(){return e.push("/a/collections/".concat(t.id,"/edit"))},actions:Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(H.a,{pointing:"bottom right",icon:"ellipsis vertical",children:Object(S.jsxs)(H.a.Menu,{children:[!!t.stories.length&&Object(S.jsx)(H.a.Item,{text:"Preview",icon:"eye",onClick:function(){return e.push("/a/stories/".concat(t.stories[0].id))}}),Object(S.jsx)(H.a.Item,{text:"Edit",icon:"pencil",onClick:function(){return e.push("/a/collections/".concat(t.id,"/edit"))}}),Object(S.jsx)(H.a.Item,{text:"Delete Forever",icon:"trash",onClick:function(){return m(t.id)}})]})})})})},t.id)})),l&&Object(S.jsx)("div",{ref:j,children:"loading..."})]}),Object(S.jsx)(Fa,{open:i,onClose:function(e){e&&p([e].concat(Object(Gt.a)(c))),a(!1)}})]})})},gc=k.b.div(os||(os=Object(C.a)(["\n  display: flex;\n  margin-bottom: 1em;\n"]))),Oc=Object(k.b)(hi.a)(ss||(ss=Object(C.a)(["\n  padding-bottom: 30px !important;\n  padding-right: 8px !important;\n\n  @media only screen and (max-width: 1024px) {\n    height: unset;\n    padding-bottom: unset;\n    padding-right: unset;\n  }\n\n  & > .ui.segment.item {\n    padding: 12px;\n  }\n"]))),xc=function(e){var t=e.persons;return Object(S.jsx)(Oc,{relaxed:"very",size:"big",children:t.map((function(e){var t;return Object(S.jsxs)(Oc.Item,{item:"true",as:pi.a,children:[Object(S.jsx)("div",{className:"ui image",children:Object(S.jsx)(Z,{name:e.name,picture:null===(t=e.picture)||void 0===t?void 0:t.thumbnail})}),Object(S.jsxs)(Oc.Content,{verticalAlign:"middle",children:[Object(S.jsx)(Oc.Header,{children:e.name}),Object(S.jsxs)(Oc.Description,{children:[Object(S.jsx)("a",{href:e.link,target:"_blank",rel:"noreferrer",children:Object(S.jsx)("b",{children:e.link})})," "]})]})]},e.id)}))})},yc=function(){var e=Ht({size:15,request:Se.getPersons}),t=e.loading,n=e.items,r=e.hasNextPage,i=e.error,a=e.loadMore,o=Zt({loading:t,hasNextPage:r,onLoadMore:a,disabled:!!i,rootMargin:"0px 0px 400px 0px"}),s=Object(O.a)(o,1)[0];return Object(S.jsx)(Xt,{children:Object(S.jsxs)($t,{children:[Object(S.jsx)(gc,{children:Object(S.jsx)(w.a,{as:"h1",children:"People"})}),Object(S.jsx)(xc,{persons:n}),r&&Object(S.jsx)("div",{ref:s,children:"loading..."})]})})},Ac=k.b.div(cs||(cs=Object(C.a)(["\n  display: flex;\n  margin-bottom: 1em;\n"]))),wc=Object(k.b)(hi.a)(ls||(ls=Object(C.a)(["\n  padding-bottom: 30px !important;\n  padding-right: 8px !important;\n\n  @media only screen and (max-width: 1024px) {\n    height: unset;\n    padding-bottom: unset;\n    padding-right: unset;\n  }\n"]))),Ec=k.b.div(us||(us=Object(C.a)(["\n  position: relative;\n  min-width: 500px;\n  & > div {\n    padding: 8px 16px;\n  }\n  & > div:last-child {\n    height: 260px;\n  }\n\n  @media only screen and (max-width: 1024px) {\n    min-width: unset;\n  }\n"]))),Cc=function(e){var t=e.places;return Object(S.jsx)(wc,{children:t.map((function(e){var t=[Number(e.latitude),Number(e.longitude)];return Object(S.jsxs)(Ec,{item:"true",as:pi.a,children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:Object(S.jsx)("label",{children:"Name:"})})," ",e.name]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:Object(S.jsx)("label",{children:"Description:"})})," ",e.description]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:Object(S.jsx)("label",{children:"Address:"})})," ",e.location]}),Object(S.jsx)(Hi,{position:t,markers:[t]})]},e.id)}))})},kc=function(){var e=Ht({size:15,request:Se.getPlaces}),t=e.loading,n=e.items,r=e.hasNextPage,i=e.error,a=e.loadMore,o=Zt({loading:t,hasNextPage:r,onLoadMore:a,disabled:!!i,rootMargin:"0px 0px 400px 0px"}),s=Object(O.a)(o,1)[0];return Object(S.jsx)(Xt,{children:Object(S.jsxs)($t,{children:[Object(S.jsx)(Ac,{children:Object(S.jsx)(w.a,{as:"h1",children:"Places"})}),Object(S.jsx)(Cc,{places:n}),r&&Object(S.jsx)("div",{ref:s,children:"loading..."})]})})},Ic=k.b.div(ds||(ds=Object(C.a)(["\n  display: flex;\n  margin-bottom: 1em;\n"]))),Sc=k.b.div(ps||(ps=Object(C.a)(["\n  display: flex;\n  flex-flow: wrap;\n  padding-bottom: 30px !important;\n  padding-right: 8px !important;\n\n  @media only screen and (max-width: 1024px) {\n    height: unset;\n    padding-bottom: unset;\n    padding-right: unset;\n  }\n\n  & > .ui.segment.item {\n    padding: 12px;\n  }\n"]))),Rc=k.b.div(hs||(hs=Object(C.a)(["\n  cursor: pointer;\n  width: 250px;\n  height: 285px;\n  padding: 8px;\n  position: relative;\n"]))),Tc=k.b.div(fs||(fs=Object(C.a)(["\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.85);\n  display: flex;\n  justify-content: center;\n  & > .ui.image {\n    object-fit: contain;\n    width: unset;\n    height: unset;\n  }\n"]))),Dc=function(e){var t=e.image,n=Object(x.e)(Ve),r=Object(f.useState)(!t.thumbnail),i=Object(O.a)(r,2),a=i[0],o=i[1],s=Object(f.useState)(t.thumbnail),c=Object(O.a)(s,2),l=c[0],u=c[1],d=t.id;return Object(f.useEffect)((function(){if(n[d]){var e=n[d],t=e.payload,r=e.finished;o(!0),r&&(o(!1),u(t.thumbnail))}}),[n]),Object(S.jsx)(Rc,{children:Object(S.jsx)(Tc,{children:a?Object(S.jsx)(tn.a,{active:!0,inverted:!0,children:"Processing..."}):Object(S.jsx)(Ze.a,{src:l,size:"big"})})})},Bc=function(){var e=Ht({size:15,request:Se.getGallery}),t=e.loading,n=e.items,r=e.hasNextPage,i=e.error,a=e.loadMore,o=Zt({loading:t,hasNextPage:r,onLoadMore:a,disabled:!!i,rootMargin:"0px 0px 400px 0px"}),s=Object(O.a)(o,1)[0];return Object(S.jsx)(Xt,{children:Object(S.jsxs)($t,{children:[Object(S.jsx)(Ic,{children:Object(S.jsx)(w.a,{as:"h1",children:"Photos"})}),Object(S.jsxs)(Sc,{children:[n.map((function(e){return Object(S.jsx)(Dc,{image:e.image},e.id)})),r&&Object(S.jsx)("div",{ref:s,children:"loading..."})]})]})})},Pc=k.b.div(bs||(bs=Object(C.a)(["\n  display: flex;\n  margin-bottom: 1em;\n"]))),Qc=Object(k.b)(hi.a)(js||(js=Object(C.a)(["\n  overflow: auto;\n  padding-bottom: 30px !important;\n  padding-right: 8px !important;\n\n  @media only screen and (max-width: 1024px) {\n    height: unset;\n    padding-bottom: unset;\n    padding-right: unset;\n  }\n\n  & > .ui.segment.item {\n    padding: 12px;\n    i {\n      vertical-align: middle;\n    }\n  }\n"]))),Nc=function(e){var t=e.files;return Object(S.jsx)(Qc,{relaxed:"very",size:"big",children:t.map((function(e){return Object(S.jsxs)(Qc.Item,{item:"true",as:pi.a,children:[Object(S.jsx)(_.a,{name:"file alternate outline",size:"big"}),Object(S.jsx)(Qc.Content,{verticalAlign:"middle",children:Object(S.jsx)(Qc.Header,{children:Object(S.jsx)("a",{href:e.url,children:Object(S.jsx)("b",{children:e.originalName})})})})]},e.id)}))})},Uc=function(){var e=Ht({size:15,request:Se.getFiles}),t=e.loading,n=e.items,r=e.hasNextPage,i=e.error,a=e.loadMore,o=Zt({loading:t,hasNextPage:r,onLoadMore:a,disabled:!!i,rootMargin:"0px 0px 400px 0px"}),s=Object(O.a)(o,1)[0];return Object(S.jsx)(Xt,{children:Object(S.jsxs)($t,{children:[Object(S.jsx)(Pc,{children:Object(S.jsx)(w.a,{as:"h1",children:"Files"})}),Object(S.jsx)(Nc,{files:n}),r&&Object(S.jsx)("div",{ref:s,children:"loading..."})]})})},Lc=k.b.div(ms||(ms=Object(C.a)(["\n  display: flex;\n  margin-bottom: 1em;\n"]))),Mc=Object(k.b)(hi.a)(vs||(vs=Object(C.a)(["\n  padding-bottom: 30px !important;\n  padding-right: 8px !important;\n\n  @media only screen and (max-width: 1024px) {\n    height: unset;\n    padding-bottom: unset;\n    padding-right: unset;\n  }\n"]))),_c=k.b.div(gs||(gs=Object(C.a)(["\n  position: relative;\n  min-width: 500px;\n  & > div {\n    padding: 8px 16px;\n    word-break: break-word;\n  }\n  @media only screen and (max-width: 1024px) {\n    min-width: unset;\n  }\n"]))),Fc=function(e){var t=e.ocurrencies;return Object(S.jsx)(Mc,{children:t.map((function(e){return Object(S.jsxs)(_c,{item:"true",as:pi.a,children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:Object(S.jsx)("label",{children:"At:"})})," ",Object(co.a)(Object(Ui.a)(e.at,"yyyy-MM-dd'T'HH:mm:ss'Z'",new Date),"PPP")]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:Object(S.jsx)("label",{children:"Title:"})})," ",e.title]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:Object(S.jsx)("label",{children:"Description:"})})," ",e.description]})]},e.id)}))})},Kc=function(){var e=Ht({size:15,request:Se.getTimelines}),t=e.loading,n=e.items,r=e.hasNextPage,i=e.error,a=e.loadMore,o=Zt({loading:t,hasNextPage:r,onLoadMore:a,disabled:!!i,rootMargin:"0px 0px 400px 0px"}),s=Object(O.a)(o,1)[0];return Object(S.jsx)(Xt,{children:Object(S.jsxs)($t,{children:[Object(S.jsx)(Lc,{children:Object(S.jsx)(w.a,{as:"h1",children:"Files"})}),Object(S.jsx)(Fc,{ocurrencies:n}),r&&Object(S.jsx)("div",{ref:s,children:"loading..."})]})})},zc=et.b().shape({title:et.d().required()}),Jc=k.b.div(Os||(Os=Object(C.a)(["\n  margin-bottom: 32px;\n"]))),Vc=k.b.div(xs||(xs=Object(C.a)(["\n  display: flex;\n  height: 100%;\n  position: relative;\n  padding: 24px;\n  @media only screen and (max-width: 1024px) {\n    flex-direction: column;\n    align-items: center;\n    flex-flow: column;\n    overflow-x: hidden;\n  }\n"]))),Yc=k.b.div(ys||(ys=Object(C.a)(["\n  &:before {\n    content: ' ';\n    background-color: #f8f8f8;\n    position: absolute;\n    left: -23px;\n    top: -22px;\n    bottom: -18px;\n    width: 508px;\n    z-index: -1;\n  }\n  & > * > .ui.button {\n    margin-top: 48px;\n  }\n  @media only screen and (max-width: 1024px) {\n    width: 100%;\n    &:before {\n      display: none;\n    }\n  }\n"]))),qc=k.b.div(As||(As=Object(C.a)(["\n  margin-top: 48px;\n  left: 508px;\n  right: 22px;\n  position: absolute;\n  @media only screen and (max-width: 1024px) {\n    width: 100%;\n    position: relative;\n    left: unset;\n    right: unset;\n  }\n"]))),Wc=Object(k.b)(Jn.a)(ws||(ws=Object(C.a)(["\n  &.item {\n    border: 1px solid #e0e1e2 !important;\n    height: 200px;\n    min-width: 600px;\n    max-width: 800px;\n  }\n  &.item > .content {\n    padding: 16px 0px 16px 14px !important;\n    & > .description {\n      max-width: fit-content;\n      -webkit-line-clamp: 7;\n      -webkit-box-orient: vertical;\n      display: -webkit-box;\n      overflow: hidden;\n      margin-right: 24px;\n    }\n  }\n  &.item > .lazyImage {\n    height: 200px;\n    width: 352px;\n  }\n  @media only screen and (max-width: 1024px) {\n    &.item {\n      height: unset;\n      min-width: unset;\n    }\n  }\n\n  @media only screen and (max-width: 767px) {\n    &.item > .lazyImage {\n      height: unset;\n      width: unset;\n    }\n  }\n"]))),Zc=function(){var e=Object(f.useState)(),t=Object(O.a)(e,2),n=t[0],r=t[1],i=function(e){var t=Object(f.useState)(!1),n=Object(O.a)(t,2),r=n[0],i=n[1],a=Object(f.useState)(void 0),o=Object(O.a)(a,2),s=o[0],c=o[1],l=function(){var t=Object(Q.a)(P.a.mark((function t(){var n;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.next=3,Se.getCollection(e);case 3:n=t.sent,c(n),i(!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=function(){var t=Object(Q.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Se.updateCollection(e,n);case 2:r=t.sent,c(r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(f.useEffect)((function(){l()}),[]),{getCollection:l,collection:s,isLoading:r,updateCollection:u}}(Object(v.i)().collectionId),a=i.collection,o=i.isLoading,s=i.updateCollection,c=function(){var e=Object(Q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(Object(y.a)(Object(y.a)({},t),{},{coverId:n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l={title:(null===a||void 0===a?void 0:a.title)||""};return Object(S.jsx)(nn,{isLoading:o,children:Object(S.jsx)(Xt,{children:Object(S.jsxs)(Vc,{children:[Object(S.jsxs)(Yc,{children:[Object(S.jsx)(Jc,{children:Object(S.jsxs)(g.b,{to:"/a/collections",children:[Object(S.jsx)(_.a,{name:"arrow left"}),"Back"]})}),Object(S.jsx)(N.d,{initialValues:l,validationSchema:zc,onSubmit:c,children:Object(S.jsxs)(N.c,{children:[Object(S.jsx)(ut,{name:"title",label:"Title",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}}),Object(S.jsx)(_a,{onIdChange:r,cover:null===a||void 0===a?void 0:a.cover,noClick:!1,ButtonLabel:"Upload cover"}),Object(S.jsx)(E.a,{primary:!0,fluid:!0,children:"Save"})]})})]}),Object(S.jsxs)(qc,{children:[Object(S.jsx)(w.a,{as:"h1",children:"Stories"}),Object(S.jsx)(Wc.Group,{children:null===a||void 0===a?void 0:a.stories.map((function(e){var t;return Object(S.jsxs)(Wc,{children:[Object(S.jsx)(It,{src:e.thumbnail,wrapped:!0,rounded:!1,className:"".concat(null===(t=e.type)||void 0===t?void 0:t.toLowerCase())}),Object(S.jsxs)(Wc.Content,{children:[Object(S.jsx)(Wc.Header,{as:g.b,to:"/a/stories/".concat(e.id,"/edit"),children:e.title}),Object(S.jsx)(Wc.Description,{children:e.description||"N/A"})]})]},e.id)}))})]})]})})})},Gc=k.b.div(Es||(Es=Object(C.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-left: auto;\n  margin-right: auto;\n  min-width: 500px;\n  transform: translateY(-50%) translateX(-50%);\n"]))),Hc=k.b.div(Cs||(Cs=Object(C.a)(["\n  text-align: center;\n  padding: 16px 0;\n"]))),Xc=function(){var e=Object(v.g)();return Object(S.jsx)(Gc,{children:Object(S.jsxs)(pi.a,{placeholder:!0,children:[Object(S.jsxs)(w.a,{icon:!0,children:[Object(S.jsx)(_.a,{name:"warning circle"}),Object(S.jsx)("div",{children:"Sorry!"})]}),Object(S.jsx)(Hc,{children:"YOU DON`T HAVE PERMISSION TO ACCESS THIS PAGE"}),Object(S.jsx)(E.a,{onClick:function(){return e.goBack()},primary:!0,children:"Go Back"})]})})},$c=function(){var e=Object(v.g)();return Object(S.jsx)(Gc,{children:Object(S.jsxs)(pi.a,{placeholder:!0,children:[Object(S.jsxs)(w.a,{icon:!0,children:[Object(S.jsx)(_.a,{name:"warning circle"}),Object(S.jsx)("div",{children:"Sorry!"})]}),Object(S.jsx)(Hc,{children:"THE PAGE YOU WERE LOOKING FOR DOES NOT EXIST"}),Object(S.jsx)(E.a,{onClick:function(){return e.push("/a/home")},primary:!0,children:"Go to home"})]})})},el=et.b().shape({token:et.d().required(),password:et.d().required("new password is a required field.").min(8,"Password is too short - should be 8 chars minimum.").matches(/[a-zA-Z]/,"Password can onlsy contain Latin letters."),confirmation:et.d().oneOf([et.c("password"),null],"new passwords must match").required("confirm new password is a required field.")}),tl=function(){var e=Object(v.g)(),t=Object(v.h)().search,n=Object(De.parse)(t,{ignoreQueryPrefix:!0}).token,r=Object(x.f)(T),i=Object(f.useState)(void 0),a=Object(O.a)(i,2),o=a[0],s=a[1],c=function(){var t=Object(Q.a)(P.a.mark((function t(n){var i,a,o;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.password,a=n.confirmation,o=n.token,t.prev=1,t.next=4,Se.passwordReset({password:i,confirmation:a,token:o});case 4:e.push("/u/signin"),r({open:!0,title:"Password changed",content:Object(S.jsx)(S.Fragment,{children:"Your password has been reseted."})}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),"1003"===t.t0.response.data.code&&(r({open:!0,title:"Password change",type:"error",content:Object(S.jsx)(S.Fragment,{children:"This link to change the password has expired. Please try again!"})}),e.push("/u/signin")),"1002"===t.t0.response.data.code&&(r({open:!0,title:"Password change",type:"error",content:Object(S.jsx)(S.Fragment,{children:"This link not exists."})}),e.push("/u/signin")),s("Something was wrong! please try again.");case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(w.a,{as:"h2",color:"black",textAlign:"left",children:"Change your password"}),Object(S.jsx)("div",{style:{padding:"16px 0px 32px"},children:Object(S.jsx)(w.a,{as:"h4",color:"black",textAlign:"left",children:"For the most secure password create one with at least 8 numbers or letters:"})}),Object(S.jsx)(N.d,{initialValues:{password:"",confirmation:"",token:n},validationSchema:el,onSubmit:c,children:function(e){var t=e.isSubmitting;return Object(S.jsxs)(N.c,{children:[Object(S.jsx)(ut,{name:"password",placeholder:"Password",type:"password",errorMessage:o}),Object(S.jsx)(ut,{name:"confirmation",placeholder:"Confirm new password",type:"password",errorMessage:o}),Object(S.jsx)(E.a,{color:"blue",fluid:!0,size:"large",loading:t,type:"submit",children:"Change"}),Object(S.jsx)(gt,{to:"/u/signin",children:"Back to login"})]})}})]})},nl=(n(504),n(251)),rl=n.n(nl),il=(n(503),n(357));Object(il.register)(er.default);var al={controls:!0,bigPlayButton:!1,fluid:!0,aspectRatio:"16:9",plugins:{record:{audio:!0,video:{width:{min:854,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}},frameWidth:1080,frameHeight:720,maxLength:10800,videoMimeType:"video/webm"}}},ol=function(e){var t=e.onReady,n=e.getDevices,r=void 0===n||n,i=Object(f.useRef)(null),a=Object(f.useRef)(null);return Object(f.useEffect)((function(){if(!a.current){var e=i.current;if(!e)return;var n=Object(er.default)(e,al,(function(){var e="Using video.js: ".concat(er.default.VERSION," with videojs-record: ").concat(er.default.getPluginVersion("record")," and recordrtc: ").concat(rl.a.version);er.default.log(e),n&&t&&t(n)}));a.current=n}}),[t,al]),Object(f.useEffect)((function(){return r&&a.current&&a.current.record().getDevice(),function(){a.current&&(a.current.record().destroy(),a.current=null)}}),[r]),Object(S.jsx)("div",{"data-vjs-player":!0,children:Object(S.jsx)("video",{id:"myVideo",ref:i,className:"video-js vjs-default-skin",playsInline:!0})})},sl=(n(842),n(358)),cl=n.n(sl),ll=n(533),ul=n.n(ll),dl=n(534);cl.a.microphone=ul.a,Object(dl.register)(er.default),Object(il.register)(er.default);var pl,hl,fl={controls:!0,bigPlayButton:!1,fluid:!0,aspectRatio:"16:9",plugins:{wavesurfer:{backend:"WebAudio",waveColor:"#36393b",progressColor:"black",cursorWidth:1.5,msDisplayMax:20,hideScrollbar:!0,displayMilliseconds:!0,plugins:[cl.a.microphone.create({bufferSize:4096,numberOfInputChannels:1,numberOfOutputChannels:1,constraints:{video:!1,audio:!0}})]},record:{audio:!0,video:!1,maxLength:10800,audioMimeType:"audio/webm"}}},bl=function(e){var t=e.onReady,n=(e.getDevices,Object(f.useRef)(null)),r=Object(f.useRef)(null);return Object(f.useEffect)((function(){if(!r.current){var e=n.current;if(!e)return;var i=Object(er.default)(e,fl,(function(){var e="Using video.js: ".concat(er.default.VERSION,"\n          with videojs-record: ").concat(er.default.getPluginVersion("record"),"\n          ,videojs-wavesurfer: ").concat(er.default.getPluginVersion("wavesurfer"),"\n          and recordrtc: ").concat(rl.a.version);er.default.log(e),i&&t&&t(i)}));r.current=i}}),[t,fl]),Object(f.useEffect)((function(){if(r.current)return function(){r.current&&(r.current.dispose(),r.current=null)}}),[]),Object(S.jsx)("audio",{id:"myAudio",ref:n,className:"video-js vjs-default-skin"})},jl=k.b.div(pl||(pl=Object(C.a)(["\n  max-width: 1080px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  & > button {\n    position: absolute;\n    z-index: 2;\n  }\n  & > #myAudio {\n    background-color: #9fd6ba;\n  }\n"]))),ml=k.b.div(hl||(hl=Object(C.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: calc(100vh - 66px);\n"]))),vl=function(){var e=Object(f.useRef)(null),t=Object(v.i)().type,n=Object(f.useState)(!1),r=Object(O.a)(n,2),i=(r[0],r[1]),a=Object(f.useState)(!1),o=Object(O.a)(a,2),s=o[0],c=o[1],l=Kn(),u=l.createStory,d=l.progress,p=l.isUploading,h=function(t){e.current=t,t.on("startRecord",(function(){i(!0)})),t.on("stopRecord",(function(){i(!1)})),t.on("finishRecord",(function(){console.log("Finished recording: ",t.recordedData),t.recordedData&&c(!0)}))},b=function(){var t=Object(Q.a)(P.a.mark((function t(){var n;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.current){t.next=2;break}return t.abrupt("return");case 2:return n=e.current.recordedData,t.next=5,u(n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(S.jsx)(ml,{children:Object(S.jsxs)(jl,{children:["video"===t&&Object(S.jsx)(ol,{onReady:h}),"audio"===t&&Object(S.jsx)(bl,{onReady:h}),Object(S.jsx)(nn,{isLoading:p,progress:d,message:"sending..."}),e&&s&&Object(S.jsxs)(E.a,{primary:!0,size:"huge",onClick:b,children:[Object(S.jsx)(_.a,{name:"upload"}),"Send"]})]})})},gl=function(){var e=localStorage.getItem("token");return(e?JSON.parse(e):void 0)?Object(S.jsx)(qe,{children:Object(S.jsxs)(v.d,{children:[Object(S.jsx)(v.b,{exact:!0,path:"/a/home",component:rn}),Object(S.jsx)(v.b,{exact:!0,path:"/a/profile",component:vn}),Object(S.jsx)(v.b,{exact:!0,path:"/a/stories/new",component:zn}),Object(S.jsx)(v.b,{exact:!0,path:"/a/stories/record/:type",component:vl}),Object(S.jsx)(v.b,{exact:!0,path:"/a/stories/:storyId/edit",component:uc}),Object(S.jsx)(v.b,{exact:!0,path:"/a/stories/:storyId",component:ta}),Object(S.jsx)(v.b,{exact:!0,path:"/a/stories",component:dc}),Object(S.jsx)(v.b,{exact:!0,path:"/a/collections",component:vc}),Object(S.jsx)(v.b,{exact:!0,path:"/a/collections/:collectionId/edit",component:Zc}),Object(S.jsx)(v.b,{exact:!0,path:"/a/people",component:yc}),Object(S.jsx)(v.b,{exact:!0,path:"/a/places",component:kc}),Object(S.jsx)(v.b,{exact:!0,path:"/a/photos",component:Bc}),Object(S.jsx)(v.b,{exact:!0,path:"/a/files",component:Uc}),Object(S.jsx)(v.b,{exact:!0,path:"/a/timelines",component:Kc}),Object(S.jsx)(v.b,{exact:!0,path:"/a/signout",component:gn}),Object(S.jsx)(v.b,{exact:!0,path:"/a/404",component:$c}),Object(S.jsx)(v.b,{exact:!0,path:"/a/403",component:Xc}),Object(S.jsx)(v.a,{to:"/a/home"})]})}):Object(S.jsx)(v.a,{to:"/u/signin"})},Ol=function(){var e=localStorage.getItem("token");return(e?JSON.parse(e):void 0)?Object(S.jsx)(v.a,{to:"/a/home"}):Object(S.jsx)($e,{children:Object(S.jsxs)(v.d,{children:[Object(S.jsx)(v.b,{path:"/u/signin",component:Ot}),Object(S.jsx)(v.b,{path:"/u/signup",component:wt}),Object(S.jsx)(v.b,{path:"/u/forgot-password",component:yt}),Object(S.jsx)(v.b,{path:"/u/password-reset",component:tl}),Object(S.jsx)(v.b,{path:"/u/confirmation-email",children:Object(S.jsx)(xn,{children:Object(S.jsx)(Ot,{})})}),Object(S.jsx)(v.a,{to:"/u/signin"})]})})},xl=function(){return Object(S.jsxs)(g.a,{children:[Object(S.jsx)(M,{}),Object(S.jsx)(fn.SemanticToastContainer,{position:"bottom-left"}),Object(S.jsxs)(v.d,{children:[Object(S.jsx)(v.b,{path:"/u",children:Object(S.jsx)(Ol,{})}),Object(S.jsx)(v.b,{path:"/a",children:Object(S.jsx)(gl,{})}),Object(S.jsx)(v.a,{to:"/a"})]})]})},yl=n(81),Al=n(535),wl=function(e){var t=e.resetErrorBoundary;return Object(S.jsx)(Gc,{children:Object(S.jsxs)(pi.a,{placeholder:!0,children:[Object(S.jsxs)(w.a,{icon:!0,children:[Object(S.jsx)(_.a,{name:"warning circle"}),Object(S.jsx)("div",{children:"Sorry!"})]}),Object(S.jsx)(Hc,{children:"Something went wrong!"}),Object(S.jsx)(E.a,{onClick:t,primary:!0,children:"Try again"})]})})},El=function(){var e=Object(x.f)(z);return Object(f.useEffect)((function(){function t(){var t=K()("(max-width: 767px)").matches,n=K()("(max-width: 1024px)").matches;e({isMobile:t,isTablet:n})}return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]),null},Cl=Object(yl.a)(),kl=function(){return Object(S.jsxs)(Al.ErrorBoundary,{FallbackComponent:wl,onReset:function(){return window.location.replace(window.location.href)},children:[Object(S.jsx)(El,{}),Object(S.jsx)(v.c,{history:Cl,children:Object(S.jsx)(xl,{})})]})},Il=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,911)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};n(843),n(844),n(845),n(846);m.a.render(Object(S.jsx)(x.a,{children:Object(S.jsx)(kl,{})}),document.getElementById("root")),Il()}},[[847,1,2]]]);
//# sourceMappingURL=main.dc90b1a8.chunk.js.map