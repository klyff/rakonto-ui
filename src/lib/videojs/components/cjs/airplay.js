"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var videojs=_interopDefault(require("video.js"));const onPlayerReady=e=>{var a=window.WebKitPlaybackTargetAvailabilityEvent;if(e.controlBar){if(!r()){var t=videojs.dom.createEl("button",{className:"vjs-airplay-button vjs-control vjs-button"},{role:"button",type:"button","aria-disabled":"false"}),i=e.controlBar.addChild("button",{el:t});i.el_.innerHTML='<span aria-hidden="true" class="vjs-icon-placeholder"></span><span class="vjs-control-text" aria-live="polite">'+e.localize("Start AirPlay")+"</span>";e.controlBar.el_.insertBefore(i.el_,e.controlBar.getChild("fullscreenToggle").el_);a||i.hide();n();i.el_.onclick=function(){e.trigger("airPlayRequested")};i.el_.ontouchstart=function(a){a.stopImmediatePropagation();e.trigger("airPlayRequested")}}e.on("airPlayRequested",l.bind(null,e))}function r(){return e.el().querySelector(".vjs-airplay-button")}function l(e){var a=e.el().querySelector("video, audio");a&&a.webkitShowPlaybackTargetPicker&&a.webkitShowPlaybackTargetPicker()}function o(){return e.el().querySelector("video, audio")}function n(){var e=o(),t=this;e&&a&&e.addEventListener("webkitplaybacktargetavailabilitychanged",function(e){"available"===e.availability?t.show():t.hide()})}},airplay=function(){this.ready(()=>{onPlayerReady(this)})},registerPlugin=videojs.registerPlugin||videojs.plugin;registerPlugin("airplay",airplay);airplay.VERSION="1.1";module.exports=airplay;